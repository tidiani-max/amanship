{"file_contents":{"client/App.tsx":{"content":"import React, { useEffect } from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nimport { KeyboardProvider } from \"react-native-keyboard-controller\";\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\nimport { StatusBar } from \"expo-status-bar\";\n\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/query-client\";\n\nimport RootStackNavigator from \"@/navigation/RootStackNavigator\";\nimport { ErrorBoundary } from \"@/components/ErrorBoundary\";\nimport { CartProvider } from \"@/context/CartContext\";\nimport { LocationProvider } from \"@/context/LocationContext\";\nimport { AuthProvider } from \"@/context/AuthContext\";\nimport { LanguageProvider } from \"@/context/LanguageContext\";\nimport { OnboardingProvider } from \"@/context/OnboardingContext\";\n\nfunction SeedDataOnMount() {\n  useEffect(() => {\n    apiRequest(\"POST\", \"/api/seed\").catch(() => {});\n  }, []);\n  return null;\n}\n\nexport default function App() {\n  return (\n    <ErrorBoundary>\n      <QueryClientProvider client={queryClient}>\n        <AuthProvider>\n          <OnboardingProvider>\n            <LanguageProvider>\n              <CartProvider>\n                <LocationProvider>\n                <SeedDataOnMount />\n                <SafeAreaProvider>\n                  <GestureHandlerRootView style={styles.root}>\n                    <KeyboardProvider>\n                      <NavigationContainer>\n                        <RootStackNavigator />\n                      </NavigationContainer>\n                      <StatusBar style=\"auto\" />\n                    </KeyboardProvider>\n                  </GestureHandlerRootView>\n                </SafeAreaProvider>\n                </LocationProvider>\n              </CartProvider>\n            </LanguageProvider>\n          </OnboardingProvider>\n        </AuthProvider>\n      </QueryClientProvider>\n    </ErrorBoundary>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n  },\n});\n","path":null,"size_bytes":2099,"size_tokens":null},"client/screens/CheckoutScreen.tsx":{"content":"import React, { useState } from \"react\";\nimport { View, StyleSheet, ScrollView, Pressable, Alert, Image } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { useMutation } from \"@tanstack/react-query\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Button } from \"@/components/Button\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius, Shadows } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { mockAddresses } from \"@/data/mockData\";\nimport { useCart } from \"@/context/CartContext\";\nimport { useLocation } from \"@/context/LocationContext\";\nimport { apiRequest } from \"@/lib/query-client\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { getImageUrl } from \"@/lib/image-url\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\ninterface PaymentOption {\n  id: string;\n  name: string;\n  icon: string;\n  type: \"ewallet\" | \"bank\" | \"card\" | \"cod\";\n}\n\nconst paymentMethods: PaymentOption[] = [\n  { id: \"gopay\", name: \"GoPay\", icon: \"credit-card\", type: \"ewallet\" },\n  { id: \"ovo\", name: \"OVO\", icon: \"credit-card\", type: \"ewallet\" },\n  { id: \"shopeepay\", name: \"ShopeePay\", icon: \"credit-card\", type: \"ewallet\" },\n  { id: \"dana\", name: \"DANA\", icon: \"credit-card\", type: \"ewallet\" },\n  { id: \"bca\", name: \"BCA Virtual Account\", icon: \"briefcase\", type: \"bank\" },\n  { id: \"card\", name: \"Credit Card\", icon: \"credit-card\", type: \"card\" },\n];\n\nconst codPaymentOption: PaymentOption = {\n  id: \"cod\",\n  name: \"Cash on Delivery\",\n  icon: \"dollar-sign\",\n  type: \"cod\",\n};\n\nexport default function CheckoutScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const navigation = useNavigation<NavigationProp>();\n  const { items, subtotal, clearCart } = useCart();\n  const { location, store, codAllowed, estimatedDeliveryMinutes } = useLocation();\n  const { t } = useLanguage();\n  \n  const [selectedAddress] = useState(mockAddresses[0]);\n  const [selectedPayment, setSelectedPayment] = useState<PaymentOption>(paymentMethods[0]);\n\n  const deliveryFee = 10000;\n  const total = subtotal + deliveryFee;\n  const itemCount = items.reduce((sum, item) => sum + item.quantity, 0);\n\n  const availablePayments = codAllowed \n    ? [...paymentMethods, codPaymentOption] \n    : paymentMethods;\n\n  const formatPrice = (price: number) => {\n    return `Rp ${price.toLocaleString(\"id-ID\")}`;\n  };\n\n  const orderMutation = useMutation({\n    mutationFn: async () => {\n      const orderItems = items.map((item) => ({\n        productId: item.product.id,\n        name: item.product.name,\n        price: item.product.price,\n        quantity: item.quantity,\n      }));\n\n      const res = await apiRequest(\"POST\", \"/api/orders\", {\n        customerLat: location?.latitude,\n        customerLng: location?.longitude,\n        paymentMethod: selectedPayment.type === \"cod\" ? \"cod\" : \"midtrans\",\n        items: orderItems,\n        total,\n        deliveryFee,\n        addressId: selectedAddress.id,\n      });\n      return res.json();\n    },\n    onSuccess: (data) => {\n      navigation.navigate(\"OrderSuccess\", { orderId: data.orderNumber || data.id });\n    },\n    onError: (error: any) => {\n      Alert.alert(\n        \"Order Failed\",\n        error?.message || \"Unable to place order. Please try again.\",\n        [{ text: \"OK\" }]\n      );\n    },\n  });\n\n  const handlePlaceOrder = () => {\n    if (!location) {\n      Alert.alert(\"Location Required\", \"Please enable location to place an order.\");\n      return;\n    }\n    if (items.length === 0) {\n      Alert.alert(\"Empty Cart\", \"Please add items to your cart first.\");\n      return;\n    }\n    orderMutation.mutate();\n  };\n\n  return (\n    <View style={{ flex: 1, backgroundColor: theme.backgroundRoot }}>\n      <ScrollView\n        contentContainerStyle={[\n          styles.scrollContent,\n          {\n            paddingTop: headerHeight + Spacing.lg,\n            paddingBottom: 180,\n          },\n        ]}\n        showsVerticalScrollIndicator={false}\n      >\n        <View style={styles.section}>\n          <View style={styles.sectionHeader}>\n            <ThemedText type=\"h3\">{t.checkout.deliveryAddress}</ThemedText>\n            <Pressable onPress={() => navigation.navigate(\"EditAddress\", { address: selectedAddress })}>\n              <ThemedText type=\"caption\" style={{ color: theme.primary }}>\n                {t.home.change}\n              </ThemedText>\n            </Pressable>\n          </View>\n          <Card>\n            <View style={styles.addressContent}>\n              <View style={[styles.addressIcon, { backgroundColor: theme.primary + \"20\" }]}>\n                <Feather name=\"map-pin\" size={20} color={theme.primary} />\n              </View>\n              <View style={styles.addressDetails}>\n                <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n                  {selectedAddress.label}\n                </ThemedText>\n                <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n                  {selectedAddress.fullAddress}\n                </ThemedText>\n                {selectedAddress.details ? (\n                  <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n                    {selectedAddress.details}\n                  </ThemedText>\n                ) : null}\n              </View>\n            </View>\n          </Card>\n        </View>\n        \n        <View style={styles.section}>\n          <View style={styles.deliveryBadge}>\n            <View style={[styles.badgeIcon, { backgroundColor: theme.primary }]}>\n              <Feather name=\"zap\" size={16} color={theme.buttonText} />\n            </View>\n            <View>\n              <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n                {estimatedDeliveryMinutes ? `${estimatedDeliveryMinutes}-${t.home.minuteDelivery}` : `15-${t.home.minuteDelivery}`}\n              </ThemedText>\n              <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n                {store ? `${t.home.fromStore} ${store.name}` : t.home.findingStore}\n              </ThemedText>\n            </View>\n          </View>\n        </View>\n        \n        {items.length > 0 ? (\n          <View style={styles.section}>\n            <View style={styles.sectionHeader}>\n              <ThemedText type=\"h3\">{t.cart.title}</ThemedText>\n              <Pressable onPress={() => navigation.navigate(\"Cart\")}>\n                <ThemedText type=\"caption\" style={{ color: theme.primary }}>\n                  {t.home.change}\n                </ThemedText>\n              </Pressable>\n            </View>\n            <Card>\n              {items.map((item, index) => (\n                <View \n                  key={item.product.id}\n                  style={[\n                    styles.cartItemRow,\n                    index < items.length - 1 && styles.cartItemBorder,\n                  ]}\n                >\n                  <View style={[styles.cartItemImage, { backgroundColor: theme.backgroundDefault }]}>\n                    {item.product.image ? (\n                      <Image \n                        source={{ uri: getImageUrl(item.product.image) }} \n                        style={styles.cartItemImageContent} \n                      />\n                    ) : (\n                      <Feather name=\"package\" size={20} color={theme.textSecondary} />\n                    )}\n                  </View>\n                  <View style={styles.cartItemDetails}>\n                    <ThemedText type=\"caption\" numberOfLines={1} style={{ fontWeight: \"500\" }}>\n                      {item.product.name}\n                    </ThemedText>\n                    <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n                      {item.quantity}x {formatPrice(item.product.price)}\n                    </ThemedText>\n                  </View>\n                  <ThemedText type=\"body\" style={{ fontWeight: \"600\", color: theme.primary }}>\n                    {formatPrice(item.product.price * item.quantity)}\n                  </ThemedText>\n                </View>\n              ))}\n            </Card>\n          </View>\n        ) : null}\n        \n        <View style={styles.section}>\n          <ThemedText type=\"h3\" style={styles.sectionTitle}>\n            {t.checkout.paymentMethod}\n          </ThemedText>\n          <View style={styles.paymentMethods}>\n            {availablePayments.map((method) => (\n              <Pressable\n                key={method.id}\n                style={[\n                  styles.paymentOption,\n                  { backgroundColor: theme.cardBackground },\n                  selectedPayment.id === method.id && {\n                    borderColor: theme.primary,\n                    borderWidth: 2,\n                  },\n                ]}\n                onPress={() => setSelectedPayment(method)}\n              >\n                <View style={[styles.paymentIcon, { backgroundColor: method.type === \"cod\" ? theme.success + \"20\" : theme.backgroundDefault }]}>\n                  <Feather name={method.icon as any} size={20} color={method.type === \"cod\" ? theme.success : theme.text} />\n                </View>\n                <View style={{ flex: 1 }}>\n                  <ThemedText type=\"body\">\n                    {method.name}\n                  </ThemedText>\n                  {method.type === \"cod\" ? (\n                    <ThemedText type=\"small\" style={{ color: theme.success }}>\n                      {t.home.payWhenDelivered}\n                    </ThemedText>\n                  ) : null}\n                </View>\n                {selectedPayment.id === method.id ? (\n                  <Feather name=\"check-circle\" size={20} color={theme.primary} />\n                ) : null}\n              </Pressable>\n            ))}\n          </View>\n        </View>\n        \n        <View style={styles.section}>\n          <ThemedText type=\"h3\" style={styles.sectionTitle}>\n            {t.checkout.orderSummary}\n          </ThemedText>\n          <Card>\n            <View style={styles.summaryRow}>\n              <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n                {t.checkout.subtotal} ({itemCount} {itemCount === 1 ? t.home.item : t.home.items})\n              </ThemedText>\n              <ThemedText type=\"body\">{formatPrice(subtotal)}</ThemedText>\n            </View>\n            <View style={styles.summaryRow}>\n              <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n                {t.checkout.deliveryFee}\n              </ThemedText>\n              <ThemedText type=\"body\">{formatPrice(deliveryFee)}</ThemedText>\n            </View>\n            <View style={[styles.summaryRow, styles.totalRow]}>\n              <ThemedText type=\"h3\">{t.checkout.total}</ThemedText>\n              <ThemedText type=\"h3\" style={{ color: theme.primary }}>\n                {formatPrice(total)}\n              </ThemedText>\n            </View>\n          </Card>\n        </View>\n      </ScrollView>\n      \n      <View\n        style={[\n          styles.footer,\n          {\n            backgroundColor: theme.backgroundRoot,\n            paddingBottom: insets.bottom + Spacing.lg,\n          },\n          Shadows.medium,\n        ]}\n      >\n        <View style={styles.footerContent}>\n          <View>\n            <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n              {t.home.totalPayment}\n            </ThemedText>\n            <ThemedText type=\"h2\" style={{ color: theme.primary }}>\n              {formatPrice(total)}\n            </ThemedText>\n          </View>\n          <Button\n            onPress={handlePlaceOrder}\n            style={styles.placeOrderButton}\n            disabled={orderMutation.isPending || items.length === 0}\n          >\n            {orderMutation.isPending ? t.checkout.processing : t.checkout.placeOrder}\n          </Button>\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  scrollContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  section: {\n    marginBottom: Spacing.xl,\n  },\n  sectionHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: Spacing.md,\n  },\n  sectionTitle: {\n    marginBottom: Spacing.md,\n  },\n  addressContent: {\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n  },\n  addressIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  addressDetails: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  deliveryBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.md,\n  },\n  badgeIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  paymentMethods: {\n    gap: Spacing.sm,\n  },\n  paymentOption: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: Spacing.md,\n    borderRadius: BorderRadius.sm,\n    gap: Spacing.md,\n  },\n  paymentIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  summaryRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginBottom: Spacing.sm,\n  },\n  totalRow: {\n    marginTop: Spacing.sm,\n    paddingTop: Spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: \"#E0E0E0\",\n    marginBottom: 0,\n  },\n  footer: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    paddingTop: Spacing.lg,\n    paddingHorizontal: Spacing.lg,\n  },\n  footerContent: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n  placeOrderButton: {\n    flex: 1,\n    marginLeft: Spacing.xl,\n  },\n  cartItemRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingVertical: Spacing.sm,\n  },\n  cartItemBorder: {\n    borderBottomWidth: 1,\n    borderBottomColor: \"#E0E0E0\",\n  },\n  cartItemImage: {\n    width: 44,\n    height: 44,\n    borderRadius: BorderRadius.xs,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    overflow: \"hidden\",\n  },\n  cartItemImageContent: {\n    width: \"100%\",\n    height: \"100%\",\n    resizeMode: \"cover\",\n  },\n  cartItemDetails: {\n    flex: 1,\n    marginLeft: Spacing.md,\n    marginRight: Spacing.sm,\n  },\n});\n","path":null,"size_bytes":14575,"size_tokens":null},"client/components/KeyboardAwareScrollViewCompat.tsx":{"content":"import { Platform, ScrollView, ScrollViewProps } from \"react-native\";\nimport {\n  KeyboardAwareScrollView,\n  KeyboardAwareScrollViewProps,\n} from \"react-native-keyboard-controller\";\n\ntype Props = KeyboardAwareScrollViewProps & ScrollViewProps;\n\n/**\n * KeyboardAwareScrollView that falls back to ScrollView on web.\n * Use this for any screen containing text inputs.\n */\nexport function KeyboardAwareScrollViewCompat({\n  children,\n  keyboardShouldPersistTaps = \"handled\",\n  ...props\n}: Props) {\n  if (Platform.OS === \"web\") {\n    return (\n      <ScrollView\n        keyboardShouldPersistTaps={keyboardShouldPersistTaps}\n        {...props}\n      >\n        {children}\n      </ScrollView>\n    );\n  }\n\n  return (\n    <KeyboardAwareScrollView\n      keyboardShouldPersistTaps={keyboardShouldPersistTaps}\n      {...props}\n    >\n      {children}\n    </KeyboardAwareScrollView>\n  );\n}\n","path":null,"size_bytes":872,"size_tokens":null},"client/hooks/useColorScheme.web.ts":{"content":"import { useEffect, useState } from \"react\";\nimport { useColorScheme as useRNColorScheme } from \"react-native\";\n\n/**\n * To support static rendering, this value needs to be re-calculated on the client side for web\n */\nexport function useColorScheme() {\n  const [hasHydrated, setHasHydrated] = useState(false);\n\n  useEffect(() => {\n    setHasHydrated(true);\n  }, []);\n\n  const colorScheme = useRNColorScheme();\n\n  if (hasHydrated) {\n    return colorScheme;\n  }\n\n  return \"light\";\n}\n","path":null,"size_bytes":480,"size_tokens":null},"client/screens/VouchersScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, FlatList } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\nimport { Voucher } from \"@/types\";\nimport { mockVouchers } from \"@/data/mockData\";\n\nexport default function VouchersScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString(\"id-ID\", {\n      day: \"numeric\",\n      month: \"short\",\n      year: \"numeric\",\n    });\n  };\n\n  const formatDiscount = (voucher: Voucher) => {\n    if (voucher.discountType === \"percentage\") {\n      return `${voucher.discount}% OFF`;\n    }\n    return `Rp ${voucher.discount.toLocaleString(\"id-ID\")}`;\n  };\n\n  const renderVoucher = ({ item }: { item: Voucher }) => (\n    <Card style={styles.voucherCard}>\n      <View style={styles.voucherContent}>\n        <View style={[styles.voucherBadge, { backgroundColor: theme.primary }]}>\n          <Feather name=\"tag\" size={24} color={theme.buttonText} />\n        </View>\n        <View style={styles.voucherDetails}>\n          <ThemedText type=\"h3\" style={{ color: theme.primary }}>\n            {formatDiscount(item)}\n          </ThemedText>\n          <ThemedText type=\"body\" style={{ marginVertical: Spacing.xs }}>\n            {item.description}\n          </ThemedText>\n          <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n            Min. order Rp {item.minOrder.toLocaleString(\"id-ID\")}\n          </ThemedText>\n          <View style={styles.voucherFooter}>\n            <View style={[styles.codeContainer, { backgroundColor: theme.backgroundDefault }]}>\n              <ThemedText type=\"caption\" style={{ fontWeight: \"600\" }}>\n                {item.code}\n              </ThemedText>\n            </View>\n            <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n              Valid until {formatDate(item.validUntil)}\n            </ThemedText>\n          </View>\n        </View>\n      </View>\n    </Card>\n  );\n\n  return (\n    <View style={{ flex: 1, backgroundColor: theme.backgroundRoot }}>\n      <FlatList\n        data={mockVouchers}\n        renderItem={renderVoucher}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={[\n          styles.listContent,\n          {\n            paddingTop: headerHeight + Spacing.lg,\n            paddingBottom: insets.bottom + Spacing.xl,\n          },\n        ]}\n        showsVerticalScrollIndicator={false}\n        ListEmptyComponent={\n          <View style={styles.emptyState}>\n            <Feather name=\"tag\" size={48} color={theme.textSecondary} />\n            <ThemedText type=\"body\" style={{ color: theme.textSecondary, marginTop: Spacing.md }}>\n              No vouchers available\n            </ThemedText>\n          </View>\n        }\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  listContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  voucherCard: {\n    marginBottom: Spacing.md,\n  },\n  voucherContent: {\n    flexDirection: \"row\",\n  },\n  voucherBadge: {\n    width: 56,\n    height: 56,\n    borderRadius: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  voucherDetails: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  voucherFooter: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    marginTop: Spacing.md,\n  },\n  codeContainer: {\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n  },\n  emptyState: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingVertical: Spacing.xxl * 2,\n  },\n});\n","path":null,"size_bytes":3958,"size_tokens":null},"client/types/index.ts":{"content":"export interface Product {\n  id: string;\n  name: string;\n  brand: string;\n  price: number;\n  originalPrice?: number;\n  image: string;\n  category: string;\n  description: string;\n  nutrition?: {\n    calories: string;\n    protein: string;\n    carbs: string;\n    fat: string;\n  };\n  inStock: boolean;\n  stockCount: number;\n}\n\nexport interface Category {\n  id: string;\n  name: string;\n  icon: string;\n  color: string;\n  image?: string;\n}\n\nexport interface CartItem {\n  product: Product;\n  quantity: number;\n}\n\nexport interface Address {\n  id: string;\n  label: string;\n  fullAddress: string;\n  details?: string;\n  isDefault: boolean;\n}\n\nexport interface PaymentMethod {\n  id: string;\n  name: string;\n  icon: string;\n  type: \"ewallet\" | \"bank\" | \"card\";\n}\n\nexport interface Order {\n  id: string;\n  items: CartItem[];\n  status: \"pending\" | \"preparing\" | \"on_the_way\" | \"delivered\";\n  total: number;\n  deliveryFee: number;\n  address: Address;\n  paymentMethod: PaymentMethod;\n  createdAt: Date;\n  estimatedDelivery: Date;\n  rider?: Rider;\n}\n\nexport interface Rider {\n  id: string;\n  name: string;\n  phone: string;\n  photo: string;\n  rating: number;\n  vehicleNumber: string;\n}\n\nexport interface Voucher {\n  id: string;\n  code: string;\n  discount: number;\n  discountType: \"percentage\" | \"fixed\";\n  minOrder: number;\n  validUntil: Date;\n  description: string;\n}\n\nexport interface User {\n  id: string;\n  name: string;\n  phone: string;\n  email?: string;\n  avatar?: string;\n  addresses: Address[];\n}\n","path":null,"size_bytes":1484,"size_tokens":null},"client/hooks/useScreenOptions.ts":{"content":"import { Platform } from \"react-native\";\nimport { NativeStackNavigationOptions } from \"@react-navigation/native-stack\";\nimport { isLiquidGlassAvailable } from \"expo-glass-effect\";\n\nimport { useTheme } from \"@/hooks/useTheme\";\n\ninterface UseScreenOptionsParams {\n  transparent?: boolean;\n}\n\nexport function useScreenOptions({\n  transparent = true,\n}: UseScreenOptionsParams = {}): NativeStackNavigationOptions {\n  const { theme, isDark } = useTheme();\n\n  return {\n    headerTitleAlign: \"center\",\n    headerTransparent: transparent,\n    headerBlurEffect: isDark ? \"dark\" : \"light\",\n    headerTintColor: theme.text,\n    headerStyle: {\n      backgroundColor: Platform.select({\n        ios: undefined,\n        android: theme.backgroundRoot,\n        web: theme.backgroundRoot,\n      }),\n    },\n    gestureEnabled: true,\n    gestureDirection: \"horizontal\",\n    fullScreenGestureEnabled: isLiquidGlassAvailable() ? false : true,\n    contentStyle: {\n      backgroundColor: theme.backgroundRoot,\n    },\n  };\n}\n","path":null,"size_bytes":1000,"size_tokens":null},"eslint.config.js":{"content":"// https://docs.expo.dev/guides/using-eslint/\nconst { defineConfig } = require(\"eslint/config\");\nconst expoConfig = require(\"eslint-config-expo/flat\");\nconst eslintPluginPrettierRecommended = require(\"eslint-plugin-prettier/recommended\");\n\nmodule.exports = defineConfig([\n  expoConfig,\n  eslintPluginPrettierRecommended,\n  {\n    ignores: [\"dist/*\"],\n  },\n]);\n","path":null,"size_bytes":359,"size_tokens":null},"server/storage.ts":{"content":"import { db } from \"./db\";\nimport { eq, and, sql } from \"drizzle-orm\";\nimport {\n  users,\n  categories,\n  products,\n  addresses,\n  cartItems,\n  orders,\n  vouchers,\n  stores,\n  storeStaff,\n  storeInventory,\n  type User,\n  type InsertUser,\n  type Category,\n  type InsertCategory,\n  type Product,\n  type InsertProduct,\n  type Address,\n  type InsertAddress,\n  type CartItem,\n  type InsertCartItem,\n  type Order,\n  type InsertOrder,\n  type Voucher,\n  type InsertVoucher,\n  type Store,\n  type InsertStore,\n  type StoreStaff,\n  type InsertStoreStaff,\n  type StoreInventory,\n  type InsertStoreInventory,\n} from \"@shared/schema\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  getUsersByRole(role: string): Promise<User[]>;\n  \n  getCategories(): Promise<Category[]>;\n  getCategoryById(id: string): Promise<Category | undefined>;\n  createCategory(category: InsertCategory): Promise<Category>;\n  \n  getProducts(): Promise<Product[]>;\n  getProductById(id: string): Promise<Product | undefined>;\n  getProductsByCategory(categoryId: string): Promise<Product[]>;\n  createProduct(product: InsertProduct): Promise<Product>;\n  \n  getAddressesByUserId(userId: string): Promise<Address[]>;\n  createAddress(address: InsertAddress): Promise<Address>;\n  \n  getCartItems(userId: string): Promise<CartItem[]>;\n  addToCart(item: InsertCartItem): Promise<CartItem>;\n  updateCartItemQuantity(id: string, quantity: number): Promise<CartItem | undefined>;\n  removeFromCart(id: string): Promise<void>;\n  clearCart(userId: string): Promise<void>;\n  \n  getOrders(userId: string): Promise<Order[]>;\n  getOrderById(id: string): Promise<Order | undefined>;\n  createOrder(order: InsertOrder): Promise<Order>;\n  updateOrderStatus(id: string, status: string): Promise<Order | undefined>;\n  getAllOrders(): Promise<Order[]>;\n  getOrdersByStore(storeId: string): Promise<Order[]>;\n  assignPickerToOrder(orderId: string, pickerId: string): Promise<Order | undefined>;\n  assignDriverToOrder(orderId: string, driverId: string): Promise<Order | undefined>;\n  \n  getVouchers(): Promise<Voucher[]>;\n  getVoucherByCode(code: string): Promise<Voucher | undefined>;\n  \n  // Store methods\n  getStores(): Promise<Store[]>;\n  getStoreById(id: string): Promise<Store | undefined>;\n  createStore(store: InsertStore): Promise<Store>;\n  \n  // Store Staff methods\n  getStoreStaff(storeId: string): Promise<StoreStaff[]>;\n  getStoreStaffByUserId(userId: string): Promise<StoreStaff | undefined>;\n  createStoreStaff(staff: InsertStoreStaff): Promise<StoreStaff>;\n  updateStaffStatus(userId: string, status: string): Promise<StoreStaff | undefined>;\n  getOnlineStaffByStore(storeId: string): Promise<{ pickers: StoreStaff[]; drivers: StoreStaff[] }>;\n  \n  // Store Inventory methods\n  getStoreInventory(storeId: string): Promise<StoreInventory[]>;\n  getStoreInventoryWithProducts(storeId: string): Promise<(StoreInventory & { product: Product })[]>;\n  createStoreInventory(inventory: InsertStoreInventory): Promise<StoreInventory>;\n  updateStoreInventory(id: string, stockCount: number, isAvailable: boolean): Promise<StoreInventory | undefined>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id));\n    return result[0];\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.username, username));\n    return result[0];\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const result = await db.insert(users).values(insertUser).returning();\n    return result[0];\n  }\n\n  async getCategories(): Promise<Category[]> {\n    return db.select().from(categories);\n  }\n\n  async getCategoryById(id: string): Promise<Category | undefined> {\n    const result = await db.select().from(categories).where(eq(categories.id, id));\n    return result[0];\n  }\n\n  async createCategory(category: InsertCategory): Promise<Category> {\n    const result = await db.insert(categories).values(category).returning();\n    return result[0];\n  }\n\n  async getProducts(): Promise<Product[]> {\n    return db.select().from(products);\n  }\n\n  async getProductById(id: string): Promise<Product | undefined> {\n    const result = await db.select().from(products).where(eq(products.id, id));\n    return result[0];\n  }\n\n  async getProductsByCategory(categoryId: string): Promise<Product[]> {\n    return db.select().from(products).where(eq(products.categoryId, categoryId));\n  }\n\n  async createProduct(product: InsertProduct): Promise<Product> {\n    const result = await db.insert(products).values(product).returning();\n    return result[0];\n  }\n\n  async getAddressesByUserId(userId: string): Promise<Address[]> {\n    return db.select().from(addresses).where(eq(addresses.userId, userId));\n  }\n\n  async createAddress(address: InsertAddress): Promise<Address> {\n    const result = await db.insert(addresses).values(address).returning();\n    return result[0];\n  }\n\n  async getCartItems(userId: string): Promise<CartItem[]> {\n    return db.select().from(cartItems).where(eq(cartItems.userId, userId));\n  }\n\n  async addToCart(item: InsertCartItem): Promise<CartItem> {\n    const existing = await db.select().from(cartItems)\n      .where(and(eq(cartItems.userId, item.userId), eq(cartItems.productId, item.productId)));\n    \n    if (existing.length > 0) {\n      const updated = await db.update(cartItems)\n        .set({ quantity: existing[0].quantity + (item.quantity || 1) })\n        .where(eq(cartItems.id, existing[0].id))\n        .returning();\n      return updated[0];\n    }\n    \n    const result = await db.insert(cartItems).values(item).returning();\n    return result[0];\n  }\n\n  async updateCartItemQuantity(id: string, quantity: number): Promise<CartItem | undefined> {\n    const result = await db.update(cartItems)\n      .set({ quantity })\n      .where(eq(cartItems.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async removeFromCart(id: string): Promise<void> {\n    await db.delete(cartItems).where(eq(cartItems.id, id));\n  }\n\n  async clearCart(userId: string): Promise<void> {\n    await db.delete(cartItems).where(eq(cartItems.userId, userId));\n  }\n\n  async getOrders(userId: string): Promise<Order[]> {\n    return db.select().from(orders).where(eq(orders.userId, userId));\n  }\n\n  async getOrderById(id: string): Promise<Order | undefined> {\n    const result = await db.select().from(orders).where(eq(orders.id, id));\n    return result[0];\n  }\n\n  async createOrder(order: InsertOrder): Promise<Order> {\n    const result = await db.insert(orders).values(order).returning();\n    return result[0];\n  }\n\n  async updateOrderStatus(id: string, status: string): Promise<Order | undefined> {\n    const result = await db.update(orders)\n      .set({ status })\n      .where(eq(orders.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async getVouchers(): Promise<Voucher[]> {\n    return db.select().from(vouchers);\n  }\n\n  async getVoucherByCode(code: string): Promise<Voucher | undefined> {\n    const result = await db.select().from(vouchers).where(eq(vouchers.code, code));\n    return result[0];\n  }\n\n  async getUsersByRole(role: string): Promise<User[]> {\n    return db.select().from(users).where(eq(users.role, role));\n  }\n\n  async getAllOrders(): Promise<Order[]> {\n    return db.select().from(orders);\n  }\n\n  async getOrdersByStore(storeId: string): Promise<Order[]> {\n    return db.select().from(orders).where(eq(orders.storeId, storeId));\n  }\n\n  async assignPickerToOrder(orderId: string, pickerId: string): Promise<Order | undefined> {\n    const result = await db.update(orders)\n      .set({ pickerId, status: \"picking\", pickedAt: new Date() })\n      .where(eq(orders.id, orderId))\n      .returning();\n    return result[0];\n  }\n\n  async assignDriverToOrder(orderId: string, driverId: string): Promise<Order | undefined> {\n    const result = await db.update(orders)\n      .set({ driverId, status: \"delivering\" })\n      .where(eq(orders.id, orderId))\n      .returning();\n    return result[0];\n  }\n\n  // Store methods\n  async getStores(): Promise<Store[]> {\n    return db.select().from(stores).where(eq(stores.isActive, true));\n  }\n\n  async getStoreById(id: string): Promise<Store | undefined> {\n    const result = await db.select().from(stores).where(eq(stores.id, id));\n    return result[0];\n  }\n\n  async createStore(store: InsertStore): Promise<Store> {\n    const result = await db.insert(stores).values(store).returning();\n    return result[0];\n  }\n\n  // Store Staff methods\n  async getStoreStaff(storeId: string): Promise<StoreStaff[]> {\n    return db.select().from(storeStaff).where(eq(storeStaff.storeId, storeId));\n  }\n\n  async getStoreStaffByUserId(userId: string): Promise<StoreStaff | undefined> {\n    const result = await db.select().from(storeStaff).where(eq(storeStaff.userId, userId));\n    return result[0];\n  }\n\n  async createStoreStaff(staff: InsertStoreStaff): Promise<StoreStaff> {\n    const result = await db.insert(storeStaff).values(staff).returning();\n    return result[0];\n  }\n\n  async updateStaffStatus(userId: string, status: string): Promise<StoreStaff | undefined> {\n    const result = await db.update(storeStaff)\n      .set({ status, lastStatusChange: new Date() })\n      .where(eq(storeStaff.userId, userId))\n      .returning();\n    return result[0];\n  }\n\n  async getOnlineStaffByStore(storeId: string): Promise<{ pickers: StoreStaff[]; drivers: StoreStaff[] }> {\n    const staff = await db.select().from(storeStaff)\n      .where(and(eq(storeStaff.storeId, storeId), eq(storeStaff.status, \"online\")));\n    \n    const pickers = staff.filter(s => s.role === \"picker\");\n    const drivers = staff.filter(s => s.role === \"driver\");\n    \n    return { pickers, drivers };\n  }\n\n  // Store Inventory methods\n  async getStoreInventory(storeId: string): Promise<StoreInventory[]> {\n    return db.select().from(storeInventory).where(eq(storeInventory.storeId, storeId));\n  }\n\n  async getStoreInventoryWithProducts(storeId: string): Promise<(StoreInventory & { product: Product })[]> {\n    const inventory = await db.select().from(storeInventory)\n      .where(and(eq(storeInventory.storeId, storeId), eq(storeInventory.isAvailable, true)));\n    \n    const result = await Promise.all(\n      inventory.map(async (inv) => {\n        const product = await this.getProductById(inv.productId);\n        return { ...inv, product: product! };\n      })\n    );\n    \n    return result.filter(r => r.product);\n  }\n\n  async createStoreInventory(inventory: InsertStoreInventory): Promise<StoreInventory> {\n    const result = await db.insert(storeInventory).values(inventory).returning();\n    return result[0];\n  }\n\n  async updateStoreInventory(id: string, stockCount: number, isAvailable: boolean): Promise<StoreInventory | undefined> {\n    const result = await db.update(storeInventory)\n      .set({ stockCount, isAvailable })\n      .where(eq(storeInventory.id, id))\n      .returning();\n    return result[0];\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":11161,"size_tokens":null},"babel.config.js":{"content":"module.exports = function (api) {\n  api.cache(true);\n  return {\n    presets: [\"babel-preset-expo\"],\n    plugins: [\n      [\n        \"module-resolver\",\n        {\n          root: [\"./\"],\n          alias: {\n            \"@\": \"./client\",\n            \"@shared\": \"./shared\",\n          },\n          extensions: [\".ios.js\", \".android.js\", \".js\", \".ts\", \".tsx\", \".json\"],\n        },\n      ],\n      \"react-native-reanimated/plugin\",\n    ],\n  };\n};\n","path":null,"size_bytes":436,"size_tokens":null},"design_guidelines.md":{"content":"# KilatGo Design Guidelines (Compacted)\n\n## Project Overview\n**KilatGo** is a 15-minute grocery delivery app for Indonesia. Design should be ultra-simple, clean, friendly, and fast—inspired by GoJek/Tokopedia with a lightning-fast aesthetic.\n\n## Core Architecture\n\n### Authentication\n- **Required**: Phone OTP (primary), Apple/Google Sign-In (secondary)\n- **MVP**: Mock auth flow with local state\n- **Account Screen**: Profile (editable name/phone), logout (confirmation), delete account (Settings > Account > Delete, double confirmation)\n- Include privacy policy & terms of service placeholder links\n\n### Navigation\n**4-Tab Layout + Floating Action Button:**\n1. Home - Main shopping\n2. Orders - Order history\n3. Voice Order - Center-bottom FAB (⚡ lightning bolt, visible across tabs)\n4. Account - Profile & settings\n\n## Screen Specifications\n\n### Onboarding Flow (Stack)\n**Welcome Screen**\n- Full-screen lightning animation (⚡ yellow), hero illustration, tagline, \"Get Started\" CTA\n- Safe area: Top/Bottom: `insets + Spacing.xl`\n\n**Location Permission**\n- Centered: icon, description, \"Allow Location\" button, \"Enter Manually\" link\n\n**Phone Signup**\n- Header: Back button, transparent\n- Form: Phone input, country code (+62), \"Send OTP\" button, SSO options\n- Safe area: Top: `headerHeight + Spacing.xl`, Bottom: `insets.bottom + Spacing.xl`\n\n### Home Screen (Tab 1)\n**Header:** Custom transparent with search bar + voice button (mic icon), location badge (right)\n**Content:** Scrollable feed\n- 15-min delivery badge (⚡)\n- Category grid (2×4): Milk, Eggs, Snacks, Fruits, Frozen, Drinks, Vegetables, Meat\n- Promotions carousel\n- \"Reorder\" section (horizontal scroll)\n- Product recommendations grid\n**Safe area:** Top: `headerHeight + Spacing.xl`, Bottom: `tabBarHeight + Spacing.xl`\n\n### Voice Ordering Flow (Modal)\n**Voice Input Modal (80% screen)**\n- Large circular mic button (center, pulsing when active)\n- \"Tap to speak\"/\"Listening...\" text\n- Waveform visualization, real-time text\n- Buttons: Cancel (top-left), Done (top-right)\n\n**Voice Confirmation Screen**\n- Header: \"Confirm Your Order\", close button\n- List: Detected items with quantities, edit/remove buttons, suggested alternatives\n- Sticky \"Add to Cart\" button (bottom)\n\n### Category & Product Browsing (Stack)\n**Category List**\n- Header: Category name, back button, search icon\n- 2-column product grid: image, name, price (IDR), add button (+)\n\n**Product Detail**\n- Transparent header: back, share buttons\n- Content: Large image (40% screen), name, brand, price, quantity selector (−/+), collapsible nutrition info\n- Sticky \"Add to Cart\" button\n\n### Cart & Checkout Flow (Stack)\n**Cart Screen**\n- Header: \"Your Cart\", back, clear cart icon\n- Content: Item list (image, name, price, quantity controls), replacement suggestions, price breakdown\n- Sticky footer: \"Proceed to Checkout\"\n\n**Checkout Screen**\n- Sections: Delivery address (editable), delivery time (15-min badge), payment method (Midtrans: GoPay, OVO, ShopeePay, DANA, BCA VA, Credit Card), order summary\n- Bottom: \"Place Order\" button\n\n**Order Success**\n- Centered: ⚡ animation, order number, estimated time, \"Track Order\" button, \"Back to Home\" link\n\n### Live Tracking (Stack)\n**Order Tracking**\n- Map (60%): Mocked rider location (animated), user/store pins, route polyline\n- Bottom panel (40%): Status, rider info (name, photo, phone), estimated time\n- Floating \"Call Rider\" button (shadow: `{width: 0, height: 2}, opacity: 0.10, radius: 2`)\n\n**Delivery Complete (Modal)**\n- Success icon (⚡), \"Delivered!\", rider rating (5-star), optional tip, \"Done\" button\n\n### Orders Screen (Tab 2)\n- Header: \"My Orders\", search icon\n- Tabs: Active/Completed\n- Order cards: number, date, items preview, status, total\n\n### Account Screen (Tab 4)\n- Profile: avatar, name, phone, edit button\n- Menu: Saved Addresses, Payment Methods, Vouchers, Help Center, Settings (theme, notifications, language), About, Log Out\n\n## Design System\n\n### Colors\n**Primary:** Lightning Yellow `#FFD700` (CTAs, highlights), Fresh Blue `#4A90E2` (links, info), Clean White `#FFFFFF`, Soft Gray `#F5F5F5`\n**Supporting:** Success Green `#4CAF50`, Alert Orange `#FF9800`, Error Red `#F44336`, Text Dark `#2C3E50`, Text Gray `#7F8C8D`\n\n### Typography (System: SF Pro/Roboto)\n- H1: 28px SemiBold | H2: 22px SemiBold | H3: 18px Medium\n- Body: 16px Regular | Caption: 14px Regular | Button: 16px SemiBold\n\n### Icons\n**Feather icons** (@expo/vector-icons): home, shopping-bag, user, settings, search, mic, plus-circle, trash-2, edit-3, check-circle, clock, map-pin, truck, phone, message-circle\n**Custom assets:** Lightning bolt (⚡, various sizes), category icons (8): milk carton, eggs, snack bag, fruit basket, frozen box, drink bottle, vegetables, meat\n\n### Components\n\n**Buttons**\n- Primary: Yellow bg, Text Dark, rounded 12px, height 52px\n- Secondary: White bg, Blue text, 1px Blue border, rounded 12px, height 52px\n- Text: No bg, Blue text, underline on press\n- FAB (Voice): Yellow, diameter 64px, ⚡ icon, shadow as tracking button\n- **Feedback:** Opacity 0.7 on press (all), scale 0.98 (primary buttons)\n\n**Inputs**\n- Height 52px, border 1px Soft Gray, rounded 12px, padding 16px horizontal\n- Focus: 1px Fresh Blue\n\n**Cards**\n- White bg, rounded 16px, padding 16px\n- **NO shadows** (flat design) except elevated/floating elements\n\n**Category Icons**\n- 64×64px, Soft Gray rounded square bg, 32×32px icon centered, Caption label below\n\n**Spacing:** xs: 4px | sm: 8px | md: 12px | lg: 16px | xl: 24px | xxl: 32px\n\n### Visual Style\n- **Corners:** 16-20px (cards/modals), 12px (buttons/inputs)\n- **Shadows:** Minimal, only floating elements (FAB, sticky CTAs)\n- **Contrast:** High for icons/text readability\n- **Whitespace:** Generous, not crowded\n- **Lightning animations:** Loading, success, tracking states\n- **NO emoji in UI** (use generated icons)\n\n### Accessibility\n- Touch target: 44×44px minimum\n- Text contrast: 4.5:1 minimum\n- Voice button: 64px, always visible, high contrast\n- Error states: Color + icon + text\n- Form validation: Real-time with clear messaging\n\n### Assets to Generate\n1. Logo: ⚡ + shopping bag + K\n2. Category icons (8, culturally appropriate)\n3. Onboarding illustration (Indonesian homestyle)\n4. Success animation (⚡ with sparkles)\n5. Empty states (cart, orders, addresses - friendly)\n\n**Style:** Warm, friendly, Indonesian aesthetic; avoid corporate/western design\n\n## Admin Dashboard (Web)\n\n**Layout:** Sidebar (240px, collapsible) + main content + top bar (logo, admin name, notifications)\n\n**Screens:**\n1. Dashboard: Today's orders, live map, top items chart\n2. Orders: Table with filters, search, detail modal\n3. Inventory: Product table (add/edit/delete), stock levels, alerts, categories\n4. Voice Analytics: Accuracy chart, common phrases, misheard words\n\n**Colors:** Same brand palette, data visualization emphasis, professional tone\n\n---\n\n**Safe Area Pattern:**\n- Onboarding/Success: `insets.top/bottom + Spacing.xl`\n- Screens with header + tabs: Top: `headerHeight + Spacing.xl`, Bottom: `tabBarHeight + Spacing.xl`\n- Stack screens: Top: `headerHeight + Spacing.xl`, Bottom: `insets.bottom + Spacing.xl`\n- Modals: `Spacing.xl` all sides from modal edges","path":null,"size_bytes":7204,"size_tokens":null},"client/data/mockData.ts":{"content":"import { Category, Product, Order, PaymentMethod, Address, Voucher, Rider } from \"@/types\";\n\nexport const mockCategories: Category[] = [\n  { id: \"1\", name: \"Milk\", icon: \"droplet\", color: \"#4A90E2\" },\n  { id: \"2\", name: \"Eggs\", icon: \"circle\", color: \"#FF9800\" },\n  { id: \"3\", name: \"Snacks\", icon: \"box\", color: \"#9C27B0\" },\n  { id: \"4\", name: \"Fruits\", icon: \"sun\", color: \"#4CAF50\" },\n  { id: \"5\", name: \"Frozen\", icon: \"thermometer\", color: \"#00BCD4\" },\n  { id: \"6\", name: \"Drinks\", icon: \"coffee\", color: \"#F44336\" },\n  { id: \"7\", name: \"Veggies\", icon: \"feather\", color: \"#8BC34A\" },\n  { id: \"8\", name: \"Meat\", icon: \"target\", color: \"#E91E63\" },\n];\n\nexport const mockProducts: Product[] = [\n  {\n    id: \"1\",\n    name: \"Fresh Full Cream Milk\",\n    brand: \"Ultra Milk\",\n    price: 18500,\n    originalPrice: 22000,\n    image: \"\",\n    category: \"1\",\n    description: \"Fresh pasteurized full cream milk, rich in calcium and vitamin D.\",\n    nutrition: { calories: \"120 kcal\", protein: \"8g\", carbs: \"12g\", fat: \"5g\" },\n    inStock: true,\n    stockCount: 50,\n  },\n  {\n    id: \"2\",\n    name: \"Organic Free Range Eggs\",\n    brand: \"Happy Farm\",\n    price: 32000,\n    image: \"\",\n    category: \"2\",\n    description: \"Premium organic eggs from free-range hens.\",\n    nutrition: { calories: \"70 kcal\", protein: \"6g\", carbs: \"0.5g\", fat: \"5g\" },\n    inStock: true,\n    stockCount: 30,\n  },\n  {\n    id: \"3\",\n    name: \"Potato Chips Original\",\n    brand: \"Chitato\",\n    price: 15000,\n    image: \"\",\n    category: \"3\",\n    description: \"Crispy potato chips with original flavor.\",\n    inStock: true,\n    stockCount: 100,\n  },\n  {\n    id: \"4\",\n    name: \"Fresh Banana\",\n    brand: \"Local Farm\",\n    price: 8000,\n    image: \"\",\n    category: \"4\",\n    description: \"Sweet and ripe bananas, perfect for snacking.\",\n    inStock: true,\n    stockCount: 45,\n  },\n  {\n    id: \"5\",\n    name: \"Frozen Chicken Nuggets\",\n    brand: \"Fiesta\",\n    price: 45000,\n    originalPrice: 52000,\n    image: \"\",\n    category: \"5\",\n    description: \"Crispy chicken nuggets, ready to fry.\",\n    inStock: true,\n    stockCount: 25,\n  },\n  {\n    id: \"6\",\n    name: \"Mineral Water 1.5L\",\n    brand: \"Aqua\",\n    price: 5500,\n    image: \"\",\n    category: \"6\",\n    description: \"Pure mineral water from natural springs.\",\n    inStock: true,\n    stockCount: 200,\n  },\n  {\n    id: \"7\",\n    name: \"Fresh Spinach\",\n    brand: \"Organic Green\",\n    price: 12000,\n    image: \"\",\n    category: \"7\",\n    description: \"Fresh organic spinach, washed and ready to cook.\",\n    inStock: true,\n    stockCount: 20,\n  },\n  {\n    id: \"8\",\n    name: \"Beef Rendang Ready\",\n    brand: \"Kokita\",\n    price: 35000,\n    image: \"\",\n    category: \"8\",\n    description: \"Ready-to-eat beef rendang with authentic Indonesian taste.\",\n    inStock: false,\n    stockCount: 0,\n  },\n];\n\nexport const mockPromotions = [\n  { title: \"50% OFF\", subtitle: \"First Order\", color: \"#FF6B6B\" },\n  { title: \"Free Delivery\", subtitle: \"Min. Rp50k\", color: \"#4A90E2\" },\n  { title: \"Buy 2 Get 1\", subtitle: \"Selected Items\", color: \"#9C27B0\" },\n];\n\nexport const mockPaymentMethods: PaymentMethod[] = [\n  { id: \"1\", name: \"GoPay\", icon: \"credit-card\", type: \"ewallet\" },\n  { id: \"2\", name: \"OVO\", icon: \"credit-card\", type: \"ewallet\" },\n  { id: \"3\", name: \"ShopeePay\", icon: \"credit-card\", type: \"ewallet\" },\n  { id: \"4\", name: \"DANA\", icon: \"credit-card\", type: \"ewallet\" },\n  { id: \"5\", name: \"BCA Virtual Account\", icon: \"briefcase\", type: \"bank\" },\n  { id: \"6\", name: \"Credit Card\", icon: \"credit-card\", type: \"card\" },\n];\n\nexport const mockAddresses: Address[] = [\n  {\n    id: \"1\",\n    label: \"Home\",\n    fullAddress: \"Jl. Sudirman No. 123, Jakarta Selatan\",\n    details: \"Apartment Tower A, Unit 15B\",\n    isDefault: true,\n  },\n  {\n    id: \"2\",\n    label: \"Office\",\n    fullAddress: \"Jl. Gatot Subroto Kav. 45, Jakarta Selatan\",\n    details: \"Gedung Graha 5th Floor\",\n    isDefault: false,\n  },\n];\n\nexport const mockRider: Rider = {\n  id: \"1\",\n  name: \"Budi Santoso\",\n  phone: \"+62 812-3456-7890\",\n  photo: \"\",\n  rating: 4.8,\n  vehicleNumber: \"B 1234 ABC\",\n};\n\nexport const mockVouchers: Voucher[] = [\n  {\n    id: \"1\",\n    code: \"NEWUSER50\",\n    discount: 50,\n    discountType: \"percentage\",\n    minOrder: 50000,\n    validUntil: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n    description: \"50% off for new users\",\n  },\n  {\n    id: \"2\",\n    code: \"FREEDELIVERY\",\n    discount: 15000,\n    discountType: \"fixed\",\n    minOrder: 75000,\n    validUntil: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000),\n    description: \"Free delivery for orders above Rp75,000\",\n  },\n];\n\nexport const mockOrders: Order[] = [\n  {\n    id: \"KG-001234\",\n    items: [\n      { product: mockProducts[0], quantity: 2 },\n      { product: mockProducts[1], quantity: 1 },\n    ],\n    status: \"delivered\",\n    total: 69000,\n    deliveryFee: 10000,\n    address: mockAddresses[0],\n    paymentMethod: mockPaymentMethods[0],\n    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),\n    estimatedDelivery: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000 + 15 * 60 * 1000),\n    rider: mockRider,\n  },\n  {\n    id: \"KG-001235\",\n    items: [\n      { product: mockProducts[2], quantity: 3 },\n      { product: mockProducts[5], quantity: 2 },\n    ],\n    status: \"on_the_way\",\n    total: 56000,\n    deliveryFee: 10000,\n    address: mockAddresses[0],\n    paymentMethod: mockPaymentMethods[1],\n    createdAt: new Date(),\n    estimatedDelivery: new Date(Date.now() + 10 * 60 * 1000),\n    rider: mockRider,\n  },\n];\n","path":null,"size_bytes":5486,"size_tokens":null},"client/components/ThemedText.tsx":{"content":"import { Text, type TextProps } from \"react-native\";\n\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Typography } from \"@/constants/theme\";\n\nexport type ThemedTextProps = TextProps & {\n  lightColor?: string;\n  darkColor?: string;\n  type?: \"h1\" | \"h2\" | \"h3\" | \"body\" | \"caption\" | \"button\" | \"small\" | \"link\";\n};\n\nexport function ThemedText({\n  style,\n  lightColor,\n  darkColor,\n  type = \"body\",\n  ...rest\n}: ThemedTextProps) {\n  const { theme, isDark } = useTheme();\n\n  const getColor = () => {\n    if (isDark && darkColor) {\n      return darkColor;\n    }\n\n    if (!isDark && lightColor) {\n      return lightColor;\n    }\n\n    if (type === \"link\") {\n      return theme.link;\n    }\n\n    return theme.text;\n  };\n\n  const getTypeStyle = () => {\n    switch (type) {\n      case \"h1\":\n        return Typography.h1;\n      case \"h2\":\n        return Typography.h2;\n      case \"h3\":\n        return Typography.h3;\n      case \"body\":\n        return Typography.body;\n      case \"caption\":\n        return Typography.caption;\n      case \"button\":\n        return Typography.button;\n      case \"small\":\n        return Typography.small;\n      case \"link\":\n        return Typography.body;\n      default:\n        return Typography.body;\n    }\n  };\n\n  return (\n    <Text style={[{ color: getColor() }, getTypeStyle(), style]} {...rest} />\n  );\n}\n","path":null,"size_bytes":1332,"size_tokens":null},"client/components/ErrorBoundary.tsx":{"content":"import React, { Component, ComponentType, PropsWithChildren } from \"react\";\nimport { ErrorFallback, ErrorFallbackProps } from \"@/components/ErrorFallback\";\n\nexport type ErrorBoundaryProps = PropsWithChildren<{\n  FallbackComponent?: ComponentType<ErrorFallbackProps>;\n  onError?: (error: Error, stackTrace: string) => void;\n}>;\n\ntype ErrorBoundaryState = { error: Error | null };\n\n/**\n * This is a special case for for using the class components. Error boundaries must be class components because React only provides error boundary functionality through lifecycle methods (componentDidCatch and getDerivedStateFromError) which are not available in functional components.\n * https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary\n */\n\nexport class ErrorBoundary extends Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  state: ErrorBoundaryState = { error: null };\n\n  static defaultProps: {\n    FallbackComponent: ComponentType<ErrorFallbackProps>;\n  } = {\n    FallbackComponent: ErrorFallback,\n  };\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { error };\n  }\n\n  componentDidCatch(error: Error, info: { componentStack: string }): void {\n    if (typeof this.props.onError === \"function\") {\n      this.props.onError(error, info.componentStack);\n    }\n  }\n\n  resetError = (): void => {\n    this.setState({ error: null });\n  };\n\n  render() {\n    const { FallbackComponent } = this.props;\n\n    return this.state.error && FallbackComponent ? (\n      <FallbackComponent\n        error={this.state.error}\n        resetError={this.resetError}\n      />\n    ) : (\n      this.props.children\n    );\n  }\n}\n","path":null,"size_bytes":1674,"size_tokens":null},"client/components/Card.tsx":{"content":"import React from \"react\";\nimport { StyleSheet, Pressable, ViewStyle, View } from \"react-native\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  WithSpringConfig,\n} from \"react-native-reanimated\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius, Colors } from \"@/constants/theme\";\n\ninterface CardProps {\n  elevation?: number;\n  title?: string;\n  description?: string;\n  children?: React.ReactNode;\n  onPress?: () => void;\n  style?: ViewStyle;\n  interactive?: boolean;\n}\n\nconst springConfig: WithSpringConfig = {\n  damping: 15,\n  mass: 0.3,\n  stiffness: 150,\n  overshootClamping: true,\n  energyThreshold: 0.001,\n};\n\nconst getBackgroundColorForElevation = (\n  elevation: number,\n  theme: typeof Colors.light,\n): string => {\n  switch (elevation) {\n    case 0:\n      return theme.cardBackground;\n    case 1:\n      return theme.backgroundDefault;\n    case 2:\n      return theme.backgroundSecondary;\n    case 3:\n      return theme.backgroundTertiary;\n    default:\n      return theme.cardBackground;\n  }\n};\n\nconst AnimatedPressable = Animated.createAnimatedComponent(Pressable);\n\nexport function Card({\n  elevation = 0,\n  title,\n  description,\n  children,\n  onPress,\n  style,\n  interactive = true,\n}: CardProps) {\n  const { theme } = useTheme();\n  const scale = useSharedValue(1);\n\n  const cardBackgroundColor = getBackgroundColorForElevation(elevation, theme);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const handlePressIn = () => {\n    if (onPress && interactive) {\n      scale.value = withSpring(0.98, springConfig);\n    }\n  };\n\n  const handlePressOut = () => {\n    if (onPress && interactive) {\n      scale.value = withSpring(1, springConfig);\n    }\n  };\n\n  const content = (\n    <>\n      {title ? (\n        <ThemedText type=\"h3\" style={styles.cardTitle}>\n          {title}\n        </ThemedText>\n      ) : null}\n      {description ? (\n        <ThemedText type=\"caption\" style={styles.cardDescription}>\n          {description}\n        </ThemedText>\n      ) : null}\n      {children}\n    </>\n  );\n\n  if (onPress) {\n    return (\n      <AnimatedPressable\n        onPress={onPress}\n        onPressIn={handlePressIn}\n        onPressOut={handlePressOut}\n        style={[\n          styles.card,\n          {\n            backgroundColor: cardBackgroundColor,\n          },\n          animatedStyle,\n          style,\n        ]}\n      >\n        {content}\n      </AnimatedPressable>\n    );\n  }\n\n  return (\n    <View\n      style={[\n        styles.card,\n        {\n          backgroundColor: cardBackgroundColor,\n        },\n        style,\n      ]}\n    >\n      {content}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  card: {\n    padding: Spacing.lg,\n    borderRadius: BorderRadius.md,\n  },\n  cardTitle: {\n    marginBottom: Spacing.xs,\n  },\n  cardDescription: {\n    opacity: 0.7,\n  },\n});\n","path":null,"size_bytes":2945,"size_tokens":null},"client/components/HeaderTitle.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, Image } from \"react-native\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Spacing } from \"@/constants/theme\";\n\ninterface HeaderTitleProps {\n  title: string;\n}\n\nexport function HeaderTitle({ title }: HeaderTitleProps) {\n  return (\n    <View style={styles.container}>\n      <Image\n        source={require(\"../../assets/images/icon.png\")}\n        style={styles.icon}\n        resizeMode=\"contain\"\n      />\n      <ThemedText style={styles.title}>{title}</ThemedText>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\",\n  },\n  icon: {\n    width: 28,\n    height: 28,\n    marginRight: Spacing.sm,\n  },\n  title: {\n    fontSize: 17,\n    fontWeight: \"600\",\n  },\n});\n","path":null,"size_bytes":832,"size_tokens":null},"shared/schema.ts":{"content":"import { sql, relations } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, boolean, timestamp, jsonb, decimal } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// User roles enum\nexport const userRoles = [\"customer\", \"picker\", \"driver\", \"admin\"] as const;\nexport type UserRole = typeof userRoles[number];\n\n// Staff status enum\nexport const staffStatuses = [\"online\", \"offline\"] as const;\nexport type StaffStatus = typeof staffStatuses[number];\n\n// Order status enum for proper lifecycle tracking\nexport const orderStatuses = [\"pending\", \"confirmed\", \"picking\", \"packed\", \"delivering\", \"delivered\", \"cancelled\"] as const;\nexport type OrderStatus = typeof orderStatuses[number];\n\n// Payment method types\nexport const paymentMethodTypes = [\"midtrans\", \"cod\"] as const;\nexport type PaymentMethodType = typeof paymentMethodTypes[number];\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  phone: text(\"phone\"),\n  email: text(\"email\"),\n  appleId: text(\"apple_id\"),\n  googleId: text(\"google_id\"),\n  role: text(\"role\").notNull().default(\"customer\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const otpCodes = pgTable(\"otp_codes\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  phone: text(\"phone\").notNull(),\n  code: text(\"code\").notNull(),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  verified: boolean(\"verified\").default(false).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\n// Stores table\nexport const stores = pgTable(\"stores\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  address: text(\"address\").notNull(),\n  latitude: decimal(\"latitude\", { precision: 10, scale: 7 }).notNull(),\n  longitude: decimal(\"longitude\", { precision: 10, scale: 7 }).notNull(),\n  codAllowed: boolean(\"cod_allowed\").default(true).notNull(),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\n// Store staff assignment - links users (pickers/drivers) to stores\nexport const storeStaff = pgTable(\"store_staff\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  storeId: varchar(\"store_id\").notNull().references(() => stores.id),\n  role: text(\"role\").notNull(), // 'picker' or 'driver'\n  status: text(\"status\").notNull().default(\"offline\"), // 'online' or 'offline'\n  lastStatusChange: timestamp(\"last_status_change\").defaultNow().notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const categories = pgTable(\"categories\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  icon: text(\"icon\").notNull(),\n  color: text(\"color\").notNull(),\n  image: text(\"image\"),\n});\n\nexport const products = pgTable(\"products\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  brand: text(\"brand\").notNull(),\n  price: integer(\"price\").notNull(),\n  originalPrice: integer(\"original_price\"),\n  image: text(\"image\"),\n  categoryId: varchar(\"category_id\").notNull().references(() => categories.id),\n  description: text(\"description\"),\n  nutrition: jsonb(\"nutrition\"),\n  inStock: boolean(\"in_stock\").default(true).notNull(),\n  stockCount: integer(\"stock_count\").default(0).notNull(),\n});\n\nexport const addresses = pgTable(\"addresses\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  label: text(\"label\").notNull(),\n  fullAddress: text(\"full_address\").notNull(),\n  details: text(\"details\"),\n  isDefault: boolean(\"is_default\").default(false).notNull(),\n});\n\nexport const cartItems = pgTable(\"cart_items\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  quantity: integer(\"quantity\").notNull().default(1),\n});\n\nexport const orders = pgTable(\"orders\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  orderNumber: text(\"order_number\").notNull().unique(),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  storeId: varchar(\"store_id\").references(() => stores.id),\n  pickerId: varchar(\"picker_id\").references(() => users.id),\n  driverId: varchar(\"driver_id\").references(() => users.id),\n  items: jsonb(\"items\").notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  total: integer(\"total\").notNull(),\n  deliveryFee: integer(\"delivery_fee\").notNull().default(10000),\n  addressId: varchar(\"address_id\").references(() => addresses.id),\n  paymentMethod: text(\"payment_method\").default(\"midtrans\"), // 'midtrans' or 'cod'\n  paymentStatus: text(\"payment_status\").default(\"pending\"), // 'pending', 'paid', 'collected'\n  codCollected: boolean(\"cod_collected\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  pickedAt: timestamp(\"picked_at\"),\n  packedAt: timestamp(\"packed_at\"),\n  deliveredAt: timestamp(\"delivered_at\"),\n  estimatedDelivery: timestamp(\"estimated_delivery\"),\n  customerLat: decimal(\"customer_lat\", { precision: 10, scale: 7 }),\n  customerLng: decimal(\"customer_lng\", { precision: 10, scale: 7 }),\n});\n\n// Store inventory - links products to stores with store-specific stock\nexport const storeInventory = pgTable(\"store_inventory\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  storeId: varchar(\"store_id\").notNull().references(() => stores.id),\n  productId: varchar(\"product_id\").notNull().references(() => products.id),\n  stockCount: integer(\"stock_count\").notNull().default(0),\n  isAvailable: boolean(\"is_available\").default(true).notNull(),\n});\n\nexport const vouchers = pgTable(\"vouchers\", {\n  id: varchar(\"id\")\n    .primaryKey()\n    .default(sql`gen_random_uuid()`),\n  code: text(\"code\").notNull().unique(),\n  discount: integer(\"discount\").notNull(),\n  discountType: text(\"discount_type\").notNull(),\n  minOrder: integer(\"min_order\").default(0).notNull(),\n  validUntil: timestamp(\"valid_until\").notNull(),\n  description: text(\"description\"),\n});\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  addresses: many(addresses),\n  cartItems: many(cartItems),\n  orders: many(orders),\n  storeStaff: many(storeStaff),\n}));\n\nexport const storesRelations = relations(stores, ({ many }) => ({\n  staff: many(storeStaff),\n  inventory: many(storeInventory),\n  orders: many(orders),\n}));\n\nexport const storeStaffRelations = relations(storeStaff, ({ one }) => ({\n  user: one(users, {\n    fields: [storeStaff.userId],\n    references: [users.id],\n  }),\n  store: one(stores, {\n    fields: [storeStaff.storeId],\n    references: [stores.id],\n  }),\n}));\n\nexport const storeInventoryRelations = relations(storeInventory, ({ one }) => ({\n  store: one(stores, {\n    fields: [storeInventory.storeId],\n    references: [stores.id],\n  }),\n  product: one(products, {\n    fields: [storeInventory.productId],\n    references: [products.id],\n  }),\n}));\n\nexport const categoriesRelations = relations(categories, ({ many }) => ({\n  products: many(products),\n}));\n\nexport const productsRelations = relations(products, ({ one, many }) => ({\n  category: one(categories, {\n    fields: [products.categoryId],\n    references: [categories.id],\n  }),\n  inventory: many(storeInventory),\n}));\n\nexport const addressesRelations = relations(addresses, ({ one }) => ({\n  user: one(users, {\n    fields: [addresses.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const cartItemsRelations = relations(cartItems, ({ one }) => ({\n  user: one(users, {\n    fields: [cartItems.userId],\n    references: [users.id],\n  }),\n  product: one(products, {\n    fields: [cartItems.productId],\n    references: [products.id],\n  }),\n}));\n\nexport const ordersRelations = relations(orders, ({ one }) => ({\n  user: one(users, {\n    fields: [orders.userId],\n    references: [users.id],\n  }),\n  address: one(addresses, {\n    fields: [orders.addressId],\n    references: [addresses.id],\n  }),\n  store: one(stores, {\n    fields: [orders.storeId],\n    references: [stores.id],\n  }),\n  picker: one(users, {\n    fields: [orders.pickerId],\n    references: [users.id],\n  }),\n  driver: one(users, {\n    fields: [orders.driverId],\n    references: [users.id],\n  }),\n}));\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n  phone: true,\n  role: true,\n});\n\nexport const insertStoreSchema = createInsertSchema(stores).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertStoreStaffSchema = createInsertSchema(storeStaff).omit({\n  id: true,\n  createdAt: true,\n  lastStatusChange: true,\n});\n\nexport const insertStoreInventorySchema = createInsertSchema(storeInventory).omit({\n  id: true,\n});\n\nexport const insertCategorySchema = createInsertSchema(categories).pick({\n  name: true,\n  icon: true,\n  color: true,\n  image: true,\n});\n\nexport const insertProductSchema = createInsertSchema(products).omit({\n  id: true,\n});\n\nexport const insertAddressSchema = createInsertSchema(addresses).omit({\n  id: true,\n});\n\nexport const insertCartItemSchema = createInsertSchema(cartItems).omit({\n  id: true,\n});\n\nexport const insertOrderSchema = createInsertSchema(orders).omit({\n  id: true,\n  createdAt: true,\n  pickedAt: true,\n  packedAt: true,\n  deliveredAt: true,\n});\n\nexport const insertVoucherSchema = createInsertSchema(vouchers).omit({\n  id: true,\n});\n\n// Types\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport type InsertStore = z.infer<typeof insertStoreSchema>;\nexport type Store = typeof stores.$inferSelect;\n\nexport type InsertStoreStaff = z.infer<typeof insertStoreStaffSchema>;\nexport type StoreStaff = typeof storeStaff.$inferSelect;\n\nexport type InsertStoreInventory = z.infer<typeof insertStoreInventorySchema>;\nexport type StoreInventory = typeof storeInventory.$inferSelect;\n\nexport type InsertCategory = z.infer<typeof insertCategorySchema>;\nexport type Category = typeof categories.$inferSelect;\n\nexport type InsertProduct = z.infer<typeof insertProductSchema>;\nexport type Product = typeof products.$inferSelect;\n\nexport type InsertAddress = z.infer<typeof insertAddressSchema>;\nexport type Address = typeof addresses.$inferSelect;\n\nexport type InsertCartItem = z.infer<typeof insertCartItemSchema>;\nexport type CartItem = typeof cartItems.$inferSelect;\n\nexport type InsertOrder = z.infer<typeof insertOrderSchema>;\nexport type Order = typeof orders.$inferSelect;\n\nexport type InsertVoucher = z.infer<typeof insertVoucherSchema>;\nexport type Voucher = typeof vouchers.$inferSelect;\n","path":null,"size_bytes":11050,"size_tokens":null},"client/screens/VoiceConfirmScreen.tsx":{"content":"import React, { useState } from \"react\";\nimport { View, StyleSheet, FlatList, Pressable, Image, Alert } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { useNavigation, useRoute, RouteProp } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Button } from \"@/components/Button\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing, BorderRadius, Shadows } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { CartItem } from \"@/types\";\nimport { useCart } from \"@/context/CartContext\";\nimport { getImageUrl } from \"@/lib/image-url\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\ntype VoiceConfirmRouteProp = RouteProp<RootStackParamList, \"VoiceConfirm\">;\n\nexport default function VoiceConfirmScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const navigation = useNavigation<NavigationProp>();\n  const route = useRoute<VoiceConfirmRouteProp>();\n  const { items: routeItems } = route.params;\n  const { addToCart } = useCart();\n  const [items, setItems] = useState<CartItem[]>(routeItems);\n  const [isAdding, setIsAdding] = useState(false);\n\n  const formatPrice = (price: number) => {\n    return `Rp ${price.toLocaleString(\"id-ID\")}`;\n  };\n\n  const total = items.reduce(\n    (sum, item) => sum + item.product.price * item.quantity,\n    0\n  );\n\n  const handleRemoveItem = (productId: string) => {\n    setItems((prev) => prev.filter((item) => item.product.id !== productId));\n  };\n\n  const handleUpdateQuantity = (productId: string, delta: number) => {\n    setItems((prev) =>\n      prev.map((item) =>\n        item.product.id === productId\n          ? { ...item, quantity: Math.max(1, item.quantity + delta) }\n          : item\n      )\n    );\n  };\n\n  const handleAddToCart = async () => {\n    if (items.length === 0) {\n      Alert.alert(t.voice.noItemsFound, t.cart.emptyDescription);\n      return;\n    }\n    \n    setIsAdding(true);\n    try {\n      for (const item of items) {\n        addToCart(item.product, item.quantity);\n      }\n      navigation.navigate(\"Cart\");\n    } catch (error) {\n      Alert.alert(t.common.error);\n    } finally {\n      setIsAdding(false);\n    }\n  };\n\n  const renderItem = ({ item }: { item: CartItem }) => (\n    <Card style={styles.itemCard}>\n      <View style={styles.itemContent}>\n        <View style={[styles.itemImage, { backgroundColor: theme.backgroundDefault }]}>\n          <Feather name=\"package\" size={24} color={theme.textSecondary} />\n        </View>\n        <View style={styles.itemDetails}>\n          <ThemedText type=\"body\" style={{ fontWeight: \"500\" }}>\n            {item.product.name}\n          </ThemedText>\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n            {item.product.brand}\n          </ThemedText>\n          <View style={styles.quantityRow}>\n            <ThemedText type=\"body\" style={{ color: theme.primary, fontWeight: \"600\" }}>\n              {formatPrice(item.product.price)}\n            </ThemedText>\n            <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n              x {item.quantity}\n            </ThemedText>\n          </View>\n        </View>\n        <View style={styles.itemActions}>\n          <Pressable \n            style={[styles.actionButton, { backgroundColor: theme.backgroundDefault }]}\n            onPress={() => handleUpdateQuantity(item.product.id, -1)}\n          >\n            <Feather name=\"minus\" size={16} color={theme.text} />\n          </Pressable>\n          <Pressable \n            style={[styles.actionButton, { backgroundColor: theme.backgroundDefault }]}\n            onPress={() => handleUpdateQuantity(item.product.id, 1)}\n          >\n            <Feather name=\"plus\" size={16} color={theme.text} />\n          </Pressable>\n          <Pressable \n            style={[styles.actionButton, { backgroundColor: theme.error + \"20\" }]}\n            onPress={() => handleRemoveItem(item.product.id)}\n          >\n            <Feather name=\"trash-2\" size={16} color={theme.error} />\n          </Pressable>\n        </View>\n      </View>\n    </Card>\n  );\n\n  return (\n    <View style={{ flex: 1, backgroundColor: theme.backgroundRoot }}>\n      <FlatList\n        data={items}\n        renderItem={renderItem}\n        keyExtractor={(item) => item.product.id}\n        contentContainerStyle={[\n          styles.listContent,\n          {\n            paddingTop: headerHeight + Spacing.lg,\n            paddingBottom: 140,\n          },\n        ]}\n        showsVerticalScrollIndicator={false}\n        ListHeaderComponent={\n          <View style={styles.listHeader}>\n            <View style={[styles.successBadge, { backgroundColor: theme.success + \"20\" }]}>\n              <Feather name=\"check-circle\" size={16} color={theme.success} />\n              <ThemedText type=\"caption\" style={{ color: theme.success, fontWeight: \"500\" }}>\n                {items.length} {t.voice.itemsFound}\n              </ThemedText>\n            </View>\n            <ThemedText type=\"body\" style={{ color: theme.textSecondary, marginTop: Spacing.sm }}>\n              {t.voice.orderConfirm}\n            </ThemedText>\n          </View>\n        }\n      />\n      \n      <View\n        style={[\n          styles.footer,\n          {\n            backgroundColor: theme.backgroundRoot,\n            paddingBottom: insets.bottom + Spacing.lg,\n          },\n          Shadows.medium,\n        ]}\n      >\n        <View style={styles.footerContent}>\n          <View>\n            <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n              {t.checkout.total} ({items.length} {t.cart.items})\n            </ThemedText>\n            <ThemedText type=\"h2\" style={{ color: theme.primary }}>\n              {formatPrice(total)}\n            </ThemedText>\n          </View>\n          <Button onPress={handleAddToCart} style={styles.addButton} disabled={isAdding || items.length === 0}>\n            {isAdding ? t.common.loading : t.voice.addAllToCart}\n          </Button>\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  listContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  listHeader: {\n    marginBottom: Spacing.xl,\n  },\n  successBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    alignSelf: \"flex-start\",\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.xs,\n    gap: Spacing.sm,\n  },\n  itemCard: {\n    marginBottom: Spacing.md,\n  },\n  itemContent: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  itemImage: {\n    width: 56,\n    height: 56,\n    borderRadius: BorderRadius.sm,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  itemDetails: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  quantityRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.sm,\n    marginTop: Spacing.xs,\n  },\n  itemActions: {\n    flexDirection: \"row\",\n    gap: Spacing.sm,\n  },\n  actionButton: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  footer: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    paddingTop: Spacing.lg,\n    paddingHorizontal: Spacing.lg,\n  },\n  footerContent: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n  addButton: {\n    flex: 1,\n    marginLeft: Spacing.xl,\n  },\n});\n","path":null,"size_bytes":7820,"size_tokens":null},"client/components/Button.tsx":{"content":"import React, { ReactNode } from \"react\";\nimport { StyleSheet, Pressable, ViewStyle, StyleProp } from \"react-native\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  WithSpringConfig,\n} from \"react-native-reanimated\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { BorderRadius, Spacing } from \"@/constants/theme\";\n\ninterface ButtonProps {\n  onPress?: () => void;\n  children: ReactNode;\n  style?: StyleProp<ViewStyle>;\n  disabled?: boolean;\n  variant?: \"primary\" | \"secondary\" | \"text\";\n}\n\nconst springConfig: WithSpringConfig = {\n  damping: 15,\n  mass: 0.3,\n  stiffness: 150,\n  overshootClamping: true,\n  energyThreshold: 0.001,\n};\n\nconst AnimatedPressable = Animated.createAnimatedComponent(Pressable);\n\nexport function Button({\n  onPress,\n  children,\n  style,\n  disabled = false,\n  variant = \"primary\",\n}: ButtonProps) {\n  const { theme } = useTheme();\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const handlePressIn = () => {\n    if (!disabled) {\n      scale.value = withSpring(0.98, springConfig);\n    }\n  };\n\n  const handlePressOut = () => {\n    if (!disabled) {\n      scale.value = withSpring(1, springConfig);\n    }\n  };\n\n  const getBackgroundColor = () => {\n    if (variant === \"primary\") return theme.primary;\n    if (variant === \"secondary\") return \"transparent\";\n    return \"transparent\";\n  };\n\n  const getBorderStyle = () => {\n    if (variant === \"secondary\") {\n      return {\n        borderWidth: 1,\n        borderColor: theme.secondary,\n      };\n    }\n    return {};\n  };\n\n  const getTextColor = () => {\n    if (variant === \"primary\") return theme.buttonText;\n    if (variant === \"secondary\") return theme.secondary;\n    return theme.secondary;\n  };\n\n  return (\n    <AnimatedPressable\n      onPress={disabled ? undefined : onPress}\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n      disabled={disabled}\n      style={[\n        styles.button,\n        {\n          backgroundColor: getBackgroundColor(),\n          opacity: disabled ? 0.5 : 1,\n        },\n        getBorderStyle(),\n        variant === \"text\" && styles.textButton,\n        style,\n        animatedStyle,\n      ]}\n    >\n      <ThemedText\n        type=\"button\"\n        style={[styles.buttonText, { color: getTextColor() }]}\n      >\n        {children}\n      </ThemedText>\n    </AnimatedPressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    height: Spacing.buttonHeight,\n    borderRadius: BorderRadius.sm,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingHorizontal: Spacing.xl,\n  },\n  textButton: {\n    height: \"auto\",\n    paddingHorizontal: 0,\n    paddingVertical: Spacing.sm,\n  },\n  buttonText: {\n    fontWeight: \"600\",\n  },\n});\n","path":null,"size_bytes":2837,"size_tokens":null},"client/screens/ProductDetailScreen.tsx":{"content":"import React, { useState } from \"react\";\nimport { View, StyleSheet, ScrollView, Pressable, Image } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useRoute, RouteProp, useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Button } from \"@/components/Button\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing, BorderRadius, Shadows } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { useCart } from \"@/context/CartContext\";\nimport { getImageUrl } from \"@/lib/image-url\";\n\ntype ProductDetailRouteProp = RouteProp<RootStackParamList, \"ProductDetail\">;\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nexport default function ProductDetailScreen() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const route = useRoute<ProductDetailRouteProp>();\n  const navigation = useNavigation<NavigationProp>();\n  const { product } = route.params;\n  const [quantity, setQuantity] = useState(1);\n  const [showNutrition, setShowNutrition] = useState(false);\n  const { addToCart } = useCart();\n\n  const formatPrice = (price: number) => {\n    return `Rp ${price.toLocaleString(\"id-ID\")}`;\n  };\n\n  const handleAddToCart = () => {\n    addToCart(product, quantity);\n    navigation.navigate(\"Cart\");\n  };\n\n  return (\n    <View style={{ flex: 1, backgroundColor: theme.backgroundRoot }}>\n      <ScrollView\n        contentContainerStyle={[\n          styles.scrollContent,\n          { paddingBottom: insets.bottom + 100 },\n        ]}\n        showsVerticalScrollIndicator={false}\n      >\n        <View style={[styles.imageContainer, { backgroundColor: theme.backgroundDefault }]}>\n          {product.image ? (\n            <Image source={{ uri: getImageUrl(product.image) }} style={styles.productImage} />\n          ) : (\n            <Feather name=\"package\" size={80} color={theme.textSecondary} />\n          )}\n          {product.originalPrice ? (\n            <View style={[styles.discountBadge, { backgroundColor: theme.error }]}>\n              <ThemedText type=\"small\" style={{ color: \"#FFFFFF\", fontWeight: \"600\" }}>\n                {Math.round((1 - product.price / product.originalPrice) * 100)}% {t.product.percentOff}\n              </ThemedText>\n            </View>\n          ) : null}\n        </View>\n        \n        <View style={styles.content}>\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n            {product.brand}\n          </ThemedText>\n          <ThemedText type=\"h2\" style={styles.productName}>\n            {product.name}\n          </ThemedText>\n          \n          <View style={styles.priceContainer}>\n            <ThemedText type=\"h2\" style={{ color: theme.primary }}>\n              {formatPrice(product.price)}\n            </ThemedText>\n            {product.originalPrice ? (\n              <ThemedText\n                type=\"body\"\n                style={{ color: theme.textSecondary, textDecorationLine: \"line-through\", marginLeft: Spacing.sm }}\n              >\n                {formatPrice(product.originalPrice)}\n              </ThemedText>\n            ) : null}\n          </View>\n          \n          <View style={styles.quantityContainer}>\n            <ThemedText type=\"body\">{t.product.quantity}:</ThemedText>\n            <View style={styles.quantityControls}>\n              <Pressable\n                style={[styles.quantityButton, { backgroundColor: theme.backgroundDefault }]}\n                onPress={() => setQuantity(Math.max(1, quantity - 1))}\n              >\n                <Feather name=\"minus\" size={18} color={theme.text} />\n              </Pressable>\n              <ThemedText type=\"h3\" style={styles.quantityText}>\n                {quantity}\n              </ThemedText>\n              <Pressable\n                style={[styles.quantityButton, { backgroundColor: theme.primary }]}\n                onPress={() => setQuantity(quantity + 1)}\n              >\n                <Feather name=\"plus\" size={18} color={theme.buttonText} />\n              </Pressable>\n            </View>\n          </View>\n          \n          <View style={styles.divider} />\n          \n          <ThemedText type=\"h3\" style={styles.sectionTitle}>\n            {t.product.description}\n          </ThemedText>\n          <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n            {product.description}\n          </ThemedText>\n          \n          {product.nutrition ? (\n            <>\n              <Pressable\n                style={styles.nutritionHeader}\n                onPress={() => setShowNutrition(!showNutrition)}\n              >\n                <ThemedText type=\"h3\">{t.product.nutritionFacts}</ThemedText>\n                <Feather\n                  name={showNutrition ? \"chevron-up\" : \"chevron-down\"}\n                  size={20}\n                  color={theme.text}\n                />\n              </Pressable>\n              {showNutrition ? (\n                <Card style={styles.nutritionCard}>\n                  <View style={styles.nutritionRow}>\n                    <ThemedText type=\"body\">{t.product.calories}</ThemedText>\n                    <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n                      {product.nutrition.calories}\n                    </ThemedText>\n                  </View>\n                  <View style={styles.nutritionRow}>\n                    <ThemedText type=\"body\">{t.product.protein}</ThemedText>\n                    <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n                      {product.nutrition.protein}\n                    </ThemedText>\n                  </View>\n                  <View style={styles.nutritionRow}>\n                    <ThemedText type=\"body\">{t.product.carbs}</ThemedText>\n                    <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n                      {product.nutrition.carbs}\n                    </ThemedText>\n                  </View>\n                  <View style={styles.nutritionRow}>\n                    <ThemedText type=\"body\">{t.product.fat}</ThemedText>\n                    <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n                      {product.nutrition.fat}\n                    </ThemedText>\n                  </View>\n                </Card>\n              ) : null}\n            </>\n          ) : null}\n        </View>\n      </ScrollView>\n      \n      <View\n        style={[\n          styles.footer,\n          {\n            backgroundColor: theme.backgroundRoot,\n            paddingBottom: insets.bottom + Spacing.lg,\n          },\n          Shadows.medium,\n        ]}\n      >\n        <View style={styles.footerContent}>\n          <View>\n            <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n              {t.checkout.total}\n            </ThemedText>\n            <ThemedText type=\"h3\" style={{ color: theme.primary }}>\n              {formatPrice(product.price * quantity)}\n            </ThemedText>\n          </View>\n          <Button\n            onPress={handleAddToCart}\n            style={styles.addToCartButton}\n            disabled={!product.inStock}\n          >\n            {product.inStock ? t.product.addToCart : t.product.outOfStock}\n          </Button>\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  scrollContent: {\n    flexGrow: 1,\n  },\n  imageContainer: {\n    height: 280,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  productImage: {\n    width: \"100%\",\n    height: \"100%\",\n    resizeMode: \"cover\",\n  },\n  discountBadge: {\n    position: \"absolute\",\n    top: Spacing.lg,\n    right: Spacing.lg,\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n  },\n  content: {\n    padding: Spacing.lg,\n  },\n  productName: {\n    marginTop: Spacing.xs,\n    marginBottom: Spacing.md,\n  },\n  priceContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginBottom: Spacing.xl,\n  },\n  quantityContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    marginBottom: Spacing.xl,\n  },\n  quantityControls: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.md,\n  },\n  quantityButton: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  quantityText: {\n    minWidth: 32,\n    textAlign: \"center\",\n  },\n  divider: {\n    height: 1,\n    backgroundColor: \"#E0E0E0\",\n    marginBottom: Spacing.xl,\n  },\n  sectionTitle: {\n    marginBottom: Spacing.sm,\n  },\n  nutritionHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginTop: Spacing.xl,\n    paddingVertical: Spacing.sm,\n  },\n  nutritionCard: {\n    marginTop: Spacing.sm,\n  },\n  nutritionRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    paddingVertical: Spacing.sm,\n  },\n  footer: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    paddingTop: Spacing.lg,\n    paddingHorizontal: Spacing.lg,\n  },\n  footerContent: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n  addToCartButton: {\n    flex: 1,\n    marginLeft: Spacing.xl,\n  },\n});\n","path":null,"size_bytes":9538,"size_tokens":null},"client/screens/onboarding/PhoneSignupScreen.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport { View, StyleSheet, TextInput, Pressable, Platform, Alert } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { Feather } from \"@expo/vector-icons\";\nimport * as AppleAuthentication from \"expo-apple-authentication\";\nimport * as Google from \"expo-auth-session/providers/google\";\nimport * as WebBrowser from \"expo-web-browser\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Button } from \"@/components/Button\";\nimport { KeyboardAwareScrollViewCompat } from \"@/components/KeyboardAwareScrollViewCompat\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\n\nWebBrowser.maybeCompleteAuthSession();\n\nconst HAS_GOOGLE_CONFIG = !!(\n  process.env.EXPO_PUBLIC_GOOGLE_CLIENT_ID ||\n  process.env.EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID ||\n  process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID ||\n  process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID\n);\n\ninterface GoogleSignInButtonProps {\n  onSuccess: () => void;\n  onError: (error: string) => void;\n  onLoadingChange: (loading: boolean) => void;\n  theme: any;\n}\n\nfunction GoogleSignInButton({ onSuccess, onError, onLoadingChange, theme }: GoogleSignInButtonProps) {\n  const { loginWithGoogle } = useAuth();\n  \n  const [request, response, promptAsync] = Google.useAuthRequest({\n    clientId: process.env.EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID || process.env.EXPO_PUBLIC_GOOGLE_CLIENT_ID,\n    androidClientId: process.env.EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID,\n    iosClientId: process.env.EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID,\n  });\n\n  useEffect(() => {\n    const handleResponse = async () => {\n      if (response?.type === \"success\") {\n        const { authentication } = response;\n        if (authentication?.accessToken) {\n          try {\n            onLoadingChange(true);\n            const userInfoResponse = await fetch(\n              \"https://www.googleapis.com/userinfo/v2/me\",\n              { headers: { Authorization: `Bearer ${authentication.accessToken}` } }\n            );\n            const userInfo = await userInfoResponse.json();\n            const result = await loginWithGoogle(userInfo.id, userInfo.email, userInfo.name);\n            onLoadingChange(false);\n            if (result.success) {\n              onSuccess();\n            } else {\n              onError(result.error || \"Google Sign-In failed\");\n            }\n          } catch (e) {\n            onLoadingChange(false);\n            onError(\"Failed to get Google user info\");\n          }\n        }\n      } else if (response?.type === \"error\") {\n        onError(\"Google Sign-In was cancelled or failed\");\n      }\n    };\n    handleResponse();\n  }, [response]);\n\n  const handlePress = async () => {\n    if (!request) {\n      onError(\"Google Sign-In is not ready. Please try again.\");\n      return;\n    }\n    try {\n      await promptAsync();\n    } catch (e) {\n      onError(\"Google Sign-In failed to start\");\n    }\n  };\n\n  return (\n    <Pressable\n      style={[styles.socialButton, { backgroundColor: theme.backgroundDefault }]}\n      onPress={handlePress}\n    >\n      <Feather name=\"mail\" size={24} color={theme.text} />\n      <ThemedText type=\"body\" style={styles.socialButtonText}>\n        Google\n      </ThemedText>\n    </Pressable>\n  );\n}\n\ninterface PhoneSignupScreenProps {\n  onComplete: () => void;\n}\n\nexport default function PhoneSignupScreen({ onComplete }: PhoneSignupScreenProps) {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const { sendOtp, verifyOtp, loginWithApple, loginWithGoogle } = useAuth();\n  \n  const [phone, setPhone] = useState(\"\");\n  const [otpCode, setOtpCode] = useState(\"\");\n  const [sentCode, setSentCode] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [step, setStep] = useState<\"phone\" | \"otp\">(\"phone\");\n  const [error, setError] = useState<string | null>(null);\n\n  const fullPhone = `+62${phone}`;\n\n  const handleSendOTP = async () => {\n    setIsLoading(true);\n    setError(null);\n    \n    const result = await sendOtp(fullPhone);\n    \n    setIsLoading(false);\n    \n    if (result.success) {\n      setSentCode(result.code || null);\n      setStep(\"otp\");\n    } else {\n      setError(result.error || \"Failed to send OTP\");\n    }\n  };\n\n  const handleVerifyOTP = async () => {\n    setIsLoading(true);\n    setError(null);\n    \n    const result = await verifyOtp(fullPhone, otpCode);\n    \n    setIsLoading(false);\n    \n    if (result.success) {\n      onComplete();\n    } else {\n      setError(result.error || \"Invalid OTP\");\n    }\n  };\n\n  const handleAppleSignIn = async () => {\n    try {\n      const credential = await AppleAuthentication.signInAsync({\n        requestedScopes: [\n          AppleAuthentication.AppleAuthenticationScope.FULL_NAME,\n          AppleAuthentication.AppleAuthenticationScope.EMAIL,\n        ],\n      });\n      \n      const fullName = credential.fullName\n        ? `${credential.fullName.givenName || \"\"} ${credential.fullName.familyName || \"\"}`.trim()\n        : undefined;\n      \n      setIsLoading(true);\n      const result = await loginWithApple(credential.user, credential.email || undefined, fullName);\n      setIsLoading(false);\n      \n      if (result.success) {\n        onComplete();\n      } else {\n        setError(result.error || \"Apple Sign-In failed\");\n      }\n    } catch (e: any) {\n      if (e.code === \"ERR_REQUEST_CANCELED\") {\n        return;\n      }\n      setError(\"Apple Sign-In failed\");\n    }\n  };\n\n  const handleGoogleFallback = () => {\n    Alert.alert(\n      \"Google Sign-In Setup Required\",\n      \"To enable Google Sign-In, you need to configure Google OAuth credentials in your Google Cloud Console and add them as environment variables (EXPO_PUBLIC_GOOGLE_CLIENT_ID, EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID).\\n\\nFor now, please use Phone OTP or Apple Sign-In (iOS only).\",\n      [\n        { text: \"OK\" },\n        {\n          text: \"Demo Login\",\n          onPress: async () => {\n            setIsLoading(true);\n            const demoGoogleId = `demo_google_${Date.now()}`;\n            const result = await loginWithGoogle(\n              demoGoogleId,\n              \"demo@gmail.com\",\n              \"Demo User\"\n            );\n            setIsLoading(false);\n            if (result.success) {\n              onComplete();\n            } else {\n              setError(result.error || \"Demo login failed\");\n            }\n          },\n        },\n      ]\n    );\n  };\n\n  return (\n    <KeyboardAwareScrollViewCompat\n      style={{ flex: 1, backgroundColor: theme.backgroundRoot }}\n      contentContainerStyle={[\n        styles.container,\n        {\n          paddingTop: headerHeight + Spacing.xxl,\n          paddingBottom: insets.bottom + Spacing.xl,\n        },\n      ]}\n    >\n      <View style={styles.content}>\n        <ThemedText type=\"h2\" style={styles.title}>\n          {step === \"phone\" ? \"Enter Your Phone\" : \"Enter OTP Code\"}\n        </ThemedText>\n        \n        <ThemedText type=\"body\" style={[styles.subtitle, { color: theme.textSecondary }]}>\n          {step === \"phone\" \n            ? \"We'll send you a verification code\" \n            : `Enter the 6-digit code sent to ${fullPhone}`}\n        </ThemedText>\n\n        {error ? (\n          <View style={[styles.errorBox, { backgroundColor: theme.error + \"20\" }]}>\n            <ThemedText type=\"caption\" style={{ color: theme.error }}>\n              {error}\n            </ThemedText>\n          </View>\n        ) : null}\n\n        {sentCode ? (\n          <View style={[styles.codeHint, { backgroundColor: theme.primary + \"20\" }]}>\n            <ThemedText type=\"caption\" style={{ color: theme.primary }}>\n              Demo OTP: {sentCode}\n            </ThemedText>\n          </View>\n        ) : null}\n        \n        {step === \"phone\" ? (\n          <>\n            <View style={styles.phoneInputContainer}>\n              <View style={[styles.countryCode, { backgroundColor: theme.backgroundDefault, borderColor: theme.border }]}>\n                <ThemedText type=\"body\">+62</ThemedText>\n              </View>\n              \n              <TextInput\n                style={[\n                  styles.phoneInput,\n                  {\n                    backgroundColor: theme.backgroundDefault,\n                    borderColor: theme.border,\n                    color: theme.text,\n                  },\n                ]}\n                placeholder=\"Phone number\"\n                placeholderTextColor={theme.textSecondary}\n                keyboardType=\"phone-pad\"\n                value={phone}\n                onChangeText={(text) => {\n                  setPhone(text);\n                  setError(null);\n                }}\n              />\n            </View>\n            \n            <Button \n              onPress={handleSendOTP} \n              disabled={phone.length < 9 || isLoading}\n              style={styles.sendButton}\n            >\n              {isLoading ? \"Sending...\" : \"Send OTP\"}\n            </Button>\n          </>\n        ) : (\n          <>\n            <TextInput\n              style={[\n                styles.otpInput,\n                {\n                  backgroundColor: theme.backgroundDefault,\n                  borderColor: theme.border,\n                  color: theme.text,\n                },\n              ]}\n              placeholder=\"Enter 6-digit code\"\n              placeholderTextColor={theme.textSecondary}\n              keyboardType=\"number-pad\"\n              value={otpCode}\n              onChangeText={(text) => {\n                setOtpCode(text);\n                setError(null);\n              }}\n              maxLength={6}\n            />\n            \n            <Button \n              onPress={handleVerifyOTP} \n              disabled={otpCode.length !== 6 || isLoading}\n              style={styles.sendButton}\n            >\n              {isLoading ? \"Verifying...\" : \"Verify\"}\n            </Button>\n\n            <View style={styles.otpActions}>\n              <Pressable \n                onPress={async () => {\n                  setOtpCode(\"\");\n                  setError(null);\n                  await handleSendOTP();\n                }} \n                style={styles.backLink}\n                disabled={isLoading}\n              >\n                <ThemedText type=\"caption\" style={{ color: theme.primary }}>\n                  Resend OTP\n                </ThemedText>\n              </Pressable>\n              \n              <Pressable \n                onPress={() => {\n                  setStep(\"phone\");\n                  setOtpCode(\"\");\n                  setSentCode(null);\n                  setError(null);\n                }} \n                style={styles.backLink}\n              >\n                <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n                  Change phone number\n                </ThemedText>\n              </Pressable>\n            </View>\n          </>\n        )}\n        \n        <View style={styles.dividerContainer}>\n          <View style={[styles.divider, { backgroundColor: theme.border }]} />\n          <ThemedText type=\"caption\" style={[styles.dividerText, { color: theme.textSecondary }]}>\n            or continue with\n          </ThemedText>\n          <View style={[styles.divider, { backgroundColor: theme.border }]} />\n        </View>\n        \n        <View style={styles.socialButtons}>\n          {HAS_GOOGLE_CONFIG ? (\n            <GoogleSignInButton\n              onSuccess={onComplete}\n              onError={setError}\n              onLoadingChange={setIsLoading}\n              theme={theme}\n            />\n          ) : (\n            <Pressable\n              style={[styles.socialButton, { backgroundColor: theme.backgroundDefault }]}\n              onPress={handleGoogleFallback}\n            >\n              <Feather name=\"mail\" size={24} color={theme.text} />\n              <ThemedText type=\"body\" style={styles.socialButtonText}>\n                Google\n              </ThemedText>\n            </Pressable>\n          )}\n          \n          {Platform.OS === \"ios\" ? (\n            <AppleAuthentication.AppleAuthenticationButton\n              buttonType={AppleAuthentication.AppleAuthenticationButtonType.SIGN_IN}\n              buttonStyle={AppleAuthentication.AppleAuthenticationButtonStyle.BLACK}\n              cornerRadius={BorderRadius.sm}\n              style={styles.appleButton}\n              onPress={handleAppleSignIn}\n            />\n          ) : (\n            <Pressable\n              style={[styles.socialButton, { backgroundColor: theme.backgroundDefault }]}\n              onPress={() => Alert.alert(\"Not Available\", \"Apple Sign-In is only available on iOS devices\")}\n            >\n              <Feather name=\"smartphone\" size={24} color={theme.text} />\n              <ThemedText type=\"body\" style={styles.socialButtonText}>\n                Apple\n              </ThemedText>\n            </Pressable>\n          )}\n        </View>\n\n        <Pressable onPress={onComplete} style={styles.skipLink}>\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n            Skip for Demo\n          </ThemedText>\n        </Pressable>\n      </View>\n      \n      <ThemedText type=\"small\" style={[styles.terms, { color: theme.textSecondary }]}>\n        By continuing, you agree to our Terms of Service and Privacy Policy\n      </ThemedText>\n    </KeyboardAwareScrollViewCompat>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexGrow: 1,\n    paddingHorizontal: Spacing.lg,\n  },\n  content: {\n    flex: 1,\n  },\n  title: {\n    marginBottom: Spacing.sm,\n  },\n  subtitle: {\n    marginBottom: Spacing.lg,\n  },\n  errorBox: {\n    padding: Spacing.md,\n    borderRadius: BorderRadius.sm,\n    marginBottom: Spacing.md,\n  },\n  codeHint: {\n    padding: Spacing.md,\n    borderRadius: BorderRadius.sm,\n    marginBottom: Spacing.md,\n  },\n  phoneInputContainer: {\n    flexDirection: \"row\",\n    gap: Spacing.sm,\n    marginBottom: Spacing.lg,\n  },\n  countryCode: {\n    height: Spacing.inputHeight,\n    paddingHorizontal: Spacing.lg,\n    borderRadius: BorderRadius.sm,\n    borderWidth: 1,\n    justifyContent: \"center\",\n  },\n  phoneInput: {\n    flex: 1,\n    height: Spacing.inputHeight,\n    paddingHorizontal: Spacing.lg,\n    borderRadius: BorderRadius.sm,\n    borderWidth: 1,\n    fontSize: 16,\n  },\n  otpInput: {\n    height: Spacing.inputHeight,\n    paddingHorizontal: Spacing.lg,\n    borderRadius: BorderRadius.sm,\n    borderWidth: 1,\n    fontSize: 24,\n    textAlign: \"center\",\n    letterSpacing: 8,\n    marginBottom: Spacing.lg,\n  },\n  sendButton: {\n    marginBottom: Spacing.lg,\n  },\n  otpActions: {\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    gap: Spacing.xl,\n    marginBottom: Spacing.lg,\n  },\n  backLink: {\n    padding: Spacing.sm,\n  },\n  dividerContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginBottom: Spacing.xl,\n  },\n  divider: {\n    flex: 1,\n    height: 1,\n  },\n  dividerText: {\n    paddingHorizontal: Spacing.lg,\n  },\n  socialButtons: {\n    flexDirection: \"row\",\n    gap: Spacing.md,\n  },\n  socialButton: {\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    height: Spacing.buttonHeight,\n    borderRadius: BorderRadius.sm,\n    gap: Spacing.sm,\n  },\n  appleButton: {\n    flex: 1,\n    height: Spacing.buttonHeight,\n  },\n  socialButtonText: {\n    fontWeight: \"500\",\n  },\n  skipLink: {\n    alignSelf: \"center\",\n    marginTop: Spacing.xl,\n    padding: Spacing.sm,\n  },\n  terms: {\n    textAlign: \"center\",\n    paddingHorizontal: Spacing.lg,\n  },\n});\n","path":null,"size_bytes":15655,"size_tokens":null},"client/screens/AccountScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, ScrollView, Pressable, Alert } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\ninterface MenuItemProps {\n  icon: string;\n  label: string;\n  onPress: () => void;\n  showBadge?: boolean;\n}\n\nfunction MenuItem({ icon, label, onPress, showBadge }: MenuItemProps) {\n  const { theme } = useTheme();\n  \n  return (\n    <Pressable style={styles.menuItem} onPress={onPress}>\n      <View style={[styles.menuIconContainer, { backgroundColor: theme.backgroundDefault }]}>\n        <Feather name={icon as any} size={20} color={theme.text} />\n      </View>\n      <ThemedText type=\"body\" style={styles.menuLabel}>\n        {label}\n      </ThemedText>\n      <View style={styles.menuRight}>\n        {showBadge ? (\n          <View style={[styles.badge, { backgroundColor: theme.primary }]}>\n            <ThemedText type=\"small\" style={{ color: theme.buttonText, fontSize: 10 }}>\n              2\n            </ThemedText>\n          </View>\n        ) : null}\n        <Feather name=\"chevron-right\" size={20} color={theme.textSecondary} />\n      </View>\n    </Pressable>\n  );\n}\n\nexport default function AccountScreen() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const navigation = useNavigation<NavigationProp>();\n  const { t } = useLanguage();\n  const { user, isAuthenticated, logout } = useAuth();\n\n  const getInitial = () => {\n    if (user?.username) {\n      return user.username.charAt(0).toUpperCase();\n    }\n    return \"G\";\n  };\n\n  const getDisplayName = () => {\n    if (user?.username) {\n      return user.username;\n    }\n    return \"Guest\";\n  };\n\n  const getPhoneNumber = () => {\n    if (user?.phone) {\n      return user.phone;\n    }\n    if (user?.email) {\n      return user.email;\n    }\n    return t.account.noPhone;\n  };\n\n  const handleLogout = () => {\n    Alert.alert(\n      \"Logout\",\n      \"Are you sure you want to logout?\",\n      [\n        { text: \"Cancel\", style: \"cancel\" },\n        { \n          text: \"Logout\", \n          style: \"destructive\",\n          onPress: async () => {\n            await logout();\n          }\n        }\n      ]\n    );\n  };\n\n  return (\n    <ThemedView style={styles.container}>\n      <ScrollView\n        contentContainerStyle={[\n          styles.scrollContent,\n          {\n            paddingTop: insets.top + Spacing.lg,\n            paddingBottom: insets.bottom + 100,\n          },\n        ]}\n        showsVerticalScrollIndicator={false}\n      >\n        <View style={styles.header}>\n          <ThemedText type=\"h2\">{t.account.title}</ThemedText>\n        </View>\n        \n        <Card style={styles.profileCard}>\n          <View style={styles.profileContent}>\n            <View style={[styles.avatar, { backgroundColor: theme.primary }]}>\n              <ThemedText type=\"h2\" style={{ color: theme.buttonText }}>\n                {getInitial()}\n              </ThemedText>\n            </View>\n            <View style={styles.profileInfo}>\n              <ThemedText type=\"h3\">{getDisplayName()}</ThemedText>\n              <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n                {getPhoneNumber()}\n              </ThemedText>\n            </View>\n            <Pressable style={styles.editButton}>\n              <Feather name=\"edit-2\" size={18} color={theme.primary} />\n            </Pressable>\n          </View>\n        </Card>\n        \n        <View style={styles.section}>\n          <ThemedText type=\"caption\" style={[styles.sectionTitle, { color: theme.textSecondary }]}>\n            {t.account.myAccount.toUpperCase()}\n          </ThemedText>\n          <Card style={styles.menuCard}>\n            <MenuItem\n              icon=\"map-pin\"\n              label={t.account.savedAddresses}\n              onPress={() => navigation.navigate(\"EditAddress\", {})}\n            />\n            <View style={[styles.divider, { backgroundColor: theme.border }]} />\n            <MenuItem\n              icon=\"credit-card\"\n              label={t.account.paymentMethods}\n              onPress={() => {}}\n            />\n            <View style={[styles.divider, { backgroundColor: theme.border }]} />\n            <MenuItem\n              icon=\"tag\"\n              label={t.account.myVouchers}\n              onPress={() => navigation.navigate(\"Vouchers\")}\n              showBadge\n            />\n          </Card>\n        </View>\n        \n        <View style={styles.section}>\n          <ThemedText type=\"caption\" style={[styles.sectionTitle, { color: theme.textSecondary }]}>\n            {t.account.support.toUpperCase()}\n          </ThemedText>\n          <Card style={styles.menuCard}>\n            <MenuItem\n              icon=\"help-circle\"\n              label={t.account.helpCenter}\n              onPress={() => navigation.navigate(\"HelpCenter\")}\n            />\n            <View style={[styles.divider, { backgroundColor: theme.border }]} />\n            <MenuItem\n              icon=\"message-circle\"\n              label={t.account.chatSupport}\n              onPress={() => {}}\n            />\n          </Card>\n        </View>\n        \n        <View style={styles.section}>\n          <ThemedText type=\"caption\" style={[styles.sectionTitle, { color: theme.textSecondary }]}>\n            {t.account.settings.toUpperCase()}\n          </ThemedText>\n          <Card style={styles.menuCard}>\n            <MenuItem\n              icon=\"bell\"\n              label={t.account.notifications}\n              onPress={() => navigation.navigate(\"Notifications\")}\n            />\n            <View style={[styles.divider, { backgroundColor: theme.border }]} />\n            <MenuItem\n              icon=\"globe\"\n              label={t.account.language}\n              onPress={() => navigation.navigate(\"Language\")}\n            />\n            <View style={[styles.divider, { backgroundColor: theme.border }]} />\n            <MenuItem\n              icon=\"info\"\n              label={t.account.about}\n              onPress={() => navigation.navigate(\"About\")}\n            />\n          </Card>\n        </View>\n        \n        <View style={styles.section}>\n          <ThemedText type=\"caption\" style={[styles.sectionTitle, { color: theme.textSecondary }]}>\n            {t.account.admin.toUpperCase()}\n          </ThemedText>\n          <Card style={styles.menuCard}>\n            <MenuItem\n              icon=\"bar-chart-2\"\n              label={t.account.storeDashboard}\n              onPress={() => navigation.navigate(\"AdminDashboard\")}\n            />\n          </Card>\n        </View>\n\n        {isAuthenticated ? (\n          <Pressable \n            style={[styles.logoutButton, { borderColor: theme.error }]}\n            onPress={handleLogout}\n          >\n            <Feather name=\"log-out\" size={20} color={theme.error} />\n            <ThemedText type=\"body\" style={{ color: theme.error }}>\n              Logout\n            </ThemedText>\n          </Pressable>\n        ) : null}\n      </ScrollView>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  header: {\n    marginBottom: Spacing.lg,\n  },\n  profileCard: {\n    marginBottom: Spacing.xl,\n  },\n  profileContent: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  loginPrompt: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  profileInfo: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  editButton: {\n    padding: Spacing.sm,\n  },\n  section: {\n    marginBottom: Spacing.lg,\n  },\n  sectionTitle: {\n    marginBottom: Spacing.sm,\n    textTransform: \"uppercase\",\n    letterSpacing: 1,\n  },\n  menuCard: {\n    padding: 0,\n  },\n  menuItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: Spacing.lg,\n  },\n  menuIconContainer: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  menuLabel: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  menuRight: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.sm,\n  },\n  badge: {\n    width: 18,\n    height: 18,\n    borderRadius: 9,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  divider: {\n    height: 1,\n    marginLeft: 60,\n  },\n  logoutButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: Spacing.sm,\n    paddingVertical: Spacing.lg,\n    borderWidth: 1,\n    borderRadius: BorderRadius.sm,\n    marginTop: Spacing.lg,\n  },\n});\n","path":null,"size_bytes":9237,"size_tokens":null},"client/screens/HomeScreen.tsx":{"content":"import React, { useState } from \"react\";\nimport { View, StyleSheet, ScrollView, Pressable, Image, TextInput, ActivityIndicator } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { useBottomTabBarHeight } from \"@react-navigation/bottom-tabs\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Card } from \"@/components/Card\";\nimport { Button } from \"@/components/Button\";\nimport { CartToast } from \"@/components/CartToast\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { Category, Product } from \"@/types\";\nimport { mockPromotions } from \"@/data/mockData\";\nimport { useCart } from \"@/context/CartContext\";\nimport { useLocation } from \"@/context/LocationContext\";\nimport { getImageUrl } from \"@/lib/image-url\";\nimport { useLanguage } from \"@/context/LanguageContext\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\ninterface APICategory {\n  id: string;\n  name: string;\n  icon: string;\n  color: string;\n  image: string | null;\n}\n\ninterface APIProduct {\n  id: string;\n  name: string;\n  brand: string;\n  price: number;\n  originalPrice: number | null;\n  image: string | null;\n  categoryId: string;\n  description: string | null;\n  nutrition: any;\n  inStock: boolean;\n  stockCount: number;\n}\n\nexport default function HomeScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const tabBarHeight = useBottomTabBarHeight();\n  const { theme } = useTheme();\n  const navigation = useNavigation<NavigationProp>();\n  const { addToCart } = useCart();\n  const { t } = useLanguage();\n  const {\n    locationStatus,\n    store,\n    storeAvailable,\n    estimatedDeliveryMinutes,\n    isCheckingAvailability,\n    requestLocationPermission,\n  } = useLocation();\n\n  const { data: apiCategories = [], isLoading: categoriesLoading } = useQuery<APICategory[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const { data: apiProducts = [], isLoading: productsLoading } = useQuery<APIProduct[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  const categories: Category[] = apiCategories.map((c) => ({\n    id: c.id,\n    name: c.name,\n    icon: c.icon,\n    color: c.color,\n    image: c.image || undefined,\n  }));\n\n  const products: Product[] = apiProducts.map((p) => ({\n    id: p.id,\n    name: p.name,\n    brand: p.brand,\n    price: p.price,\n    originalPrice: p.originalPrice || undefined,\n    image: p.image || \"\",\n    category: p.categoryId,\n    description: p.description || \"\",\n    nutrition: p.nutrition,\n    inStock: p.inStock,\n    stockCount: p.stockCount,\n  }));\n\n  const handleCategoryPress = (category: Category) => {\n    navigation.navigate(\"Category\", { category });\n  };\n\n  const handleProductPress = (product: Product) => {\n    navigation.navigate(\"ProductDetail\", { product });\n  };\n\n  const [toastVisible, setToastVisible] = useState(false);\n  const [lastAddedProduct, setLastAddedProduct] = useState<string>(\"\");\n\n  const handleAddToCart = (product: Product) => {\n    addToCart(product, 1);\n    setLastAddedProduct(product.name);\n    setToastVisible(true);\n  };\n\n  const formatPrice = (price: number) => {\n    return `Rp ${price.toLocaleString(\"id-ID\")}`;\n  };\n\n  const isLoading = categoriesLoading || productsLoading;\n\n  return (\n    <View style={{ flex: 1, backgroundColor: theme.backgroundRoot }}>\n    <ScrollView\n      style={{ flex: 1 }}\n      contentContainerStyle={{\n        paddingTop: headerHeight + Spacing.lg,\n        paddingBottom: tabBarHeight + Spacing.xl + 80,\n      }}\n      scrollIndicatorInsets={{ bottom: insets.bottom }}\n      showsVerticalScrollIndicator={false}\n    >\n      <View style={[styles.searchContainer, { paddingHorizontal: Spacing.lg }]}>\n        <View style={[styles.searchBar, { backgroundColor: theme.backgroundDefault }]}>\n          <Feather name=\"search\" size={20} color={theme.textSecondary} />\n          <TextInput\n            style={[styles.searchInput, { color: theme.text }]}\n            placeholder={t.home.searchPlaceholder}\n            placeholderTextColor={theme.textSecondary}\n          />\n        </View>\n        <Pressable\n          style={[styles.micButton, { backgroundColor: theme.primary }]}\n          onPress={() => navigation.navigate(\"VoiceOrderModal\")}\n        >\n          <Feather name=\"mic\" size={20} color={theme.buttonText} />\n        </Pressable>\n      </View>\n\n      {locationStatus === \"denied\" ? (\n        <Pressable\n          style={[styles.locationBanner, { backgroundColor: theme.warning + \"20\" }]}\n          onPress={requestLocationPermission}\n        >\n          <Feather name=\"map-pin\" size={16} color={theme.warning} />\n          <View style={styles.locationBannerText}>\n            <ThemedText type=\"caption\" style={{ fontWeight: \"600\" }}>\n              {t.home.enableLocationTitle}\n            </ThemedText>\n            <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n              {t.home.enableLocationSubtitle}\n            </ThemedText>\n          </View>\n          <Feather name=\"chevron-right\" size={16} color={theme.textSecondary} />\n        </Pressable>\n      ) : storeAvailable && store ? (\n        <View style={styles.storeInfoContainer}>\n          <View style={[styles.deliveryBadge, { backgroundColor: theme.primary }]}>\n            <Feather name=\"zap\" size={16} color={theme.buttonText} />\n            <ThemedText type=\"caption\" style={{ color: theme.buttonText, fontWeight: \"600\" }}>\n              {estimatedDeliveryMinutes ? `${estimatedDeliveryMinutes}-${t.home.minuteDelivery}` : `15-${t.home.minuteDelivery}`}\n            </ThemedText>\n          </View>\n          <View style={[styles.storeBadge, { backgroundColor: theme.backgroundDefault }]}>\n            <Feather name=\"map-pin\" size={14} color={theme.primary} />\n            <ThemedText type=\"small\" style={{ color: theme.textSecondary }} numberOfLines={1}>\n              {store.name}\n            </ThemedText>\n          </View>\n        </View>\n      ) : isCheckingAvailability ? (\n        <View style={[styles.deliveryBadge, { backgroundColor: theme.backgroundDefault }]}>\n          <ActivityIndicator size=\"small\" color={theme.primary} />\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n            {t.home.findingStore}\n          </ThemedText>\n        </View>\n      ) : locationStatus === \"granted\" && !storeAvailable ? (\n        <View style={[styles.unavailableBanner, { backgroundColor: theme.error + \"20\" }]}>\n          <Feather name=\"alert-circle\" size={16} color={theme.error} />\n          <View style={styles.locationBannerText}>\n            <ThemedText type=\"caption\" style={{ fontWeight: \"600\", color: theme.error }}>\n              {t.home.noStoresNearby}\n            </ThemedText>\n            <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n              {t.home.notAvailableInArea}\n            </ThemedText>\n          </View>\n        </View>\n      ) : (\n        <View style={[styles.deliveryBadge, { backgroundColor: theme.primary }]}>\n          <Feather name=\"zap\" size={16} color={theme.buttonText} />\n          <ThemedText type=\"caption\" style={{ color: theme.buttonText, fontWeight: \"600\" }}>\n            {`15-${t.home.minuteDelivery}`}\n          </ThemedText>\n        </View>\n      )}\n\n      {isLoading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={theme.primary} />\n        </View>\n      ) : null}\n\n      <View style={styles.section}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          {t.home.categories}\n        </ThemedText>\n        <View style={styles.categoriesGrid}>\n          {categories.map((category) => (\n            <Pressable\n              key={category.id}\n              style={styles.categoryItem}\n              onPress={() => handleCategoryPress(category)}\n            >\n              <View style={[styles.categoryIcon, { backgroundColor: category.color + \"20\", overflow: \"hidden\" }]}>\n                {category.image ? (\n                  <Image source={{ uri: getImageUrl(category.image) }} style={styles.categoryImage} />\n                ) : (\n                  <Feather name={category.icon as any} size={24} color={category.color} />\n                )}\n              </View>\n              <ThemedText type=\"small\" style={styles.categoryLabel} numberOfLines={1}>\n                {category.name}\n              </ThemedText>\n            </Pressable>\n          ))}\n        </View>\n      </View>\n\n      <View style={styles.section}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          {t.home.todaysDeals}\n        </ThemedText>\n        <ScrollView\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          contentContainerStyle={styles.promotionsContainer}\n        >\n          {mockPromotions.map((promo, index) => (\n            <Card\n              key={index}\n              style={{ ...styles.promoCard, backgroundColor: promo.color }}\n            >\n              <ThemedText type=\"h3\" style={{ color: \"#FFFFFF\" }}>\n                {promo.title}\n              </ThemedText>\n              <ThemedText type=\"caption\" style={{ color: \"#FFFFFF\", opacity: 0.9 }}>\n                {promo.subtitle}\n              </ThemedText>\n            </Card>\n          ))}\n        </ScrollView>\n      </View>\n\n      <View style={styles.section}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          {t.home.popularItems}\n        </ThemedText>\n        <View style={styles.productsGrid}>\n          {products.slice(0, 6).map((product) => (\n            <Pressable\n              key={product.id}\n              style={[styles.productCard, { backgroundColor: theme.cardBackground }]}\n              onPress={() => handleProductPress(product)}\n            >\n              <View style={[styles.productImageContainer, { backgroundColor: theme.backgroundDefault }]}>\n                {product.image ? (\n                  <Image source={{ uri: getImageUrl(product.image) }} style={styles.productImage} />\n                ) : (\n                  <Feather name=\"package\" size={32} color={theme.textSecondary} />\n                )}\n              </View>\n              <View style={styles.productInfo}>\n                <ThemedText type=\"caption\" numberOfLines={2} style={styles.productName}>\n                  {product.name}\n                </ThemedText>\n                <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n                  {product.brand}\n                </ThemedText>\n                <View style={styles.productPriceRow}>\n                  <ThemedText type=\"body\" style={{ fontWeight: \"600\", color: theme.primary }}>\n                    {formatPrice(product.price)}\n                  </ThemedText>\n                  <Pressable \n                    style={[styles.addButton, { backgroundColor: theme.primary }]}\n                    onPress={(e) => {\n                      e.stopPropagation();\n                      handleAddToCart(product);\n                    }}\n                  >\n                    <Feather name=\"plus\" size={16} color={theme.buttonText} />\n                  </Pressable>\n                </View>\n              </View>\n            </Pressable>\n          ))}\n        </View>\n      </View>\n    </ScrollView>\n\n      <CartToast\n        visible={toastVisible}\n        productName={lastAddedProduct}\n        onDismiss={() => setToastVisible(false)}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  searchContainer: {\n    flexDirection: \"row\",\n    gap: Spacing.sm,\n    marginBottom: Spacing.lg,\n  },\n  searchBar: {\n    flex: 1,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    height: 44,\n    borderRadius: BorderRadius.sm,\n    paddingHorizontal: Spacing.md,\n    gap: Spacing.sm,\n  },\n  searchInput: {\n    flex: 1,\n    fontSize: 16,\n  },\n  micButton: {\n    width: 44,\n    height: 44,\n    borderRadius: BorderRadius.sm,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  storeInfoContainer: {\n    marginHorizontal: Spacing.lg,\n    marginBottom: Spacing.lg,\n    gap: Spacing.sm,\n  },\n  deliveryBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    alignSelf: \"flex-start\",\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n    gap: Spacing.xs,\n  },\n  storeBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    alignSelf: \"flex-start\",\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n    gap: Spacing.xs,\n  },\n  locationBanner: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginHorizontal: Spacing.lg,\n    marginBottom: Spacing.lg,\n    padding: Spacing.md,\n    borderRadius: BorderRadius.sm,\n    gap: Spacing.md,\n  },\n  locationBannerText: {\n    flex: 1,\n  },\n  unavailableBanner: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginHorizontal: Spacing.lg,\n    marginBottom: Spacing.lg,\n    padding: Spacing.md,\n    borderRadius: BorderRadius.sm,\n    gap: Spacing.md,\n  },\n  section: {\n    marginBottom: Spacing.xl,\n  },\n  sectionTitle: {\n    paddingHorizontal: Spacing.lg,\n    marginBottom: Spacing.md,\n  },\n  categoriesGrid: {\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    paddingHorizontal: Spacing.lg,\n    gap: Spacing.md,\n  },\n  categoryItem: {\n    width: \"22%\",\n    alignItems: \"center\",\n  },\n  categoryIcon: {\n    width: 56,\n    height: 56,\n    borderRadius: BorderRadius.sm,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: Spacing.xs,\n  },\n  categoryImage: {\n    width: 56,\n    height: 56,\n    borderRadius: BorderRadius.sm,\n  },\n  categoryLabel: {\n    textAlign: \"center\",\n  },\n  promotionsContainer: {\n    paddingHorizontal: Spacing.lg,\n    gap: Spacing.md,\n  },\n  promoCard: {\n    width: 200,\n    height: 100,\n    marginRight: Spacing.md,\n  },\n  productsGrid: {\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    paddingHorizontal: Spacing.lg,\n    gap: Spacing.md,\n  },\n  productCard: {\n    width: \"47%\",\n    borderRadius: BorderRadius.md,\n    overflow: \"hidden\",\n  },\n  productImageContainer: {\n    height: 100,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    overflow: \"hidden\",\n  },\n  productImage: {\n    width: \"100%\",\n    height: \"100%\",\n    resizeMode: \"cover\",\n  },\n  productInfo: {\n    padding: Spacing.sm,\n  },\n  productName: {\n    marginBottom: Spacing.xs,\n  },\n  productPriceRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    marginTop: Spacing.sm,\n  },\n  addButton: {\n    width: 28,\n    height: 28,\n    borderRadius: 14,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  loadingContainer: {\n    padding: Spacing.xxl,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n","path":null,"size_bytes":15109,"size_tokens":null},"client/screens/OrderSuccessScreen.tsx":{"content":"import React, { useEffect } from \"react\";\nimport { View, StyleSheet } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useNavigation, useRoute, RouteProp } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  withSequence,\n  withDelay,\n} from \"react-native-reanimated\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Button } from \"@/components/Button\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\ntype OrderSuccessRouteProp = RouteProp<RootStackParamList, \"OrderSuccess\">;\n\nexport default function OrderSuccessScreen() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const navigation = useNavigation<NavigationProp>();\n  const route = useRoute<OrderSuccessRouteProp>();\n  const { orderId } = route.params;\n\n  const scale = useSharedValue(0);\n  const opacity = useSharedValue(0);\n\n  useEffect(() => {\n    scale.value = withSequence(\n      withSpring(1.2, { damping: 8 }),\n      withSpring(1, { damping: 12 })\n    );\n    opacity.value = withDelay(300, withSpring(1));\n  }, []);\n\n  const iconAnimatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const contentAnimatedStyle = useAnimatedStyle(() => ({\n    opacity: opacity.value,\n  }));\n\n  const handleTrackOrder = () => {\n    navigation.replace(\"OrderTracking\", { orderId });\n  };\n\n  const handleGoHome = () => {\n    navigation.reset({\n      index: 0,\n      routes: [{ name: \"Main\" }],\n    });\n  };\n\n  return (\n    <ThemedView\n      style={[\n        styles.container,\n        { paddingTop: insets.top + Spacing.xl, paddingBottom: insets.bottom + Spacing.xl },\n      ]}\n    >\n      <View style={styles.content}>\n        <Animated.View\n          style={[styles.iconContainer, { backgroundColor: theme.success }, iconAnimatedStyle]}\n        >\n          <Feather name=\"check\" size={64} color=\"#FFFFFF\" />\n        </Animated.View>\n        \n        <Animated.View style={[styles.textContent, contentAnimatedStyle]}>\n          <View style={[styles.lightningBadge, { backgroundColor: theme.primary }]}>\n            <Feather name=\"zap\" size={20} color={theme.buttonText} />\n          </View>\n          \n          <ThemedText type=\"h1\" style={styles.title}>\n            {t.orderSuccess.title}\n          </ThemedText>\n          \n          <ThemedText type=\"body\" style={[styles.subtitle, { color: theme.textSecondary }]}>\n            {t.orderSuccess.orderConfirmed}\n          </ThemedText>\n          \n          <View style={[styles.orderIdContainer, { backgroundColor: theme.backgroundDefault }]}>\n            <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n              {t.orderSuccess.orderId}\n            </ThemedText>\n            <ThemedText type=\"h3\">{orderId}</ThemedText>\n          </View>\n          \n          <View style={styles.estimateContainer}>\n            <Feather name=\"clock\" size={20} color={theme.primary} />\n            <View style={styles.estimateText}>\n              <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n                {t.orderSuccess.estimatedDelivery}\n              </ThemedText>\n              <ThemedText type=\"h2\" style={{ color: theme.primary }}>\n                15 {t.orderSuccess.minutes}\n              </ThemedText>\n            </View>\n          </View>\n        </Animated.View>\n      </View>\n      \n      <View style={styles.footer}>\n        <Button onPress={handleTrackOrder}>{t.orderSuccess.trackOrder}</Button>\n        <Button variant=\"text\" onPress={handleGoHome}>\n          {t.orderSuccess.backToHome}\n        </Button>\n      </View>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingHorizontal: Spacing.xl,\n  },\n  iconContainer: {\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: Spacing.xxl,\n  },\n  textContent: {\n    alignItems: \"center\",\n  },\n  lightningBadge: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: Spacing.lg,\n  },\n  title: {\n    textAlign: \"center\",\n    marginBottom: Spacing.sm,\n  },\n  subtitle: {\n    textAlign: \"center\",\n    marginBottom: Spacing.xl,\n  },\n  orderIdContainer: {\n    alignItems: \"center\",\n    paddingVertical: Spacing.lg,\n    paddingHorizontal: Spacing.xxl,\n    borderRadius: 12,\n    marginBottom: Spacing.xl,\n  },\n  estimateContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.md,\n  },\n  estimateText: {\n    alignItems: \"flex-start\",\n  },\n  footer: {\n    paddingHorizontal: Spacing.lg,\n    gap: Spacing.sm,\n  },\n});\n","path":null,"size_bytes":5223,"size_tokens":null},"scripts/build.js":{"content":"const fs = require(\"fs\");\nconst path = require(\"path\");\nconst { spawn } = require(\"child_process\");\nconst { Readable } = require(\"stream\");\nconst { pipeline } = require(\"stream/promises\");\n\nlet metroProcess = null;\n\nfunction exitWithError(message) {\n  console.error(message);\n  if (metroProcess) {\n    metroProcess.kill();\n  }\n  process.exit(1);\n}\n\nfunction setupSignalHandlers() {\n  const cleanup = () => {\n    if (metroProcess) {\n      console.log(\"Cleaning up Metro process...\");\n      metroProcess.kill();\n    }\n    process.exit(0);\n  };\n\n  process.on(\"SIGINT\", cleanup);\n  process.on(\"SIGTERM\", cleanup);\n  process.on(\"SIGHUP\", cleanup);\n}\n\nfunction getDeploymentUrl() {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    console.log(\"Using REPLIT_INTERNAL_APP_DOMAIN:\", url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    console.log(\"Using REPLIT_DEV_DOMAIN:\", url);\n    return url;\n  }\n\n  console.error(\n    \"ERROR: REPLIT_INTERNAL_APP_DOMAIN and REPLIT_DEV_DOMAIN not set\",\n  );\n  process.exit(1);\n}\n\nfunction prepareDirectories(timestamp) {\n  console.log(\"Preparing build directories...\");\n\n  if (fs.existsSync(\"static-build\")) {\n    fs.rmSync(\"static-build\", { recursive: true });\n  }\n\n  const dirs = [\n    path.join(\"static-build\", timestamp, \"_expo\", \"static\", \"js\", \"ios\"),\n    path.join(\"static-build\", timestamp, \"_expo\", \"static\", \"js\", \"android\"),\n    path.join(\"static-build\", \"ios\"),\n    path.join(\"static-build\", \"android\"),\n  ];\n\n  for (const dir of dirs) {\n    fs.mkdirSync(dir, { recursive: true });\n  }\n\n  console.log(\"Build:\", timestamp);\n}\n\nfunction clearMetroCache() {\n  console.log(\"Clearing Metro cache...\");\n\n  const cacheDirs = [\n    ...fs.globSync(\".metro-cache\"),\n    ...fs.globSync(\"node_modules/.cache/metro\"),\n  ];\n\n  for (const dir of cacheDirs) {\n    fs.rmSync(dir, { recursive: true, force: true });\n  }\n\n  console.log(\"Cache cleared\");\n}\n\nasync function checkMetroHealth() {\n  try {\n    const response = await fetch(\"http://localhost:8081/status\", {\n      signal: AbortSignal.timeout(5000),\n    });\n    return response.ok;\n  } catch {\n    return false;\n  }\n}\n\nasync function startMetro() {\n  const isRunning = await checkMetroHealth();\n  if (isRunning) {\n    console.log(\"Metro already running\");\n    return;\n  }\n\n  console.log(\"Starting Metro...\");\n  metroProcess = spawn(\"npm\", [\"run\", \"expo:start:static:build\"], {\n    stdio: [\"ignore\", \"pipe\", \"pipe\"],\n    detached: false,\n  });\n\n  if (metroProcess.stdout) {\n    metroProcess.stdout.on(\"data\", (data) => {\n      const output = data.toString().trim();\n      if (output) console.log(`[Metro] ${output}`);\n    });\n  }\n  if (metroProcess.stderr) {\n    metroProcess.stderr.on(\"data\", (data) => {\n      const output = data.toString().trim();\n      if (output) console.error(`[Metro Error] ${output}`);\n    });\n  }\n\n  for (let i = 0; i < 60; i++) {\n    await new Promise((resolve) => setTimeout(resolve, 1000));\n\n    const healthy = await checkMetroHealth();\n    if (healthy) {\n      console.log(\"Metro ready\");\n      return;\n    }\n  }\n\n  console.error(\"Metro timeout\");\n  process.exit(1);\n}\n\nasync function downloadFile(url, outputPath) {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), 120_000);\n\n  try {\n    console.log(`Downloading: ${url}`);\n    const response = await fetch(url, { signal: controller.signal });\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n\n    const file = fs.createWriteStream(outputPath);\n    await pipeline(Readable.fromWeb(response.body), file);\n\n    const fileSize = fs.statSync(outputPath).size;\n\n    if (fileSize === 0) {\n      fs.unlinkSync(outputPath);\n      throw new Error(\"Downloaded file is empty\");\n    }\n  } catch (error) {\n    if (fs.existsSync(outputPath)) {\n      fs.unlinkSync(outputPath);\n    }\n\n    if (error.name === \"AbortError\") {\n      throw new Error(`Download timeout after 2m: ${url}`);\n    }\n    throw error;\n  } finally {\n    clearTimeout(timeoutId);\n  }\n}\n\nasync function downloadBundle(platform, timestamp) {\n  const url = new URL(\"http://localhost:8081/client/index.bundle\");\n  url.searchParams.set(\"platform\", platform);\n  url.searchParams.set(\"dev\", \"false\");\n  url.searchParams.set(\"hot\", \"false\");\n  url.searchParams.set(\"lazy\", \"false\");\n  url.searchParams.set(\"minify\", \"true\");\n\n  const output = path.join(\n    \"static-build\",\n    timestamp,\n    \"_expo\",\n    \"static\",\n    \"js\",\n    platform,\n    \"bundle.js\",\n  );\n\n  console.log(`Fetching ${platform} bundle...`);\n  await downloadFile(url.toString(), output);\n  console.log(`${platform} bundle ready`);\n}\n\nasync function downloadManifest(platform) {\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), 300_000);\n\n  try {\n    console.log(`Fetching ${platform} manifest...`);\n    const response = await fetch(\"http://localhost:8081/manifest\", {\n      headers: { \"expo-platform\": platform },\n      signal: controller.signal,\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n\n    const manifest = await response.json();\n    console.log(`${platform} manifest ready`);\n    return manifest;\n  } catch (error) {\n    if (error.name === \"AbortError\") {\n      throw new Error(\n        `Manifest download timeout after 5m for platform: ${platform}`,\n      );\n    }\n    throw error;\n  } finally {\n    clearTimeout(timeoutId);\n  }\n}\n\nasync function downloadBundlesAndManifests(timestamp) {\n  console.log(\"Downloading bundles and manifests...\");\n  console.log(\"This may take several minutes for production builds...\");\n\n  try {\n    const results = await Promise.allSettled([\n      downloadBundle(\"ios\", timestamp),\n      downloadBundle(\"android\", timestamp),\n      downloadManifest(\"ios\"),\n      downloadManifest(\"android\"),\n    ]);\n\n    const failures = results\n      .map((result, index) => ({ result, index }))\n      .filter(({ result }) => result.status === \"rejected\");\n\n    if (failures.length > 0) {\n      const errorMessages = failures.map(({ result, index }) => {\n        const names = [\n          \"iOS bundle\",\n          \"Android bundle\",\n          \"iOS manifest\",\n          \"Android manifest\",\n        ];\n        return `  - ${names[index]}: ${result.reason?.message || result.reason}`;\n      });\n\n      exitWithError(`Download failed:\\n${errorMessages.join(\"\\n\")}`);\n    }\n\n    const iosManifest =\n      results[2].status === \"fulfilled\" ? results[2].value : null;\n    const androidManifest =\n      results[3].status === \"fulfilled\" ? results[3].value : null;\n\n    console.log(\"All downloads completed successfully\");\n    return { ios: iosManifest, android: androidManifest };\n  } catch (error) {\n    exitWithError(`Unexpected download error: ${error.message}`);\n  }\n}\n\nfunction extractAssets(timestamp) {\n  const bundles = {\n    ios: fs.readFileSync(\n      path.join(\n        \"static-build\",\n        timestamp,\n        \"_expo\",\n        \"static\",\n        \"js\",\n        \"ios\",\n        \"bundle.js\",\n      ),\n      \"utf-8\",\n    ),\n    android: fs.readFileSync(\n      path.join(\n        \"static-build\",\n        timestamp,\n        \"_expo\",\n        \"static\",\n        \"js\",\n        \"android\",\n        \"bundle.js\",\n      ),\n      \"utf-8\",\n    ),\n  };\n\n  const assetsMap = new Map();\n  const assetPattern =\n    /httpServerLocation:\"([^\"]+)\"[^}]*hash:\"([^\"]+)\"[^}]*name:\"([^\"]+)\"[^}]*type:\"([^\"]+)\"/g;\n\n  const extractFromBundle = (bundle, platform) => {\n    for (const match of bundle.matchAll(assetPattern)) {\n      const originalPath = match[1];\n      const filename = match[3] + \".\" + match[4];\n\n      const tempUrl = new URL(`http://localhost:8081${originalPath}`);\n      const unstablePath = tempUrl.searchParams.get(\"unstable_path\");\n\n      if (!unstablePath) {\n        throw new Error(`Asset missing unstable_path: ${originalPath}`);\n      }\n\n      const decodedPath = decodeURIComponent(unstablePath);\n      const key = path.posix.join(decodedPath, filename);\n\n      if (!assetsMap.has(key)) {\n        const asset = {\n          url: path.posix.join(\"/\", decodedPath, filename),\n          originalPath: originalPath,\n          filename: filename,\n          relativePath: decodedPath,\n          hash: match[2],\n          platforms: new Set(),\n        };\n\n        assetsMap.set(key, asset);\n      }\n      assetsMap.get(key).platforms.add(platform);\n    }\n  };\n\n  extractFromBundle(bundles.ios, \"ios\");\n  extractFromBundle(bundles.android, \"android\");\n\n  return Array.from(assetsMap.values());\n}\n\nasync function downloadAssets(assets, timestamp) {\n  if (assets.length === 0) {\n    return 0;\n  }\n\n  console.log(\"Downloading assets...\");\n  let successCount = 0;\n  const failures = [];\n\n  const downloadPromises = assets.map(async (asset) => {\n    const platform = Array.from(asset.platforms)[0];\n\n    const tempUrl = new URL(`http://localhost:8081${asset.originalPath}`);\n    const unstablePath = tempUrl.searchParams.get(\"unstable_path\");\n\n    if (!unstablePath) {\n      throw new Error(`Asset missing unstable_path: ${asset.originalPath}`);\n    }\n\n    const decodedPath = decodeURIComponent(unstablePath);\n    const metroUrl = new URL(\n      `http://localhost:8081${path.posix.join(\"/assets\", decodedPath, asset.filename)}`,\n    );\n    metroUrl.searchParams.set(\"platform\", platform);\n    metroUrl.searchParams.set(\"hash\", asset.hash);\n\n    const outputDir = path.join(\n      \"static-build\",\n      timestamp,\n      \"_expo\",\n      \"static\",\n      \"js\",\n      asset.relativePath,\n    );\n    fs.mkdirSync(outputDir, { recursive: true });\n    const output = path.join(outputDir, asset.filename);\n\n    try {\n      await downloadFile(metroUrl.toString(), output);\n      successCount++;\n    } catch (error) {\n      failures.push({\n        filename: asset.filename,\n        error: error.message,\n        url: metroUrl.toString(),\n      });\n    }\n  });\n\n  await Promise.all(downloadPromises);\n\n  if (failures.length > 0) {\n    const errorMsg =\n      `Failed to download ${failures.length} asset(s):\\n` +\n      failures\n        .map((f) => `  - ${f.filename}: ${f.error} (${f.url})`)\n        .join(\"\\n\");\n    exitWithError(errorMsg);\n  }\n\n  console.log(`Downloaded ${successCount} assets`);\n  return successCount;\n}\n\nfunction updateBundleUrls(timestamp, baseUrl) {\n  const updateForPlatform = (platform) => {\n    const bundlePath = path.join(\n      \"static-build\",\n      timestamp,\n      \"_expo\",\n      \"static\",\n      \"js\",\n      platform,\n      \"bundle.js\",\n    );\n    let bundle = fs.readFileSync(bundlePath, \"utf-8\");\n\n    bundle = bundle.replace(\n      /httpServerLocation:\"(\\/[^\"]+)\"/g,\n      (_match, capturedPath) => {\n        const tempUrl = new URL(`http://localhost:8081${capturedPath}`);\n        const unstablePath = tempUrl.searchParams.get(\"unstable_path\");\n\n        if (!unstablePath) {\n          throw new Error(\n            `Asset missing unstable_path in bundle: ${capturedPath}`,\n          );\n        }\n\n        const decodedPath = decodeURIComponent(unstablePath);\n        return `httpServerLocation:\"${baseUrl}/${timestamp}/_expo/static/js/${decodedPath}\"`;\n      },\n    );\n\n    fs.writeFileSync(bundlePath, bundle);\n  };\n\n  updateForPlatform(\"ios\");\n  updateForPlatform(\"android\");\n  console.log(\"Updated bundle URLs\");\n}\n\nfunction updateManifests(manifests, timestamp, baseUrl, assetsByHash) {\n  const updateForPlatform = (platform, manifest) => {\n    if (!manifest.launchAsset || !manifest.extra) {\n      exitWithError(`Malformed manifest for ${platform}`);\n    }\n\n    manifest.launchAsset.url = `${baseUrl}/${timestamp}/_expo/static/js/${platform}/bundle.js`;\n    manifest.launchAsset.key = `bundle-${timestamp}`;\n    manifest.createdAt = new Date(\n      Number(timestamp.split(\"-\")[0]),\n    ).toISOString();\n    manifest.extra.expoClient.hostUri =\n      baseUrl.replace(\"https://\", \"\") + \"/\" + platform;\n    manifest.extra.expoGo.debuggerHost =\n      baseUrl.replace(\"https://\", \"\") + \"/\" + platform;\n    manifest.extra.expoGo.packagerOpts.dev = false;\n\n    if (manifest.assets && manifest.assets.length > 0) {\n      manifest.assets.forEach((asset) => {\n        if (!asset.url) return;\n\n        const hash = asset.hash;\n        if (!hash) return;\n\n        const assetInfo = assetsByHash.get(hash);\n        if (!assetInfo) return;\n\n        asset.url = `${baseUrl}/${timestamp}/_expo/static/js/${assetInfo.relativePath}/${assetInfo.filename}`;\n      });\n    }\n\n    fs.writeFileSync(\n      path.join(\"static-build\", platform, \"manifest.json\"),\n      JSON.stringify(manifest, null, 2),\n    );\n  };\n\n  updateForPlatform(\"ios\", manifests.ios);\n  updateForPlatform(\"android\", manifests.android);\n  console.log(\"Manifests updated\");\n}\n\nasync function main() {\n  console.log(\"Building static Expo Go deployment...\");\n\n  setupSignalHandlers();\n\n  const baseUrl = getDeploymentUrl();\n  const timestamp = `${Date.now()}-${process.pid}`;\n\n  prepareDirectories(timestamp);\n  clearMetroCache();\n\n  await startMetro();\n\n  const downloadTimeout = 300000;\n  const downloadPromise = downloadBundlesAndManifests(timestamp);\n  const timeoutPromise = new Promise((_, reject) => {\n    setTimeout(() => {\n      reject(\n        new Error(\n          `Overall download timeout after ${downloadTimeout / 1000} seconds. ` +\n            \"Metro may be struggling to generate bundles. Check Metro logs above.\",\n        ),\n      );\n    }, downloadTimeout);\n  });\n\n  const manifests = await Promise.race([downloadPromise, timeoutPromise]);\n\n  console.log(\"Processing assets...\");\n  const assets = extractAssets(timestamp);\n  console.log(\"Found\", assets.length, \"unique asset(s)\");\n\n  const assetsByHash = new Map();\n  for (const asset of assets) {\n    assetsByHash.set(asset.hash, {\n      relativePath: asset.relativePath,\n      filename: asset.filename,\n    });\n  }\n\n  const assetCount = await downloadAssets(assets, timestamp);\n\n  if (assetCount > 0) {\n    updateBundleUrls(timestamp, baseUrl);\n  }\n\n  console.log(\"Updating manifests and creating landing page...\");\n  updateManifests(manifests, timestamp, baseUrl, assetsByHash);\n\n  console.log(\"Build complete! Deploy to:\", baseUrl);\n\n  if (metroProcess) {\n    metroProcess.kill();\n  }\n  process.exit(0);\n}\n\nmain().catch((error) => {\n  console.error(\"Build failed:\", error.message);\n  if (metroProcess) {\n    metroProcess.kill();\n  }\n  process.exit(1);\n});\n","path":null,"size_bytes":14413,"size_tokens":null},"client/hooks/useTheme.ts":{"content":"import { Colors } from \"@/constants/theme\";\nimport { useColorScheme } from \"@/hooks/useColorScheme\";\n\nexport function useTheme() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === \"dark\";\n  const theme = Colors[colorScheme ?? \"light\"];\n\n  return {\n    theme,\n    isDark,\n  };\n}\n","path":null,"size_bytes":302,"size_tokens":null},"replit.md":{"content":"# KilatGo - 15-Minute Grocery Delivery App\n\n## Overview\nKilatGo is a 15-minute grocery delivery app for the Indonesian market featuring voice ordering, real-time tracking, store management, and a clean Indonesian-friendly design inspired by GoJek and Tokopedia.\n\n## Current State: MVP with Full Backend Integration\n\n### Features Implemented\n- **Home Screen**: Category browsing, Today's Deals, Popular Items with location-aware store display\n- **Voice Order Modal**: Web Speech API for voice-to-text ordering (64px FAB)\n- **Voice Confirm Screen**: Review parsed voice items, add to cart (never auto-places orders)\n- **Product Browsing**: Categories with products, add to cart functionality\n- **Shopping Cart**: Item management, quantity controls, checkout flow\n- **Checkout**: COD payment option when eligible, real API integration\n- **Order Tracking**: Rider tracking with store assignment\n- **Account Screen**: User profile with logout, admin dashboard access\n- **Admin Dashboard**: Read-only store/staff/order metrics\n- **Phone OTP Authentication**: Real OTP verification flow with 6-digit codes\n- **Apple Sign-In**: Native Apple authentication (iOS only)\n\n### Backend Features\n- **Store Management**: Stores with location, COD eligibility, active status\n- **Staff System**: Pickers and drivers with online/offline status\n- **Store Inventory**: Products linked to stores with stock tracking\n- **Order Assignment**: Nearest available store with picker/driver assignment\n- **Location Services**: Haversine distance calculation for store availability\n- **COD Validation**: Cash on delivery based on store settings\n\n### Design System\n- **Primary Colors**: Lightning Yellow (#FFD700), Fresh Blue (#4A90E2)\n- **Style**: Indonesian-friendly, flat design, minimal shadows, rounded corners (12-20px)\n- **Navigation**: 4-tab structure (Home, Orders, Voice FAB, Account)\n\n## Technical Stack\n- **Frontend**: React Native / Expo (Mobile-first)\n- **Backend**: Express.js with TypeScript\n- **Database**: PostgreSQL with Drizzle ORM\n- **UI Framework**: React Navigation 7+, iOS 26 Liquid Glass design\n\n## Key Files\n- `client/constants/theme.ts` - Design system colors and spacing\n- `client/navigation/MainTabNavigator.tsx` - Tab navigation structure\n- `client/screens/HomeScreen.tsx` - Main home screen with location banner\n- `client/screens/VoiceOrderModal.tsx` - Voice ordering interface\n- `client/screens/VoiceConfirmScreen.tsx` - Voice order confirmation\n- `client/screens/CheckoutScreen.tsx` - Checkout with COD support\n- `client/screens/AdminDashboardScreen.tsx` - Admin metrics dashboard\n- `client/context/LocationContext.tsx` - Location permissions and store availability\n- `server/routes.ts` - API routes including order creation and admin metrics\n- `server/storeAvailability.ts` - Store availability service\n- `server/storage.ts` - Database operations\n- `shared/schema.ts` - Database schema (users, stores, storeStaff, storeInventory, orders)\n- `design_guidelines.md` - Full design guidelines\n\n## API Endpoints\n- `GET /api/categories` - List categories\n- `GET /api/products` - List products\n- `GET /api/stores` - List all stores\n- `GET /api/stores/available?lat=&lng=` - Check nearest available store\n- `GET /api/stores/:id/staff` - Get store staff\n- `POST /api/orders` - Create order with store/staff assignment\n- `GET /api/admin/metrics` - Admin dashboard metrics\n- `POST /api/staff/toggle-status` - Toggle staff online/offline\n- `POST /api/auth/otp/send` - Send OTP to phone number\n- `POST /api/auth/otp/verify` - Verify OTP and login/register\n- `POST /api/auth/apple` - Apple Sign-In authentication\n\n## Project Structure\n```\nclient/           # Expo/React Native mobile app\n  screens/        # Screen components\n  components/     # Reusable UI components\n  navigation/     # Navigation structure\n  context/        # React contexts (LocationContext)\n  constants/      # Theme and design tokens\nserver/           # Express backend\n  routes.ts       # API routes\n  storage.ts      # Database operations\n  storeAvailability.ts # Store availability logic\nshared/           # Shared types between client/server\n  schema.ts       # Drizzle ORM database schema\n```\n\n## Development\n- Run: `npm run all:dev`\n- Expo on port 8081, Express on port 5000\n- Scan QR code in Replit URL bar menu for Expo Go testing\n","path":null,"size_bytes":4299,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/constants/theme.ts":{"content":"import { Platform } from \"react-native\";\n\nexport const Colors = {\n  light: {\n    text: \"#2C3E50\",\n    textSecondary: \"#7F8C8D\",\n    buttonText: \"#2C3E50\",\n    tabIconDefault: \"#7F8C8D\",\n    tabIconSelected: \"#FFD700\",\n    link: \"#4A90E2\",\n    backgroundRoot: \"#FFFFFF\",\n    backgroundDefault: \"#F5F5F5\",\n    backgroundSecondary: \"#EBEBEB\",\n    backgroundTertiary: \"#E0E0E0\",\n    primary: \"#FFD700\",\n    primaryDark: \"#E6C200\",\n    secondary: \"#4A90E2\",\n    success: \"#4CAF50\",\n    warning: \"#FF9800\",\n    error: \"#F44336\",\n    border: \"#E0E0E0\",\n    cardBackground: \"#FFFFFF\",\n  },\n  dark: {\n    text: \"#ECEDEE\",\n    textSecondary: \"#9BA1A6\",\n    buttonText: \"#2C3E50\",\n    tabIconDefault: \"#9BA1A6\",\n    tabIconSelected: \"#FFD700\",\n    link: \"#5BA3F5\",\n    backgroundRoot: \"#1A1A1A\",\n    backgroundDefault: \"#242424\",\n    backgroundSecondary: \"#2E2E2E\",\n    backgroundTertiary: \"#383838\",\n    primary: \"#FFD700\",\n    primaryDark: \"#E6C200\",\n    secondary: \"#5BA3F5\",\n    success: \"#66BB6A\",\n    warning: \"#FFA726\",\n    error: \"#EF5350\",\n    border: \"#383838\",\n    cardBackground: \"#242424\",\n  },\n};\n\nexport const Spacing = {\n  xs: 4,\n  sm: 8,\n  md: 12,\n  lg: 16,\n  xl: 24,\n  xxl: 32,\n  inputHeight: 52,\n  buttonHeight: 52,\n};\n\nexport const BorderRadius = {\n  xs: 8,\n  sm: 12,\n  md: 16,\n  lg: 20,\n  xl: 24,\n  full: 9999,\n};\n\nexport const Typography = {\n  h1: {\n    fontSize: 28,\n    fontWeight: \"600\" as const,\n  },\n  h2: {\n    fontSize: 22,\n    fontWeight: \"600\" as const,\n  },\n  h3: {\n    fontSize: 18,\n    fontWeight: \"500\" as const,\n  },\n  body: {\n    fontSize: 16,\n    fontWeight: \"400\" as const,\n  },\n  caption: {\n    fontSize: 14,\n    fontWeight: \"400\" as const,\n  },\n  button: {\n    fontSize: 16,\n    fontWeight: \"600\" as const,\n  },\n  small: {\n    fontSize: 12,\n    fontWeight: \"400\" as const,\n  },\n};\n\nexport const Fonts = Platform.select({\n  ios: {\n    sans: \"system-ui\",\n    serif: \"ui-serif\",\n    rounded: \"ui-rounded\",\n    mono: \"ui-monospace\",\n  },\n  default: {\n    sans: \"normal\",\n    serif: \"serif\",\n    rounded: \"normal\",\n    mono: \"monospace\",\n  },\n  web: {\n    sans: \"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif\",\n    serif: \"Georgia, 'Times New Roman', serif\",\n    rounded:\n      \"'SF Pro Rounded', 'Hiragino Maru Gothic ProN', Meiryo, 'MS PGothic', sans-serif\",\n    mono: \"SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace\",\n  },\n});\n\nconst shadowStyles = {\n  small: {\n    web: { boxShadow: \"0px 2px 4px rgba(0, 0, 0, 0.1)\" },\n    native: {\n      shadowColor: \"#000\",\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 2,\n      elevation: 2,\n    },\n  },\n  medium: {\n    web: { boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.12)\" },\n    native: {\n      shadowColor: \"#000\",\n      shadowOffset: { width: 0, height: 4 },\n      shadowOpacity: 0.12,\n      shadowRadius: 6,\n      elevation: 4,\n    },\n  },\n  fab: {\n    web: { boxShadow: \"0px 4px 16px rgba(0, 0, 0, 0.2)\" },\n    native: {\n      shadowColor: \"#000\",\n      shadowOffset: { width: 0, height: 4 },\n      shadowOpacity: 0.2,\n      shadowRadius: 8,\n      elevation: 8,\n    },\n  },\n};\n\nexport const Shadows = {\n  get small() {\n    return Platform.OS === \"web\" ? shadowStyles.small.web : shadowStyles.small.native;\n  },\n  get medium() {\n    return Platform.OS === \"web\" ? shadowStyles.medium.web : shadowStyles.medium.native;\n  },\n  get fab() {\n    return Platform.OS === \"web\" ? shadowStyles.fab.web : shadowStyles.fab.native;\n  },\n};\n","path":null,"size_bytes":3530,"size_tokens":null},"client/components/ThemedView.tsx":{"content":"import { View, type ViewProps } from \"react-native\";\n\nimport { useTheme } from \"@/hooks/useTheme\";\n\nexport type ThemedViewProps = ViewProps & {\n  lightColor?: string;\n  darkColor?: string;\n};\n\nexport function ThemedView({\n  style,\n  lightColor,\n  darkColor,\n  ...otherProps\n}: ThemedViewProps) {\n  const { theme, isDark } = useTheme();\n\n  const backgroundColor =\n    isDark && darkColor\n      ? darkColor\n      : !isDark && lightColor\n        ? lightColor\n        : theme.backgroundRoot;\n\n  return <View style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n","path":null,"size_bytes":563,"size_tokens":null},"server/index.ts":{"content":"import express from \"express\";\nimport type { Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n\nconst app = express();\nconst log = console.log;\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\nfunction setupCors(app: express.Application) {\n  app.use((req, res, next) => {\n    const origins = new Set<string>();\n\n    if (process.env.REPLIT_DEV_DOMAIN) {\n      origins.add(`https://${process.env.REPLIT_DEV_DOMAIN}`);\n    }\n\n    if (process.env.REPLIT_DOMAINS) {\n      process.env.REPLIT_DOMAINS.split(\",\").forEach((d) => {\n        origins.add(`https://${d.trim()}`);\n      });\n    }\n\n    const origin = req.header(\"origin\");\n\n    if (origin && origins.has(origin)) {\n      res.header(\"Access-Control-Allow-Origin\", origin);\n      res.header(\n        \"Access-Control-Allow-Methods\",\n        \"GET, POST, PUT, DELETE, OPTIONS\",\n      );\n      res.header(\"Access-Control-Allow-Headers\", \"Content-Type\");\n      res.header(\"Access-Control-Allow-Credentials\", \"true\");\n    }\n\n    if (req.method === \"OPTIONS\") {\n      return res.sendStatus(200);\n    }\n\n    next();\n  });\n}\n\nfunction setupBodyParsing(app: express.Application) {\n  app.use(\n    express.json({\n      verify: (req, _res, buf) => {\n        req.rawBody = buf;\n      },\n    }),\n  );\n\n  app.use(express.urlencoded({ extended: false }));\n}\n\nfunction setupRequestLogging(app: express.Application) {\n  app.use((req, res, next) => {\n    const start = Date.now();\n    const path = req.path;\n    let capturedJsonResponse: Record<string, unknown> | undefined = undefined;\n\n    const originalResJson = res.json;\n    res.json = function (bodyJson, ...args) {\n      capturedJsonResponse = bodyJson;\n      return originalResJson.apply(res, [bodyJson, ...args]);\n    };\n\n    res.on(\"finish\", () => {\n      if (!path.startsWith(\"/api\")) return;\n\n      const duration = Date.now() - start;\n\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    });\n\n    next();\n  });\n}\n\nfunction getAppName(): string {\n  try {\n    const appJsonPath = path.resolve(process.cwd(), \"app.json\");\n    const appJsonContent = fs.readFileSync(appJsonPath, \"utf-8\");\n    const appJson = JSON.parse(appJsonContent);\n    return appJson.expo?.name || \"App Landing Page\";\n  } catch {\n    return \"App Landing Page\";\n  }\n}\n\nfunction serveExpoManifest(platform: string, res: Response) {\n  const manifestPath = path.resolve(\n    process.cwd(),\n    \"static-build\",\n    platform,\n    \"manifest.json\",\n  );\n\n  if (!fs.existsSync(manifestPath)) {\n    return res\n      .status(404)\n      .json({ error: `Manifest not found for platform: ${platform}` });\n  }\n\n  res.setHeader(\"expo-protocol-version\", \"1\");\n  res.setHeader(\"expo-sfv-version\", \"0\");\n  res.setHeader(\"content-type\", \"application/json\");\n\n  const manifest = fs.readFileSync(manifestPath, \"utf-8\");\n  res.send(manifest);\n}\n\nfunction serveLandingPage({\n  req,\n  res,\n  landingPageTemplate,\n  appName,\n}: {\n  req: Request;\n  res: Response;\n  landingPageTemplate: string;\n  appName: string;\n}) {\n  const forwardedProto = req.header(\"x-forwarded-proto\");\n  const protocol = forwardedProto || req.protocol || \"https\";\n  const forwardedHost = req.header(\"x-forwarded-host\");\n  const host = forwardedHost || req.get(\"host\");\n  const baseUrl = `${protocol}://${host}`;\n  const expsUrl = `${host}`;\n\n  log(`baseUrl`, baseUrl);\n  log(`expsUrl`, expsUrl);\n\n  const html = landingPageTemplate\n    .replace(/BASE_URL_PLACEHOLDER/g, baseUrl)\n    .replace(/EXPS_URL_PLACEHOLDER/g, expsUrl)\n    .replace(/APP_NAME_PLACEHOLDER/g, appName);\n\n  res.setHeader(\"Content-Type\", \"text/html; charset=utf-8\");\n  res.status(200).send(html);\n}\n\nfunction configureExpoAndLanding(app: express.Application) {\n  const templatePath = path.resolve(\n    process.cwd(),\n    \"server\",\n    \"templates\",\n    \"landing-page.html\",\n  );\n  const landingPageTemplate = fs.readFileSync(templatePath, \"utf-8\");\n  const appName = getAppName();\n\n  log(\"Serving static Expo files with dynamic manifest routing\");\n\n  app.use((req: Request, res: Response, next: NextFunction) => {\n    if (req.path.startsWith(\"/api\")) {\n      return next();\n    }\n\n    if (req.path !== \"/\" && req.path !== \"/manifest\") {\n      return next();\n    }\n\n    const platform = req.header(\"expo-platform\");\n    if (platform && (platform === \"ios\" || platform === \"android\")) {\n      return serveExpoManifest(platform, res);\n    }\n\n    if (req.path === \"/\") {\n      return serveLandingPage({\n        req,\n        res,\n        landingPageTemplate,\n        appName,\n      });\n    }\n\n    next();\n  });\n\n  app.use(\"/assets\", express.static(path.resolve(process.cwd(), \"assets\")));\n  app.use(\"/images\", express.static(path.resolve(process.cwd(), \"attached_assets/stock_images\")));\n  app.use(express.static(path.resolve(process.cwd(), \"static-build\")));\n\n  log(\"Expo routing: Checking expo-platform header on / and /manifest\");\n}\n\nfunction setupErrorHandler(app: express.Application) {\n  app.use((err: unknown, _req: Request, res: Response, _next: NextFunction) => {\n    const error = err as {\n      status?: number;\n      statusCode?: number;\n      message?: string;\n    };\n\n    const status = error.status || error.statusCode || 500;\n    const message = error.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n\n    throw err;\n  });\n}\n\n(async () => {\n  setupCors(app);\n  setupBodyParsing(app);\n  setupRequestLogging(app);\n\n  configureExpoAndLanding(app);\n\n  const server = await registerRoutes(app);\n\n  setupErrorHandler(app);\n\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  server.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`express server serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":6048,"size_tokens":null},"client/components/Spacer.tsx":{"content":"import { View } from \"react-native\";\n\ntype Props = {\n  width?: number;\n  height?: number;\n};\n\nexport default function Spacer(props: Props) {\n  const width: number = props.width ?? 1;\n  const height: number = props.height ?? 1;\n\n  return (\n    <View\n      style={{\n        width,\n        height,\n      }}\n    />\n  );\n}\n","path":null,"size_bytes":318,"size_tokens":null},"client/screens/OrderTrackingScreen.tsx":{"content":"import React, { useEffect, useState } from \"react\";\nimport { View, StyleSheet, Pressable, Dimensions } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { useRoute, RouteProp } from \"@react-navigation/native\";\nimport { Feather } from \"@expo/vector-icons\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withRepeat,\n  withTiming,\n  withSequence,\n} from \"react-native-reanimated\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing, BorderRadius, Shadows } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { mockRider } from \"@/data/mockData\";\n\ntype OrderTrackingRouteProp = RouteProp<RootStackParamList, \"OrderTracking\">;\n\nconst { width, height } = Dimensions.get(\"window\");\n\nexport default function OrderTrackingScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const route = useRoute<OrderTrackingRouteProp>();\n  const { orderId } = route.params;\n  \n  const [status, setStatus] = useState<\"preparing\" | \"picked_up\" | \"on_the_way\" | \"arriving\">(\"preparing\");\n  const pulseScale = useSharedValue(1);\n  const riderPosition = useSharedValue(0);\n\n  useEffect(() => {\n    pulseScale.value = withRepeat(\n      withSequence(\n        withTiming(1.2, { duration: 1000 }),\n        withTiming(1, { duration: 1000 })\n      ),\n      -1,\n      true\n    );\n\n    riderPosition.value = withRepeat(\n      withSequence(\n        withTiming(1, { duration: 5000 }),\n        withTiming(0, { duration: 5000 })\n      ),\n      -1,\n      true\n    );\n\n    const statusTimer = setTimeout(() => {\n      setStatus(\"picked_up\");\n    }, 3000);\n\n    const statusTimer2 = setTimeout(() => {\n      setStatus(\"on_the_way\");\n    }, 6000);\n\n    const statusTimer3 = setTimeout(() => {\n      setStatus(\"arriving\");\n    }, 10000);\n\n    return () => {\n      clearTimeout(statusTimer);\n      clearTimeout(statusTimer2);\n      clearTimeout(statusTimer3);\n    };\n  }, []);\n\n  const pulseAnimatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: pulseScale.value }],\n  }));\n\n  const riderAnimatedStyle = useAnimatedStyle(() => ({\n    left: 20 + riderPosition.value * (width - 80),\n  }));\n\n  const getStatusText = () => {\n    switch (status) {\n      case \"preparing\":\n        return t.tracking.preparingOrder;\n      case \"picked_up\":\n        return t.tracking.riderPickedUp;\n      case \"on_the_way\":\n        return t.tracking.onTheWayToYou;\n      case \"arriving\":\n        return t.tracking.almostThere;\n      default:\n        return \"\";\n    }\n  };\n\n  const getTimeEstimate = () => {\n    switch (status) {\n      case \"preparing\":\n        return \"12-15 min\";\n      case \"picked_up\":\n        return \"10-12 min\";\n      case \"on_the_way\":\n        return \"5-8 min\";\n      case \"arriving\":\n        return \"1-2 min\";\n      default:\n        return \"\";\n    }\n  };\n\n  return (\n    <View style={{ flex: 1, backgroundColor: theme.backgroundRoot }}>\n      <View style={[styles.mapContainer, { backgroundColor: theme.backgroundDefault }]}>\n        <View style={styles.mapContent}>\n          <View style={[styles.storePinContainer, { left: 20 }]}>\n            <View style={[styles.storePin, { backgroundColor: theme.secondary }]}>\n              <Feather name=\"shopping-bag\" size={16} color=\"#FFFFFF\" />\n            </View>\n            <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n              {t.tracking.store}\n            </ThemedText>\n          </View>\n          \n          <View style={[styles.routeLine, { backgroundColor: theme.primary + \"40\" }]} />\n          \n          <Animated.View style={[styles.riderPinContainer, riderAnimatedStyle]}>\n            <Animated.View style={[styles.riderPulse, { backgroundColor: theme.primary + \"30\" }, pulseAnimatedStyle]} />\n            <View style={[styles.riderPin, { backgroundColor: theme.primary }]}>\n              <Feather name=\"truck\" size={16} color={theme.buttonText} />\n            </View>\n          </Animated.View>\n          \n          <View style={[styles.destinationPinContainer, { right: 20 }]}>\n            <View style={[styles.destinationPin, { backgroundColor: theme.success }]}>\n              <Feather name=\"map-pin\" size={16} color=\"#FFFFFF\" />\n            </View>\n            <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n              {t.tracking.you}\n            </ThemedText>\n          </View>\n        </View>\n      </View>\n      \n      <View style={[styles.bottomPanel, { paddingBottom: insets.bottom + Spacing.lg }]}>\n        <View style={styles.statusHeader}>\n          <View style={[styles.statusBadge, { backgroundColor: theme.primary + \"20\" }]}>\n            <Feather name=\"zap\" size={16} color={theme.primary} />\n            <ThemedText type=\"caption\" style={{ color: theme.primary, fontWeight: \"600\" }}>\n              {getTimeEstimate()}\n            </ThemedText>\n          </View>\n          <ThemedText type=\"h3\">{getStatusText()}</ThemedText>\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n            {t.tracking.order} {orderId}\n          </ThemedText>\n        </View>\n        \n        <View style={styles.progressContainer}>\n          <View style={styles.progressStep}>\n            <View style={[styles.progressDot, { backgroundColor: theme.success }]}>\n              <Feather name=\"check\" size={12} color=\"#FFFFFF\" />\n            </View>\n            <ThemedText type=\"small\">{t.orders.confirmed}</ThemedText>\n          </View>\n          <View style={[styles.progressLine, { backgroundColor: status !== \"preparing\" ? theme.success : theme.border }]} />\n          <View style={styles.progressStep}>\n            <View style={[\n              styles.progressDot,\n              { backgroundColor: status !== \"preparing\" ? theme.success : theme.border }\n            ]}>\n              {status !== \"preparing\" ? (\n                <Feather name=\"check\" size={12} color=\"#FFFFFF\" />\n              ) : null}\n            </View>\n            <ThemedText type=\"small\">{t.tracking.pickedUp}</ThemedText>\n          </View>\n          <View style={[styles.progressLine, { backgroundColor: status === \"on_the_way\" || status === \"arriving\" ? theme.success : theme.border }]} />\n          <View style={styles.progressStep}>\n            <View style={[\n              styles.progressDot,\n              { backgroundColor: status === \"arriving\" ? theme.success : theme.border }\n            ]}>\n              {status === \"arriving\" ? (\n                <Feather name=\"check\" size={12} color=\"#FFFFFF\" />\n              ) : null}\n            </View>\n            <ThemedText type=\"small\">{t.orders.delivered}</ThemedText>\n          </View>\n        </View>\n        \n        <Card style={styles.riderCard}>\n          <View style={styles.riderInfo}>\n            <View style={[styles.riderAvatar, { backgroundColor: theme.primary }]}>\n              <ThemedText type=\"h3\" style={{ color: theme.buttonText }}>\n                {mockRider.name.charAt(0)}\n              </ThemedText>\n            </View>\n            <View style={styles.riderDetails}>\n              <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n                {mockRider.name}\n              </ThemedText>\n              <View style={styles.riderRating}>\n                <Feather name=\"star\" size={14} color={theme.primary} />\n                <ThemedText type=\"caption\">{mockRider.rating}</ThemedText>\n                <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n                  • {mockRider.vehicleNumber}\n                </ThemedText>\n              </View>\n            </View>\n            <Pressable\n              style={[styles.callButton, { backgroundColor: theme.success }, Shadows.small]}\n            >\n              <Feather name=\"phone\" size={20} color=\"#FFFFFF\" />\n            </Pressable>\n          </View>\n        </Card>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  mapContainer: {\n    flex: 0.55,\n    justifyContent: \"center\",\n  },\n  mapContent: {\n    height: 60,\n    marginHorizontal: Spacing.lg,\n    position: \"relative\",\n  },\n  storePinContainer: {\n    position: \"absolute\",\n    alignItems: \"center\",\n    top: 0,\n  },\n  storePin: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: 4,\n  },\n  routeLine: {\n    position: \"absolute\",\n    height: 4,\n    left: 40,\n    right: 40,\n    top: 14,\n    borderRadius: 2,\n  },\n  riderPinContainer: {\n    position: \"absolute\",\n    alignItems: \"center\",\n    top: -4,\n  },\n  riderPulse: {\n    position: \"absolute\",\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    top: -5,\n  },\n  riderPin: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  destinationPinContainer: {\n    position: \"absolute\",\n    alignItems: \"center\",\n    top: 0,\n  },\n  destinationPin: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: 4,\n  },\n  bottomPanel: {\n    flex: 0.45,\n    backgroundColor: \"transparent\",\n    paddingHorizontal: Spacing.lg,\n    paddingTop: Spacing.lg,\n  },\n  statusHeader: {\n    alignItems: \"center\",\n    marginBottom: Spacing.xl,\n  },\n  statusBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n    gap: Spacing.xs,\n    marginBottom: Spacing.sm,\n  },\n  progressContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: Spacing.xl,\n  },\n  progressStep: {\n    alignItems: \"center\",\n    gap: Spacing.xs,\n  },\n  progressDot: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  progressLine: {\n    width: 40,\n    height: 3,\n    marginHorizontal: Spacing.xs,\n    marginBottom: 20,\n    borderRadius: 1.5,\n  },\n  riderCard: {},\n  riderInfo: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  riderAvatar: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  riderDetails: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  riderRating: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.xs,\n  },\n  callButton: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n","path":null,"size_bytes":10751,"size_tokens":null},"client/navigation/RootStackNavigator.tsx":{"content":"import React from \"react\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport MainTabNavigator from \"@/navigation/MainTabNavigator\";\nimport OnboardingNavigator from \"@/navigation/OnboardingNavigator\";\nimport { useOnboarding } from \"@/context/OnboardingContext\";\nimport CategoryScreen from \"@/screens/CategoryScreen\";\nimport ProductDetailScreen from \"@/screens/ProductDetailScreen\";\nimport CartScreen from \"@/screens/CartScreen\";\nimport CheckoutScreen from \"@/screens/CheckoutScreen\";\nimport OrderSuccessScreen from \"@/screens/OrderSuccessScreen\";\nimport OrderTrackingScreen from \"@/screens/OrderTrackingScreen\";\nimport OrderDetailScreen from \"@/screens/OrderDetailScreen\";\nimport VoiceOrderModal from \"@/screens/VoiceOrderModal\";\nimport VoiceConfirmScreen from \"@/screens/VoiceConfirmScreen\";\nimport EditAddressScreen from \"@/screens/EditAddressScreen\";\nimport HelpCenterScreen from \"@/screens/HelpCenterScreen\";\nimport VouchersScreen from \"@/screens/VouchersScreen\";\nimport AdminDashboardScreen from \"@/screens/AdminDashboardScreen\";\nimport NotificationsScreen from \"@/screens/NotificationsScreen\";\nimport LanguageScreen from \"@/screens/LanguageScreen\";\nimport AboutScreen from \"@/screens/AboutScreen\";\nimport { useScreenOptions } from \"@/hooks/useScreenOptions\";\nimport { Product, Category, Order, CartItem, Address, Voucher } from \"@/types\";\n\nexport type RootStackParamList = {\n  Onboarding: undefined;\n  Main: undefined;\n  Category: { category: Category };\n  ProductDetail: { product: Product };\n  Cart: undefined;\n  Checkout: undefined;\n  OrderSuccess: { orderId: string };\n  OrderTracking: { orderId: string };\n  OrderDetail: { order: Order };\n  VoiceOrderModal: undefined;\n  VoiceConfirm: { items: CartItem[] };\n  EditAddress: { address?: Address };\n  HelpCenter: undefined;\n  Vouchers: undefined;\n  AdminDashboard: undefined;\n  Notifications: undefined;\n  Language: undefined;\n  About: undefined;\n};\n\nconst Stack = createNativeStackNavigator<RootStackParamList>();\n\nexport default function RootStackNavigator() {\n  const screenOptions = useScreenOptions();\n  const { hasCompletedOnboarding, isLoading, completeOnboarding } = useOnboarding();\n\n  if (isLoading) {\n    return null;\n  }\n\n  return (\n    <Stack.Navigator screenOptions={screenOptions}>\n      {!hasCompletedOnboarding ? (\n        <Stack.Screen\n          name=\"Onboarding\"\n          options={{ headerShown: false }}\n        >\n          {() => <OnboardingNavigator onComplete={completeOnboarding} />}\n        </Stack.Screen>\n      ) : (\n        <>\n          <Stack.Screen\n            name=\"Main\"\n            component={MainTabNavigator}\n            options={{ headerShown: false }}\n          />\n          <Stack.Screen\n            name=\"Category\"\n            component={CategoryScreen}\n            options={({ route }) => ({\n              headerTitle: route.params.category.name,\n            })}\n          />\n          <Stack.Screen\n            name=\"ProductDetail\"\n            component={ProductDetailScreen}\n            options={{\n              headerTitle: \"\",\n              headerTransparent: true,\n            }}\n          />\n          <Stack.Screen\n            name=\"Cart\"\n            component={CartScreen}\n            options={{\n              headerTitle: \"Your Cart\",\n            }}\n          />\n          <Stack.Screen\n            name=\"Checkout\"\n            component={CheckoutScreen}\n            options={{\n              headerTitle: \"Checkout\",\n            }}\n          />\n          <Stack.Screen\n            name=\"OrderSuccess\"\n            component={OrderSuccessScreen}\n            options={{\n              headerShown: false,\n              gestureEnabled: false,\n            }}\n          />\n          <Stack.Screen\n            name=\"OrderTracking\"\n            component={OrderTrackingScreen}\n            options={{\n              headerTitle: \"Track Order\",\n            }}\n          />\n          <Stack.Screen\n            name=\"OrderDetail\"\n            component={OrderDetailScreen}\n            options={{\n              headerTitle: \"Order Details\",\n            }}\n          />\n          <Stack.Screen\n            name=\"VoiceOrderModal\"\n            component={VoiceOrderModal}\n            options={{\n              presentation: \"modal\",\n              headerShown: false,\n            }}\n          />\n          <Stack.Screen\n            name=\"VoiceConfirm\"\n            component={VoiceConfirmScreen}\n            options={{\n              headerTitle: \"Confirm Your Order\",\n            }}\n          />\n          <Stack.Screen\n            name=\"EditAddress\"\n            component={EditAddressScreen}\n            options={{\n              headerTitle: \"Edit Address\",\n            }}\n          />\n          <Stack.Screen\n            name=\"HelpCenter\"\n            component={HelpCenterScreen}\n            options={{\n              headerTitle: \"Help Center\",\n            }}\n          />\n          <Stack.Screen\n            name=\"Vouchers\"\n            component={VouchersScreen}\n            options={{\n              headerTitle: \"My Vouchers\",\n            }}\n          />\n          <Stack.Screen\n            name=\"AdminDashboard\"\n            component={AdminDashboardScreen}\n            options={{\n              headerTitle: \"Admin Dashboard\",\n            }}\n          />\n          <Stack.Screen\n            name=\"Notifications\"\n            component={NotificationsScreen}\n            options={{\n              headerTitle: \"Notifications\",\n            }}\n          />\n          <Stack.Screen\n            name=\"Language\"\n            component={LanguageScreen}\n            options={{\n              headerTitle: \"Language\",\n            }}\n          />\n          <Stack.Screen\n            name=\"About\"\n            component={AboutScreen}\n            options={{\n              headerTitle: \"About\",\n            }}\n          />\n        </>\n      )}\n    </Stack.Navigator>\n  );\n}\n","path":null,"size_bytes":5875,"size_tokens":null},"client/lib/query-client.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\n/**\n * Gets the base URL for the Express API server (e.g., \"http://localhost:3000\")\n * @returns {string} The API base URL\n */\nexport function getApiUrl(): string {\n  let host = process.env.EXPO_PUBLIC_DOMAIN;\n\n  if (!host) {\n    throw new Error(\"EXPO_PUBLIC_DOMAIN is not set\");\n  }\n\n  let url = new URL(`https://${host}`);\n\n  return url.href;\n}\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  route: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const baseUrl = getApiUrl();\n  const url = new URL(route, baseUrl);\n\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const baseUrl = getApiUrl();\n    const url = new URL(queryKey.join(\"/\") as string, baseUrl);\n\n    const res = await fetch(url, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1876,"size_tokens":null},"client/screens/OrdersScreen.tsx":{"content":"import React, { useState } from \"react\";\nimport { View, StyleSheet, FlatList, Pressable } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { Order } from \"@/types\";\nimport { mockOrders } from \"@/data/mockData\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nexport default function OrdersScreen() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const navigation = useNavigation<NavigationProp>();\n  const [activeTab, setActiveTab] = useState<\"active\" | \"completed\">(\"active\");\n\n  const activeOrders = mockOrders.filter(\n    (o) => o.status === \"pending\" || o.status === \"preparing\" || o.status === \"on_the_way\"\n  );\n  const completedOrders = mockOrders.filter((o) => o.status === \"delivered\");\n\n  const orders = activeTab === \"active\" ? activeOrders : completedOrders;\n\n  const getStatusColor = (status: Order[\"status\"]) => {\n    switch (status) {\n      case \"pending\":\n        return theme.warning;\n      case \"preparing\":\n        return theme.secondary;\n      case \"on_the_way\":\n        return theme.primary;\n      case \"delivered\":\n        return theme.success;\n      default:\n        return theme.textSecondary;\n    }\n  };\n\n  const getStatusText = (status: Order[\"status\"]) => {\n    switch (status) {\n      case \"pending\":\n        return t.orders.pending;\n      case \"preparing\":\n        return t.orders.preparing;\n      case \"on_the_way\":\n        return t.orders.onTheWay;\n      case \"delivered\":\n        return t.orders.delivered;\n      default:\n        return status;\n    }\n  };\n\n  const formatPrice = (price: number) => {\n    return `Rp ${price.toLocaleString(\"id-ID\")}`;\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString(\"id-ID\", {\n      day: \"numeric\",\n      month: \"short\",\n      year: \"numeric\",\n    });\n  };\n\n  const handleOrderPress = (order: Order) => {\n    if (order.status === \"on_the_way\") {\n      navigation.navigate(\"OrderTracking\", { orderId: order.id });\n    } else {\n      navigation.navigate(\"OrderDetail\", { order });\n    }\n  };\n\n  const renderOrder = ({ item }: { item: Order }) => (\n    <Card style={styles.orderCard} onPress={() => handleOrderPress(item)}>\n      <View style={styles.orderHeader}>\n        <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n          {item.id}\n        </ThemedText>\n        <View style={[styles.statusBadge, { backgroundColor: getStatusColor(item.status) + \"20\" }]}>\n          <ThemedText\n            type=\"small\"\n            style={{ color: getStatusColor(item.status), fontWeight: \"500\" }}\n          >\n            {getStatusText(item.status)}\n          </ThemedText>\n        </View>\n      </View>\n      \n      <ThemedText type=\"caption\" style={{ color: theme.textSecondary, marginBottom: Spacing.sm }}>\n        {formatDate(item.createdAt)} • {item.items.length} {t.cart.items}\n      </ThemedText>\n      \n      <View style={styles.orderItems}>\n        {item.items.slice(0, 2).map((cartItem, index) => (\n          <ThemedText key={index} type=\"small\" style={{ color: theme.textSecondary }}>\n            {cartItem.quantity}x {cartItem.product.name}\n          </ThemedText>\n        ))}\n        {item.items.length > 2 ? (\n          <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n            +{item.items.length - 2} {t.orders.moreItems}\n          </ThemedText>\n        ) : null}\n      </View>\n      \n      <View style={styles.orderFooter}>\n        <ThemedText type=\"body\" style={{ fontWeight: \"600\" }}>\n          {formatPrice(item.total + item.deliveryFee)}\n        </ThemedText>\n        {item.status === \"on_the_way\" ? (\n          <View style={styles.trackButton}>\n            <ThemedText type=\"caption\" style={{ color: theme.primary, fontWeight: \"600\" }}>\n              {t.orders.trackOrder}\n            </ThemedText>\n            <Feather name=\"chevron-right\" size={16} color={theme.primary} />\n          </View>\n        ) : null}\n      </View>\n    </Card>\n  );\n\n  return (\n    <ThemedView style={styles.container}>\n      <View style={[styles.header, { paddingTop: insets.top + Spacing.lg }]}>\n        <ThemedText type=\"h2\">{t.orders.myOrders}</ThemedText>\n      </View>\n      \n      <View style={styles.tabsContainer}>\n        <Pressable\n          style={[\n            styles.tab,\n            activeTab === \"active\" && { borderBottomColor: theme.primary, borderBottomWidth: 2 },\n          ]}\n          onPress={() => setActiveTab(\"active\")}\n        >\n          <ThemedText\n            type=\"body\"\n            style={{\n              fontWeight: activeTab === \"active\" ? \"600\" : \"400\",\n              color: activeTab === \"active\" ? theme.primary : theme.textSecondary,\n            }}\n          >\n            {t.orders.active} ({activeOrders.length})\n          </ThemedText>\n        </Pressable>\n        <Pressable\n          style={[\n            styles.tab,\n            activeTab === \"completed\" && { borderBottomColor: theme.primary, borderBottomWidth: 2 },\n          ]}\n          onPress={() => setActiveTab(\"completed\")}\n        >\n          <ThemedText\n            type=\"body\"\n            style={{\n              fontWeight: activeTab === \"completed\" ? \"600\" : \"400\",\n              color: activeTab === \"completed\" ? theme.primary : theme.textSecondary,\n            }}\n          >\n            {t.orders.completed} ({completedOrders.length})\n          </ThemedText>\n        </Pressable>\n      </View>\n      \n      <FlatList\n        data={orders}\n        renderItem={renderOrder}\n        keyExtractor={(item) => item.id}\n        contentContainerStyle={[\n          styles.listContent,\n          { paddingBottom: insets.bottom + 100 },\n        ]}\n        showsVerticalScrollIndicator={false}\n        ListEmptyComponent={\n          <View style={styles.emptyState}>\n            <Feather name=\"shopping-bag\" size={48} color={theme.textSecondary} />\n            <ThemedText type=\"body\" style={{ color: theme.textSecondary, marginTop: Spacing.md }}>\n              {activeTab === \"active\" ? t.orders.noActiveOrders : t.orders.noCompletedOrders}\n            </ThemedText>\n          </View>\n        }\n      />\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    paddingHorizontal: Spacing.lg,\n    paddingBottom: Spacing.md,\n  },\n  tabsContainer: {\n    flexDirection: \"row\",\n    paddingHorizontal: Spacing.lg,\n    marginBottom: Spacing.lg,\n  },\n  tab: {\n    flex: 1,\n    alignItems: \"center\",\n    paddingVertical: Spacing.md,\n  },\n  listContent: {\n    paddingHorizontal: Spacing.lg,\n    gap: Spacing.md,\n  },\n  orderCard: {\n    marginBottom: Spacing.sm,\n  },\n  orderHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginBottom: Spacing.xs,\n  },\n  statusBadge: {\n    paddingHorizontal: Spacing.sm,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n  },\n  orderItems: {\n    marginBottom: Spacing.md,\n  },\n  orderFooter: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingTop: Spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: \"#E0E0E0\",\n  },\n  trackButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  emptyState: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingVertical: Spacing.xxl * 2,\n  },\n});\n","path":null,"size_bytes":7910,"size_tokens":null},"client/screens/VoiceOrderModal.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport { View, StyleSheet, Pressable, Platform } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withRepeat,\n  withTiming,\n  withSequence,\n  withSpring,\n} from \"react-native-reanimated\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Button } from \"@/components/Button\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing, BorderRadius, Shadows } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { mockProducts } from \"@/data/mockData\";\nimport { CartItem } from \"@/types\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nconst samplePhrases = [\n  \"2 cartons of milk and a dozen eggs\",\n  \"I need some snacks and mineral water\",\n  \"Get me fruits and vegetables\",\n  \"Frozen chicken nuggets and drinks\",\n];\n\nexport default function VoiceOrderModal() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const navigation = useNavigation<NavigationProp>();\n  \n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState(\"\");\n  const [simulatedText, setSimulatedText] = useState(\"\");\n  \n  const pulseScale = useSharedValue(1);\n  const waveOpacity = useSharedValue(0);\n  const buttonScale = useSharedValue(1);\n\n  useEffect(() => {\n    if (isListening) {\n      pulseScale.value = withRepeat(\n        withSequence(\n          withTiming(1.3, { duration: 600 }),\n          withTiming(1, { duration: 600 })\n        ),\n        -1,\n        true\n      );\n      waveOpacity.value = withRepeat(\n        withSequence(\n          withTiming(0.3, { duration: 400 }),\n          withTiming(0.1, { duration: 400 })\n        ),\n        -1,\n        true\n      );\n    } else {\n      pulseScale.value = withSpring(1);\n      waveOpacity.value = withTiming(0);\n    }\n  }, [isListening]);\n\n  const pulseAnimatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: pulseScale.value }],\n    opacity: waveOpacity.value,\n  }));\n\n  const buttonAnimatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: buttonScale.value }],\n  }));\n\n  const handleMicPress = () => {\n    if (!isListening) {\n      setIsListening(true);\n      setTranscript(\"\");\n      \n      const randomPhrase = samplePhrases[Math.floor(Math.random() * samplePhrases.length)];\n      let currentIndex = 0;\n      \n      const interval = setInterval(() => {\n        if (currentIndex < randomPhrase.length) {\n          setSimulatedText(randomPhrase.slice(0, currentIndex + 1));\n          currentIndex++;\n        } else {\n          clearInterval(interval);\n          setTranscript(randomPhrase);\n          setIsListening(false);\n        }\n      }, 50);\n    } else {\n      setIsListening(false);\n    }\n  };\n\n  const handlePressIn = () => {\n    buttonScale.value = withSpring(0.95);\n  };\n\n  const handlePressOut = () => {\n    buttonScale.value = withSpring(1);\n  };\n\n  const handleConfirm = () => {\n    const detectedItems: CartItem[] = [\n      { product: mockProducts[0], quantity: 2 },\n      { product: mockProducts[1], quantity: 1 },\n    ];\n    navigation.replace(\"VoiceConfirm\", { items: detectedItems });\n  };\n\n  const handleCancel = () => {\n    navigation.goBack();\n  };\n\n  return (\n    <ThemedView style={[styles.container, { paddingTop: insets.top + Spacing.lg }]}>\n      <View style={styles.header}>\n        <Pressable onPress={handleCancel} style={styles.headerButton}>\n          <ThemedText type=\"body\" style={{ color: theme.error }}>\n            {t.account.cancel}\n          </ThemedText>\n        </Pressable>\n        <ThemedText type=\"h3\">{t.voice.title}</ThemedText>\n        <Pressable\n          onPress={transcript ? handleConfirm : undefined}\n          style={styles.headerButton}\n          disabled={!transcript}\n        >\n          <ThemedText\n            type=\"body\"\n            style={{ color: transcript ? theme.primary : theme.textSecondary }}\n          >\n            {t.common.done}\n          </ThemedText>\n        </Pressable>\n      </View>\n      \n      <View style={styles.content}>\n        <View style={styles.transcriptContainer}>\n          {isListening ? (\n            <ThemedText type=\"h2\" style={styles.transcript}>\n              {simulatedText}\n              <ThemedText type=\"h2\" style={{ opacity: 0.5 }}>|</ThemedText>\n            </ThemedText>\n          ) : transcript ? (\n            <ThemedText type=\"h2\" style={styles.transcript}>\n              {transcript}\n            </ThemedText>\n          ) : (\n            <ThemedText type=\"body\" style={[styles.placeholder, { color: theme.textSecondary }]}>\n              {t.voice.speakNow}\n            </ThemedText>\n          )}\n        </View>\n        \n        <View style={styles.micContainer}>\n          <Animated.View\n            style={[\n              styles.pulseRing,\n              { backgroundColor: theme.primary },\n              pulseAnimatedStyle,\n            ]}\n          />\n          <Animated.View style={buttonAnimatedStyle}>\n            <Pressable\n              style={[\n                styles.micButton,\n                { backgroundColor: isListening ? theme.error : theme.primary },\n                Shadows.fab,\n              ]}\n              onPress={handleMicPress}\n              onPressIn={handlePressIn}\n              onPressOut={handlePressOut}\n            >\n              <Feather\n                name={isListening ? \"mic-off\" : \"mic\"}\n                size={40}\n                color={theme.buttonText}\n              />\n            </Pressable>\n          </Animated.View>\n          <ThemedText type=\"body\" style={[styles.micLabel, { color: theme.textSecondary }]}>\n            {isListening ? t.voice.listening : t.voice.tapToSpeak}\n          </ThemedText>\n        </View>\n        \n        {isListening ? (\n          <View style={styles.waveformContainer}>\n            {[...Array(7)].map((_, i) => (\n              <Animated.View\n                key={i}\n                style={[\n                  styles.waveBar,\n                  {\n                    backgroundColor: theme.primary,\n                    height: 20 + Math.random() * 40,\n                  },\n                ]}\n              />\n            ))}\n          </View>\n        ) : null}\n      </View>\n      \n      <View style={[styles.footer, { paddingBottom: insets.bottom + Spacing.xl }]}>\n        {transcript ? (\n          <Button onPress={handleConfirm}>{t.common.confirm}</Button>\n        ) : (\n          <View style={styles.tipsContainer}>\n            <ThemedText type=\"caption\" style={{ color: theme.textSecondary, marginBottom: Spacing.sm }}>\n              {t.voice.trySaying}\n            </ThemedText>\n            <ThemedText type=\"body\" style={{ color: theme.text, fontStyle: \"italic\" }}>\n              \"{t.voice.samplePhrase}\"\n            </ThemedText>\n          </View>\n        )}\n      </View>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    paddingHorizontal: Spacing.lg,\n    marginBottom: Spacing.xl,\n  },\n  headerButton: {\n    padding: Spacing.sm,\n    minWidth: 60,\n  },\n  content: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  transcriptContainer: {\n    minHeight: 100,\n    paddingHorizontal: Spacing.xl,\n    marginBottom: Spacing.xxl,\n  },\n  transcript: {\n    textAlign: \"center\",\n  },\n  placeholder: {\n    textAlign: \"center\",\n  },\n  micContainer: {\n    alignItems: \"center\",\n  },\n  pulseRing: {\n    position: \"absolute\",\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n  },\n  micButton: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  micLabel: {\n    marginTop: Spacing.lg,\n  },\n  waveformContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: Spacing.xs,\n    marginTop: Spacing.xxl,\n    height: 60,\n  },\n  waveBar: {\n    width: 6,\n    borderRadius: 3,\n  },\n  footer: {\n    paddingHorizontal: Spacing.lg,\n  },\n  tipsContainer: {\n    alignItems: \"center\",\n  },\n});\n","path":null,"size_bytes":8533,"size_tokens":null},"client/screens/onboarding/LocationScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, Platform, Linking } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport * as Location from \"expo-location\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Button } from \"@/components/Button\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\nimport { OnboardingStackParamList } from \"@/navigation/OnboardingNavigator\";\n\ntype NavigationProp = NativeStackNavigationProp<OnboardingStackParamList, \"Location\">;\n\nexport default function LocationScreen() {\n  const insets = useSafeAreaInsets();\n  const navigation = useNavigation<NavigationProp>();\n  const { theme } = useTheme();\n  const [permission, requestPermission] = Location.useForegroundPermissions();\n\n  const handleAllowLocation = async () => {\n    if (!permission) return;\n    \n    if (permission.status === \"denied\" && !permission.canAskAgain) {\n      if (Platform.OS !== \"web\") {\n        try {\n          await Linking.openSettings();\n        } catch (error) {\n          navigation.navigate(\"PhoneSignup\");\n        }\n      }\n      return;\n    }\n    \n    const result = await requestPermission();\n    if (result.granted) {\n      navigation.navigate(\"PhoneSignup\");\n    }\n  };\n\n  const handleSkip = () => {\n    navigation.navigate(\"PhoneSignup\");\n  };\n\n  return (\n    <ThemedView style={[styles.container, { paddingTop: insets.top + Spacing.xl }]}>\n      <View style={styles.content}>\n        <View style={[styles.iconContainer, { backgroundColor: theme.backgroundDefault }]}>\n          <Feather name=\"map-pin\" size={48} color={theme.primary} />\n        </View>\n        \n        <ThemedText type=\"h2\" style={styles.title}>\n          Enable Location\n        </ThemedText>\n        \n        <ThemedText type=\"body\" style={[styles.description, { color: theme.textSecondary }]}>\n          We need your location to show you nearby stores and deliver to your address quickly.\n        </ThemedText>\n      </View>\n      \n      <View style={[styles.footer, { paddingBottom: insets.bottom + Spacing.xl }]}>\n        <Button onPress={handleAllowLocation}>\n          Allow Location Access\n        </Button>\n        \n        <Button variant=\"text\" onPress={handleSkip} style={styles.skipButton}>\n          Enter Address Manually\n        </Button>\n      </View>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingHorizontal: Spacing.xl,\n  },\n  iconContainer: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: Spacing.xxl,\n  },\n  title: {\n    textAlign: \"center\",\n    marginBottom: Spacing.lg,\n  },\n  description: {\n    textAlign: \"center\",\n    paddingHorizontal: Spacing.lg,\n  },\n  footer: {\n    paddingHorizontal: Spacing.lg,\n    gap: Spacing.sm,\n  },\n  skipButton: {\n    alignSelf: \"center\",\n  },\n});\n","path":null,"size_bytes":3261,"size_tokens":null},"client/screens/OrderDetailScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, ScrollView } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { useRoute, RouteProp } from \"@react-navigation/native\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\n\ntype OrderDetailRouteProp = RouteProp<RootStackParamList, \"OrderDetail\">;\n\nexport default function OrderDetailScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const route = useRoute<OrderDetailRouteProp>();\n  const { order } = route.params;\n\n  const formatPrice = (price: number) => {\n    return `Rp ${price.toLocaleString(\"id-ID\")}`;\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString(\"id-ID\", {\n      weekday: \"long\",\n      day: \"numeric\",\n      month: \"long\",\n      year: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  return (\n    <ScrollView\n      style={{ flex: 1, backgroundColor: theme.backgroundRoot }}\n      contentContainerStyle={[\n        styles.scrollContent,\n        {\n          paddingTop: headerHeight + Spacing.lg,\n          paddingBottom: insets.bottom + Spacing.xl,\n        },\n      ]}\n      showsVerticalScrollIndicator={false}\n    >\n      <View style={styles.header}>\n        <View style={[styles.statusBadge, { backgroundColor: theme.success + \"20\" }]}>\n          <Feather name=\"check-circle\" size={16} color={theme.success} />\n          <ThemedText type=\"caption\" style={{ color: theme.success, fontWeight: \"600\" }}>\n            Delivered\n          </ThemedText>\n        </View>\n        <ThemedText type=\"h2\">{order.id}</ThemedText>\n        <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n          {formatDate(order.createdAt)}\n        </ThemedText>\n      </View>\n      \n      <View style={styles.section}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          Items\n        </ThemedText>\n        <Card>\n          {order.items.map((item, index) => (\n            <View key={index}>\n              <View style={styles.itemRow}>\n                <View style={[styles.itemImage, { backgroundColor: theme.backgroundDefault }]}>\n                  <Feather name=\"package\" size={20} color={theme.textSecondary} />\n                </View>\n                <View style={styles.itemDetails}>\n                  <ThemedText type=\"body\" numberOfLines={1}>\n                    {item.product.name}\n                  </ThemedText>\n                  <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n                    {item.quantity} x {formatPrice(item.product.price)}\n                  </ThemedText>\n                </View>\n                <ThemedText type=\"body\" style={{ fontWeight: \"500\" }}>\n                  {formatPrice(item.product.price * item.quantity)}\n                </ThemedText>\n              </View>\n              {index < order.items.length - 1 ? (\n                <View style={[styles.divider, { backgroundColor: theme.border }]} />\n              ) : null}\n            </View>\n          ))}\n        </Card>\n      </View>\n      \n      <View style={styles.section}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          Delivery Address\n        </ThemedText>\n        <Card>\n          <View style={styles.addressRow}>\n            <View style={[styles.addressIcon, { backgroundColor: theme.primary + \"20\" }]}>\n              <Feather name=\"map-pin\" size={18} color={theme.primary} />\n            </View>\n            <View style={styles.addressDetails}>\n              <ThemedText type=\"body\" style={{ fontWeight: \"500\" }}>\n                {order.address.label}\n              </ThemedText>\n              <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n                {order.address.fullAddress}\n              </ThemedText>\n            </View>\n          </View>\n        </Card>\n      </View>\n      \n      <View style={styles.section}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          Payment\n        </ThemedText>\n        <Card>\n          <View style={styles.paymentRow}>\n            <View style={[styles.paymentIcon, { backgroundColor: theme.backgroundDefault }]}>\n              <Feather name=\"credit-card\" size={18} color={theme.text} />\n            </View>\n            <ThemedText type=\"body\">{order.paymentMethod.name}</ThemedText>\n          </View>\n        </Card>\n      </View>\n      \n      <View style={styles.section}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          Order Summary\n        </ThemedText>\n        <Card>\n          <View style={styles.summaryRow}>\n            <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n              Subtotal\n            </ThemedText>\n            <ThemedText type=\"body\">{formatPrice(order.total)}</ThemedText>\n          </View>\n          <View style={styles.summaryRow}>\n            <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n              Delivery Fee\n            </ThemedText>\n            <ThemedText type=\"body\">{formatPrice(order.deliveryFee)}</ThemedText>\n          </View>\n          <View style={[styles.summaryRow, styles.totalRow, { borderTopColor: theme.border }]}>\n            <ThemedText type=\"h3\">Total</ThemedText>\n            <ThemedText type=\"h3\" style={{ color: theme.primary }}>\n              {formatPrice(order.total + order.deliveryFee)}\n            </ThemedText>\n          </View>\n        </Card>\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  scrollContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  header: {\n    alignItems: \"center\",\n    marginBottom: Spacing.xl,\n  },\n  statusBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n    gap: Spacing.xs,\n    marginBottom: Spacing.sm,\n  },\n  section: {\n    marginBottom: Spacing.xl,\n  },\n  sectionTitle: {\n    marginBottom: Spacing.md,\n  },\n  itemRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingVertical: Spacing.sm,\n  },\n  itemImage: {\n    width: 44,\n    height: 44,\n    borderRadius: BorderRadius.xs,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  itemDetails: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  divider: {\n    height: 1,\n    marginVertical: Spacing.sm,\n  },\n  addressRow: {\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n  },\n  addressIcon: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  addressDetails: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  paymentRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  paymentIcon: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginRight: Spacing.md,\n  },\n  summaryRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginBottom: Spacing.sm,\n  },\n  totalRow: {\n    marginTop: Spacing.sm,\n    paddingTop: Spacing.md,\n    borderTopWidth: 1,\n    marginBottom: 0,\n  },\n});\n","path":null,"size_bytes":7426,"size_tokens":null},"client/screens/onboarding/WelcomeScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, Image, Pressable } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { CommonActions } from \"@react-navigation/native\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withRepeat,\n  withTiming,\n  withSequence,\n} from \"react-native-reanimated\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Button } from \"@/components/Button\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing } from \"@/constants/theme\";\nimport { OnboardingStackParamList } from \"@/navigation/OnboardingNavigator\";\n\ntype NavigationProp = NativeStackNavigationProp<OnboardingStackParamList, \"Welcome\">;\n\nexport default function WelcomeScreen() {\n  const insets = useSafeAreaInsets();\n  const navigation = useNavigation<NavigationProp>();\n  const { theme } = useTheme();\n  const scale = useSharedValue(1);\n\n  React.useEffect(() => {\n    scale.value = withRepeat(\n      withSequence(\n        withTiming(1.1, { duration: 800 }),\n        withTiming(1, { duration: 800 })\n      ),\n      -1,\n      true\n    );\n  }, []);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  return (\n    <ThemedView style={[styles.container, { paddingTop: insets.top + Spacing.xl }]}>\n      <View style={styles.content}>\n        <Animated.View style={[styles.iconContainer, animatedStyle]}>\n          <View style={[styles.lightningCircle, { backgroundColor: theme.primary }]}>\n            <Feather name=\"zap\" size={64} color={theme.buttonText} />\n          </View>\n        </Animated.View>\n        \n        <Image\n          source={require(\"../../../assets/images/icon.png\")}\n          style={styles.logo}\n          resizeMode=\"contain\"\n        />\n        \n        <ThemedText type=\"h1\" style={styles.title}>\n          KilatGo\n        </ThemedText>\n        \n        <ThemedText type=\"body\" style={[styles.subtitle, { color: theme.textSecondary }]}>\n          Fresh groceries delivered to your door in 15 minutes\n        </ThemedText>\n      </View>\n      \n      <View style={[styles.footer, { paddingBottom: insets.bottom + Spacing.xl }]}>\n        <Button onPress={() => navigation.navigate(\"Location\")}>\n          Get Started\n        </Button>\n        <Pressable\n          onPress={() => navigation.navigate(\"PhoneSignup\")}\n          style={styles.skipLink}\n        >\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n            Skip for Demo\n          </ThemedText>\n        </Pressable>\n      </View>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingHorizontal: Spacing.xl,\n  },\n  iconContainer: {\n    marginBottom: Spacing.xxl,\n  },\n  lightningCircle: {\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  logo: {\n    width: 80,\n    height: 80,\n    marginBottom: Spacing.lg,\n  },\n  title: {\n    textAlign: \"center\",\n    marginBottom: Spacing.sm,\n  },\n  subtitle: {\n    textAlign: \"center\",\n    paddingHorizontal: Spacing.xl,\n  },\n  footer: {\n    paddingHorizontal: Spacing.lg,\n  },\n  skipLink: {\n    alignItems: \"center\",\n    paddingVertical: Spacing.md,\n    marginTop: Spacing.sm,\n  },\n});\n","path":null,"size_bytes":3591,"size_tokens":null},"server/routes.ts":{"content":"import type { Express, Request, Response } from \"express\";\nimport { createServer, type Server } from \"node:http\";\nimport { eq, and, gt } from \"drizzle-orm\";\nimport { storage } from \"./storage\";\nimport { db } from \"./db\";\nimport { categories, products, vouchers, users, stores, storeStaff, storeInventory, otpCodes } from \"@shared/schema\";\nimport { findNearestAvailableStore, getStoresWithAvailability, estimateDeliveryTime } from \"./storeAvailability\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Categories\n  app.get(\"/api/categories\", async (_req: Request, res: Response) => {\n    try {\n      const allCategories = await storage.getCategories();\n      res.json(allCategories);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch categories\" });\n    }\n  });\n\n  app.get(\"/api/categories/:id\", async (req: Request, res: Response) => {\n    try {\n      const category = await storage.getCategoryById(req.params.id);\n      if (!category) {\n        return res.status(404).json({ error: \"Category not found\" });\n      }\n      res.json(category);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch category\" });\n    }\n  });\n\n  // Products\n  app.get(\"/api/products\", async (req: Request, res: Response) => {\n    try {\n      const categoryId = req.query.categoryId as string | undefined;\n      let allProducts;\n      \n      if (categoryId) {\n        allProducts = await storage.getProductsByCategory(categoryId);\n      } else {\n        allProducts = await storage.getProducts();\n      }\n      res.json(allProducts);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch products\" });\n    }\n  });\n\n  app.get(\"/api/products/:id\", async (req: Request, res: Response) => {\n    try {\n      const product = await storage.getProductById(req.params.id);\n      if (!product) {\n        return res.status(404).json({ error: \"Product not found\" });\n      }\n      res.json(product);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch product\" });\n    }\n  });\n\n  // Cart - using a demo user for now\n  const DEMO_USER_ID = \"demo-user\";\n\n  app.get(\"/api/cart\", async (_req: Request, res: Response) => {\n    try {\n      const items = await storage.getCartItems(DEMO_USER_ID);\n      const itemsWithProducts = await Promise.all(\n        items.map(async (item) => {\n          const product = await storage.getProductById(item.productId);\n          return { ...item, product };\n        })\n      );\n      res.json(itemsWithProducts);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch cart\" });\n    }\n  });\n\n  app.post(\"/api/cart\", async (req: Request, res: Response) => {\n    try {\n      const { productId, quantity = 1 } = req.body;\n      const item = await storage.addToCart({\n        userId: DEMO_USER_ID,\n        productId,\n        quantity,\n      });\n      res.json(item);\n    } catch (error) {\n      console.error(\"Add to cart error:\", error);\n      res.status(500).json({ error: \"Failed to add to cart\" });\n    }\n  });\n\n  app.put(\"/api/cart/:id\", async (req: Request, res: Response) => {\n    try {\n      const { quantity } = req.body;\n      const item = await storage.updateCartItemQuantity(req.params.id, quantity);\n      if (!item) {\n        return res.status(404).json({ error: \"Cart item not found\" });\n      }\n      res.json(item);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update cart item\" });\n    }\n  });\n\n  app.delete(\"/api/cart/:id\", async (req: Request, res: Response) => {\n    try {\n      await storage.removeFromCart(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to remove from cart\" });\n    }\n  });\n\n  app.delete(\"/api/cart\", async (_req: Request, res: Response) => {\n    try {\n      await storage.clearCart(DEMO_USER_ID);\n      res.json({ success: true });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to clear cart\" });\n    }\n  });\n\n  // Orders\n  app.get(\"/api/orders\", async (_req: Request, res: Response) => {\n    try {\n      const allOrders = await storage.getOrders(DEMO_USER_ID);\n      res.json(allOrders);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch orders\" });\n    }\n  });\n\n  app.get(\"/api/orders/:id\", async (req: Request, res: Response) => {\n    try {\n      const order = await storage.getOrderById(req.params.id);\n      if (!order) {\n        return res.status(404).json({ error: \"Order not found\" });\n      }\n      res.json(order);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch order\" });\n    }\n  });\n\n  app.post(\"/api/orders\", async (req: Request, res: Response) => {\n    try {\n      const { customerLat, customerLng, paymentMethod, items, total, deliveryFee, addressId } = req.body;\n      \n      // Validate customer location is provided\n      const lat = parseFloat(customerLat);\n      const lng = parseFloat(customerLng);\n      \n      if (isNaN(lat) || isNaN(lng)) {\n        return res.status(400).json({ \n          error: \"Customer location required\",\n          message: \"Please enable location to place an order\" \n        });\n      }\n      \n      // Find nearest available store\n      const nearestStore = await findNearestAvailableStore(lat, lng);\n      \n      if (!nearestStore) {\n        return res.status(400).json({ \n          error: \"No stores available\",\n          message: \"Sorry, no stores are available in your area right now. Please try again later.\"\n        });\n      }\n      \n      // Get online picker and driver from the store\n      const onlineStaff = await storage.getOnlineStaffByStore(nearestStore.id);\n      \n      if (onlineStaff.pickers.length === 0 || onlineStaff.drivers.length === 0) {\n        return res.status(400).json({ \n          error: \"No staff available\",\n          message: \"Sorry, no pickers or drivers are available at the moment. Please try again later.\"\n        });\n      }\n      \n      // Assign first available picker and driver\n      const assignedPicker = onlineStaff.pickers[0];\n      const assignedDriver = onlineStaff.drivers[0];\n      \n      // Validate COD eligibility\n      const requestedPaymentMethod = paymentMethod || \"midtrans\";\n      let finalPaymentMethod = requestedPaymentMethod;\n      \n      if (requestedPaymentMethod === \"cod\" && !nearestStore.codAllowed) {\n        return res.status(400).json({\n          error: \"COD not available\",\n          message: \"Cash on delivery is not available at this store. Please use another payment method.\"\n        });\n      }\n      \n      const orderNumber = `KG-${Date.now().toString(36).toUpperCase()}`;\n      const estimatedTime = estimateDeliveryTime(nearestStore.distanceKm);\n      const estimatedDelivery = new Date(Date.now() + estimatedTime * 60 * 1000);\n      \n      // Get driver user info for riderInfo\n      const driverUser = await storage.getUser(assignedDriver.userId);\n      \n      const order = await storage.createOrder({\n        userId: DEMO_USER_ID,\n        orderNumber,\n        storeId: nearestStore.id,\n        pickerId: assignedPicker.userId,\n        driverId: assignedDriver.userId,\n        items,\n        total,\n        deliveryFee: deliveryFee || 10000,\n        addressId,\n        paymentMethod: finalPaymentMethod,\n        paymentStatus: finalPaymentMethod === \"cod\" ? \"pending\" : \"pending\",\n        customerLat: String(lat),\n        customerLng: String(lng),\n        estimatedDelivery,\n        status: \"pending\",\n      });\n      \n      await storage.clearCart(DEMO_USER_ID);\n      \n      // Return order with additional info for the client\n      res.json({\n        ...order,\n        store: {\n          id: nearestStore.id,\n          name: nearestStore.name,\n        },\n        riderInfo: driverUser ? {\n          id: driverUser.id,\n          name: driverUser.username,\n          phone: driverUser.phone || \"+62 812-0000-0000\",\n          rating: 4.8,\n          vehicleNumber: \"B 1234 ABC\",\n        } : null,\n        estimatedDeliveryMinutes: estimatedTime,\n      });\n    } catch (error) {\n      console.error(\"Order error:\", error);\n      res.status(500).json({ error: \"Failed to create order\" });\n    }\n  });\n\n  // Store Availability\n  app.get(\"/api/stores/available\", async (req: Request, res: Response) => {\n    try {\n      const lat = parseFloat(req.query.lat as string);\n      const lng = parseFloat(req.query.lng as string);\n      \n      if (isNaN(lat) || isNaN(lng)) {\n        return res.status(400).json({ error: \"Valid lat and lng query parameters required\" });\n      }\n      \n      const nearestStore = await findNearestAvailableStore(lat, lng);\n      \n      if (!nearestStore) {\n        return res.json({ \n          available: false, \n          message: \"No stores available in your area\",\n          stores: await getStoresWithAvailability(lat, lng)\n        });\n      }\n      \n      const estimatedTime = estimateDeliveryTime(nearestStore.distanceKm);\n      \n      res.json({\n        available: true,\n        store: nearestStore,\n        estimatedDeliveryMinutes: estimatedTime,\n        codAllowed: nearestStore.codAllowed,\n      });\n    } catch (error) {\n      console.error(\"Store availability error:\", error);\n      res.status(500).json({ error: \"Failed to check store availability\" });\n    }\n  });\n\n  app.get(\"/api/stores\", async (_req: Request, res: Response) => {\n    try {\n      const allStores = await storage.getStores();\n      res.json(allStores);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch stores\" });\n    }\n  });\n\n  app.get(\"/api/stores/:id/inventory\", async (req: Request, res: Response) => {\n    try {\n      const inventory = await storage.getStoreInventoryWithProducts(req.params.id);\n      res.json(inventory);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch store inventory\" });\n    }\n  });\n\n  // Staff Status Toggle\n  app.post(\"/api/staff/toggle-status\", async (req: Request, res: Response) => {\n    try {\n      const { userId, status } = req.body;\n      \n      if (!userId || ![\"online\", \"offline\"].includes(status)) {\n        return res.status(400).json({ error: \"Valid userId and status (online/offline) required\" });\n      }\n      \n      const staffRecord = await storage.getStoreStaffByUserId(userId);\n      if (!staffRecord) {\n        return res.status(404).json({ error: \"Staff record not found\" });\n      }\n      \n      const updated = await storage.updateStaffStatus(staffRecord.id, status);\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Staff status toggle error:\", error);\n      res.status(500).json({ error: \"Failed to update staff status\" });\n    }\n  });\n\n  app.get(\"/api/stores/:id/staff\", async (req: Request, res: Response) => {\n    try {\n      const staff = await storage.getStoreStaff(req.params.id);\n      res.json(staff);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch store staff\" });\n    }\n  });\n\n  // Admin Dashboard Metrics\n  app.get(\"/api/admin/metrics\", async (_req: Request, res: Response) => {\n    try {\n      const allStores = await storage.getStores();\n      const allOrders = await storage.getAllOrders();\n      \n      // Get staff for each store and compile metrics - properly scoped by storeId\n      const storeMetrics = await Promise.all(\n        allStores.map(async (store) => {\n          // Get only staff belonging to this specific store\n          const storeStaff = await storage.getStoreStaff(store.id);\n          const onlineStaff = storeStaff.filter((s) => s.status === \"online\");\n          \n          // Filter orders that belong to this specific store\n          const storeOrders = allOrders.filter((o) => o.storeId === store.id);\n          \n          // Filter pickers and drivers for this store only\n          const storePickers = storeStaff.filter((s) => s.role === \"picker\");\n          const storeDrivers = storeStaff.filter((s) => s.role === \"driver\");\n          \n          return {\n            id: store.id,\n            name: store.name,\n            address: store.address,\n            isActive: store.isActive,\n            codAllowed: store.codAllowed,\n            totalStaff: storeStaff.length,\n            onlineStaff: onlineStaff.length,\n            pickers: storePickers,\n            drivers: storeDrivers,\n            orderCount: storeOrders.length,\n            pendingOrders: storeOrders.filter((o) => o.status === \"pending\").length,\n            activeOrders: storeOrders.filter((o) => \n              [\"confirmed\", \"preparing\", \"ready\", \"on_the_way\"].includes(o.status || \"\")\n            ).length,\n          };\n        })\n      );\n      \n      // Global order summary across all stores\n      const orderSummary = {\n        total: allOrders.length,\n        pending: allOrders.filter((o) => o.status === \"pending\").length,\n        confirmed: allOrders.filter((o) => o.status === \"confirmed\").length,\n        preparing: allOrders.filter((o) => o.status === \"preparing\").length,\n        ready: allOrders.filter((o) => o.status === \"ready\").length,\n        onTheWay: allOrders.filter((o) => o.status === \"on_the_way\").length,\n        delivered: allOrders.filter((o) => o.status === \"delivered\").length,\n        cancelled: allOrders.filter((o) => o.status === \"cancelled\").length,\n      };\n      \n      res.json({\n        stores: storeMetrics,\n        orderSummary,\n        timestamp: new Date().toISOString(),\n      });\n    } catch (error) {\n      console.error(\"Admin metrics error:\", error);\n      res.status(500).json({ error: \"Failed to fetch admin metrics\" });\n    }\n  });\n\n  // Vouchers\n  app.get(\"/api/vouchers\", async (_req: Request, res: Response) => {\n    try {\n      const allVouchers = await storage.getVouchers();\n      res.json(allVouchers);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch vouchers\" });\n    }\n  });\n\n  app.get(\"/api/vouchers/:code\", async (req: Request, res: Response) => {\n    try {\n      const voucher = await storage.getVoucherByCode(req.params.code);\n      if (!voucher) {\n        return res.status(404).json({ error: \"Voucher not found\" });\n      }\n      res.json(voucher);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch voucher\" });\n    }\n  });\n\n  // Authentication endpoints\n  app.post(\"/api/auth/register\", async (req: Request, res: Response) => {\n    try {\n      const { username, password, phone } = req.body;\n      \n      if (!username || !password) {\n        return res.status(400).json({ error: \"Username and password are required\" });\n      }\n      \n      if (username.length < 3) {\n        return res.status(400).json({ error: \"Username must be at least 3 characters\" });\n      }\n      \n      if (password.length < 4) {\n        return res.status(400).json({ error: \"Password must be at least 4 characters\" });\n      }\n      \n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(400).json({ error: \"Username already taken\" });\n      }\n      \n      const newUser = await storage.createUser({\n        username,\n        password,\n        phone: phone || null,\n        role: \"customer\",\n      });\n      \n      res.json({\n        user: {\n          id: newUser.id,\n          username: newUser.username,\n          phone: newUser.phone,\n          role: newUser.role,\n        },\n      });\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n      res.status(500).json({ error: \"Registration failed\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", async (req: Request, res: Response) => {\n    try {\n      const { username, password } = req.body;\n      \n      if (!username || !password) {\n        return res.status(400).json({ error: \"Username and password are required\" });\n      }\n      \n      const user = await storage.getUserByUsername(username);\n      \n      if (!user) {\n        return res.status(401).json({ error: \"Invalid username or password\" });\n      }\n      \n      if (user.password !== password) {\n        return res.status(401).json({ error: \"Invalid username or password\" });\n      }\n      \n      res.json({\n        user: {\n          id: user.id,\n          username: user.username,\n          phone: user.phone,\n          role: user.role,\n        },\n      });\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      res.status(500).json({ error: \"Login failed\" });\n    }\n  });\n\n  app.put(\"/api/auth/profile\", async (req: Request, res: Response) => {\n    try {\n      const { userId, username, phone } = req.body;\n      \n      if (!userId) {\n        return res.status(400).json({ error: \"User ID is required\" });\n      }\n      \n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n      \n      if (username && username !== user.username) {\n        const existingUser = await storage.getUserByUsername(username);\n        if (existingUser) {\n          return res.status(400).json({ error: \"Username already taken\" });\n        }\n      }\n      \n      const updates: { username?: string; phone?: string | null } = {};\n      if (username) updates.username = username;\n      if (phone !== undefined) updates.phone = phone;\n      \n      const updatedUser = await db.update(users)\n        .set(updates)\n        .where(eq(users.id, userId))\n        .returning();\n      \n      if (updatedUser.length === 0) {\n        return res.status(404).json({ error: \"Failed to update user\" });\n      }\n      \n      res.json({\n        user: {\n          id: updatedUser[0].id,\n          username: updatedUser[0].username,\n          phone: updatedUser[0].phone,\n          role: updatedUser[0].role,\n        },\n      });\n    } catch (error) {\n      console.error(\"Profile update error:\", error);\n      res.status(500).json({ error: \"Profile update failed\" });\n    }\n  });\n\n  // OTP Authentication\n  // NOTE: This is a demo implementation. In production:\n  // - Integrate Twilio/other SMS provider to send OTP via SMS\n  // - Remove the code from the response\n  // - Add rate limiting to prevent abuse\n  // - Use secure random number generation\n  app.post(\"/api/auth/otp/send\", async (req: Request, res: Response) => {\n    try {\n      const { phone } = req.body;\n      if (!phone) {\n        return res.status(400).json({ error: \"Phone number is required\" });\n      }\n      \n      // Generate 6-digit OTP\n      const code = Math.floor(100000 + Math.random() * 900000).toString();\n      const expiresAt = new Date(Date.now() + 5 * 60 * 1000); // 5 minutes\n      \n      // Store OTP in database\n      await db.insert(otpCodes).values({\n        phone,\n        code,\n        expiresAt,\n      });\n      \n      // DEMO ONLY: Return code in response for testing\n      // In production, send SMS via Twilio and only return { success: true }\n      res.json({ success: true, code, message: \"OTP sent (demo mode - code shown for testing)\" });\n    } catch (error) {\n      console.error(\"OTP send error:\", error);\n      res.status(500).json({ error: \"Failed to send OTP\" });\n    }\n  });\n\n  app.post(\"/api/auth/otp/verify\", async (req: Request, res: Response) => {\n    try {\n      const { phone, code } = req.body;\n      if (!phone || !code) {\n        return res.status(400).json({ error: \"Phone and code are required\" });\n      }\n      \n      // Find valid OTP\n      const validOtp = await db.select().from(otpCodes)\n        .where(and(\n          eq(otpCodes.phone, phone),\n          eq(otpCodes.code, code),\n          eq(otpCodes.verified, false),\n          gt(otpCodes.expiresAt, new Date())\n        ))\n        .limit(1);\n      \n      if (validOtp.length === 0) {\n        return res.status(400).json({ error: \"Invalid or expired OTP\" });\n      }\n      \n      // Mark OTP as verified\n      await db.update(otpCodes)\n        .set({ verified: true })\n        .where(eq(otpCodes.id, validOtp[0].id));\n      \n      // Find or create user\n      let user = await db.select().from(users).where(eq(users.phone, phone)).limit(1);\n      \n      if (user.length === 0) {\n        const newUser = await db.insert(users).values({\n          username: `user_${phone.slice(-4)}`,\n          password: Math.random().toString(36).slice(-8),\n          phone,\n          role: \"customer\",\n        }).returning();\n        user = newUser;\n      }\n      \n      res.json({\n        user: {\n          id: user[0].id,\n          username: user[0].username,\n          phone: user[0].phone,\n          email: user[0].email,\n          role: user[0].role,\n        },\n      });\n    } catch (error) {\n      console.error(\"OTP verify error:\", error);\n      res.status(500).json({ error: \"Failed to verify OTP\" });\n    }\n  });\n\n  // Apple Sign-In\n  // NOTE: This is a demo implementation. In production:\n  // - Validate the identity token using Apple's public keys\n  // - Verify the token signature and claims\n  // - Check token expiration and audience\n  app.post(\"/api/auth/apple\", async (req: Request, res: Response) => {\n    try {\n      const { appleId, email, fullName } = req.body;\n      if (!appleId) {\n        return res.status(400).json({ error: \"Apple ID is required\" });\n      }\n      \n      // In production, validate the identity token here\n      // using Apple's public keys (https://appleid.apple.com/auth/keys)\n      \n      // Find or create user\n      let user = await db.select().from(users).where(eq(users.appleId, appleId)).limit(1);\n      \n      if (user.length === 0) {\n        const username = fullName || email?.split(\"@\")[0] || `apple_${appleId.slice(-6)}`;\n        const newUser = await db.insert(users).values({\n          username,\n          password: Math.random().toString(36).slice(-8),\n          appleId,\n          email: email || null,\n          role: \"customer\",\n        }).returning();\n        user = newUser;\n      }\n      \n      res.json({\n        user: {\n          id: user[0].id,\n          username: user[0].username,\n          phone: user[0].phone,\n          email: user[0].email,\n          role: user[0].role,\n        },\n      });\n    } catch (error) {\n      console.error(\"Apple auth error:\", error);\n      res.status(500).json({ error: \"Apple authentication failed\" });\n    }\n  });\n\n  // Google Sign-In\n  // NOTE: This is a demo implementation. In production:\n  // - Validate the Google ID token using Google's tokeninfo endpoint\n  // - Verify the token audience matches your client ID\n  app.post(\"/api/auth/google\", async (req: Request, res: Response) => {\n    try {\n      const { googleId, email, name } = req.body;\n      if (!googleId) {\n        return res.status(400).json({ error: \"Google ID is required\" });\n      }\n      \n      // In production, validate the ID token here\n      // using Google's tokeninfo endpoint or google-auth-library\n      \n      // Find or create user\n      let user = await db.select().from(users).where(eq(users.googleId, googleId)).limit(1);\n      \n      if (user.length === 0) {\n        // Check if user exists with same email\n        if (email) {\n          const existingUser = await db.select().from(users).where(eq(users.email, email)).limit(1);\n          if (existingUser.length > 0) {\n            // Link Google account to existing user\n            await db.update(users)\n              .set({ googleId })\n              .where(eq(users.id, existingUser[0].id));\n            user = await db.select().from(users).where(eq(users.id, existingUser[0].id)).limit(1);\n          }\n        }\n        \n        // Create new user if not found\n        if (user.length === 0) {\n          const username = name || email?.split(\"@\")[0] || `google_${googleId.slice(-6)}`;\n          const newUser = await db.insert(users).values({\n            username,\n            password: Math.random().toString(36).slice(-8),\n            googleId,\n            email: email || null,\n            role: \"customer\",\n          }).returning();\n          user = newUser;\n        }\n      }\n      \n      res.json({\n        user: {\n          id: user[0].id,\n          username: user[0].username,\n          phone: user[0].phone,\n          email: user[0].email,\n          role: user[0].role,\n        },\n      });\n    } catch (error) {\n      console.error(\"Google auth error:\", error);\n      res.status(500).json({ error: \"Google authentication failed\" });\n    }\n  });\n\n  // Seed data endpoint (for initial data population)\n  app.post(\"/api/seed\", async (_req: Request, res: Response) => {\n    try {\n      const existingCategories = await storage.getCategories();\n      \n      // Check if store data needs to be seeded (new tables)\n      const existingStores = await storage.getStores();\n      const DEMO_STORE_ID_CHECK = \"demo-store\";\n      const DEMO_PICKER_ID_CHECK = \"demo-picker\";\n      const DEMO_DRIVER_ID_CHECK = \"demo-driver\";\n      \n      if (existingCategories.length > 0) {\n        const demoUser = await storage.getUser(DEMO_USER_ID);\n        if (!demoUser) {\n          await db.insert(users).values({\n            id: DEMO_USER_ID,\n            username: \"demo\",\n            password: \"demo\",\n            phone: \"+62123456789\",\n          });\n        }\n        \n        // Seed store data if stores are empty but products exist\n        if (existingStores.length === 0) {\n          const allProducts = await storage.getProducts();\n          \n          // Only proceed if products exist\n          if (allProducts.length === 0) {\n            return res.json({ message: \"Cannot seed store data: no products found\" });\n          }\n          \n          // Create demo store\n          await db.insert(stores).values({\n            id: DEMO_STORE_ID_CHECK,\n            name: \"KilatGo Central Jakarta\",\n            address: \"Jl. Sudirman No. 1, Central Jakarta, DKI Jakarta 10220\",\n            latitude: \"-6.2088000\",\n            longitude: \"106.8456000\",\n            codAllowed: true,\n            isActive: true,\n          });\n\n          // Check if picker/driver users exist before creating\n          const existingPicker = await storage.getUser(DEMO_PICKER_ID_CHECK);\n          const existingDriver = await storage.getUser(DEMO_DRIVER_ID_CHECK);\n          \n          if (!existingPicker) {\n            await db.insert(users).values({\n              id: DEMO_PICKER_ID_CHECK,\n              username: \"picker1\",\n              password: \"picker123\",\n              phone: \"+6281234567890\",\n              role: \"picker\",\n            });\n          }\n          \n          if (!existingDriver) {\n            await db.insert(users).values({\n              id: DEMO_DRIVER_ID_CHECK,\n              username: \"driver1\",\n              password: \"driver123\",\n              phone: \"+6281234567891\",\n              role: \"driver\",\n            });\n          }\n\n          // Create store staff (check if not exists)\n          const existingStaff = await storage.getStoreStaff(DEMO_STORE_ID_CHECK);\n          if (existingStaff.length === 0) {\n            await db.insert(storeStaff).values([\n              {\n                id: \"staff-picker-1\",\n                userId: DEMO_PICKER_ID_CHECK,\n                storeId: DEMO_STORE_ID_CHECK,\n                role: \"picker\",\n                status: \"online\",\n              },\n              {\n                id: \"staff-driver-1\",\n                userId: DEMO_DRIVER_ID_CHECK,\n                storeId: DEMO_STORE_ID_CHECK,\n                role: \"driver\",\n                status: \"online\",\n              },\n            ]);\n          }\n\n          // Create inventory for all products\n          const inventoryEntries = allProducts.map((product, index) => ({\n            id: `inventory-${index + 1}`,\n            storeId: DEMO_STORE_ID_CHECK,\n            productId: product.id,\n            stockCount: product.stockCount,\n            isAvailable: product.inStock,\n          }));\n          await db.insert(storeInventory).values(inventoryEntries);\n          \n          return res.json({ message: \"Store data seeded successfully\" });\n        }\n        \n        return res.json({ message: \"Data already seeded\" });\n      }\n\n      const existingUser = await storage.getUser(DEMO_USER_ID);\n      if (!existingUser) {\n        await db.insert(users).values({\n          id: DEMO_USER_ID,\n          username: \"demo\",\n          password: \"demo\",\n          phone: \"+62123456789\",\n        });\n      }\n\n      const seedCategories = [\n        { id: \"1\", name: \"Milk\", icon: \"droplet\", color: \"#4A90E2\", image: \"/images/dairy_milk_products__f381a151.jpg\" },\n        { id: \"2\", name: \"Eggs\", icon: \"circle\", color: \"#FF9800\", image: \"/images/fresh_eggs_basket_fa_e1b74097.jpg\" },\n        { id: \"3\", name: \"Snacks\", icon: \"box\", color: \"#9C27B0\", image: \"/images/assorted_snacks_chip_5803ca41.jpg\" },\n        { id: \"4\", name: \"Fruits\", icon: \"sun\", color: \"#4CAF50\", image: \"/images/fresh_colorful_fruit_e3789c47.jpg\" },\n        { id: \"5\", name: \"Frozen\", icon: \"thermometer\", color: \"#00BCD4\", image: \"/images/frozen_food_products_880da67b.jpg\" },\n        { id: \"6\", name: \"Drinks\", icon: \"coffee\", color: \"#F44336\", image: \"/images/beverages_drinks_bot_7c35199f.jpg\" },\n        { id: \"7\", name: \"Veggies\", icon: \"feather\", color: \"#8BC34A\", image: \"/images/fresh_vegetables_gre_e9d9592a.jpg\" },\n        { id: \"8\", name: \"Meat\", icon: \"target\", color: \"#E91E63\", image: \"/images/raw_meat_beef_pork_c_4724e26c.jpg\" },\n      ];\n\n      await db.insert(categories).values(seedCategories);\n\n      const seedProducts = [\n        {\n          id: \"1\",\n          name: \"Fresh Full Cream Milk\",\n          brand: \"Ultra Milk\",\n          price: 18500,\n          originalPrice: 22000,\n          image: \"/images/fresh_milk_carton_bo_dc357425.jpg\",\n          categoryId: \"1\",\n          description: \"Fresh pasteurized full cream milk, rich in calcium and vitamin D.\",\n          nutrition: { calories: \"120 kcal\", protein: \"8g\", carbs: \"12g\", fat: \"5g\" },\n          inStock: true,\n          stockCount: 50,\n        },\n        {\n          id: \"2\",\n          name: \"Organic Free Range Eggs\",\n          brand: \"Happy Farm\",\n          price: 32000,\n          originalPrice: null,\n          image: \"/images/organic_eggs_in_cart_70f17317.jpg\",\n          categoryId: \"2\",\n          description: \"Premium organic eggs from free-range hens.\",\n          nutrition: { calories: \"70 kcal\", protein: \"6g\", carbs: \"0.5g\", fat: \"5g\" },\n          inStock: true,\n          stockCount: 30,\n        },\n        {\n          id: \"3\",\n          name: \"Potato Chips Original\",\n          brand: \"Chitato\",\n          price: 15000,\n          originalPrice: null,\n          image: \"/images/potato_chips_snack_b_9bdc2b89.jpg\",\n          categoryId: \"3\",\n          description: \"Crispy potato chips with original flavor.\",\n          nutrition: null,\n          inStock: true,\n          stockCount: 100,\n        },\n        {\n          id: \"4\",\n          name: \"Fresh Banana\",\n          brand: \"Local Farm\",\n          price: 8000,\n          originalPrice: null,\n          image: \"/images/fresh_ripe_yellow_ba_dd4d6986.jpg\",\n          categoryId: \"4\",\n          description: \"Sweet and ripe bananas, perfect for snacking.\",\n          nutrition: null,\n          inStock: true,\n          stockCount: 45,\n        },\n        {\n          id: \"5\",\n          name: \"Frozen Chicken Nuggets\",\n          brand: \"Fiesta\",\n          price: 45000,\n          originalPrice: 52000,\n          image: \"/images/frozen_chicken_nugge_202dc2ea.jpg\",\n          categoryId: \"5\",\n          description: \"Crispy chicken nuggets, ready to fry.\",\n          nutrition: null,\n          inStock: true,\n          stockCount: 25,\n        },\n        {\n          id: \"6\",\n          name: \"Mineral Water 1.5L\",\n          brand: \"Aqua\",\n          price: 5500,\n          originalPrice: null,\n          image: \"/images/mineral_water_bottle_9a3bc0d8.jpg\",\n          categoryId: \"6\",\n          description: \"Pure mineral water from natural springs.\",\n          nutrition: null,\n          inStock: true,\n          stockCount: 200,\n        },\n        {\n          id: \"7\",\n          name: \"Fresh Spinach\",\n          brand: \"Organic Green\",\n          price: 12000,\n          originalPrice: null,\n          image: \"/images/fresh_green_spinach__093ac523.jpg\",\n          categoryId: \"7\",\n          description: \"Fresh organic spinach, washed and ready to cook.\",\n          nutrition: null,\n          inStock: true,\n          stockCount: 20,\n        },\n        {\n          id: \"8\",\n          name: \"Beef Rendang Ready\",\n          brand: \"Kokita\",\n          price: 35000,\n          originalPrice: null,\n          image: \"/images/beef_rendang_indones_fb8c9020.jpg\",\n          categoryId: \"8\",\n          description: \"Ready-to-eat beef rendang with authentic Indonesian taste.\",\n          nutrition: null,\n          inStock: false,\n          stockCount: 0,\n        },\n      ];\n\n      await db.insert(products).values(seedProducts);\n\n      // Seed demo store in Central Jakarta\n      const DEMO_STORE_ID = \"demo-store\";\n      await db.insert(stores).values({\n        id: DEMO_STORE_ID,\n        name: \"KilatGo Central Jakarta\",\n        address: \"Jl. Sudirman No. 1, Central Jakarta, DKI Jakarta 10220\",\n        latitude: \"-6.2088000\",\n        longitude: \"106.8456000\",\n        codAllowed: true,\n        isActive: true,\n      });\n\n      // Seed picker and driver users\n      const DEMO_PICKER_ID = \"demo-picker\";\n      const DEMO_DRIVER_ID = \"demo-driver\";\n      \n      await db.insert(users).values([\n        {\n          id: DEMO_PICKER_ID,\n          username: \"picker1\",\n          password: \"picker123\",\n          phone: \"+6281234567890\",\n          role: \"picker\",\n        },\n        {\n          id: DEMO_DRIVER_ID,\n          username: \"driver1\",\n          password: \"driver123\",\n          phone: \"+6281234567891\",\n          role: \"driver\",\n        },\n      ]);\n\n      // Seed store staff assignments (picker and driver)\n      await db.insert(storeStaff).values([\n        {\n          id: \"staff-picker-1\",\n          userId: DEMO_PICKER_ID,\n          storeId: DEMO_STORE_ID,\n          role: \"picker\",\n          status: \"online\",\n        },\n        {\n          id: \"staff-driver-1\",\n          userId: DEMO_DRIVER_ID,\n          storeId: DEMO_STORE_ID,\n          role: \"driver\",\n          status: \"online\",\n        },\n      ]);\n\n      // Seed store inventory - link all products to the demo store\n      const inventoryEntries = seedProducts.map((product, index) => ({\n        id: `inventory-${index + 1}`,\n        storeId: DEMO_STORE_ID,\n        productId: product.id,\n        stockCount: product.stockCount,\n        isAvailable: product.inStock,\n      }));\n      await db.insert(storeInventory).values(inventoryEntries);\n\n      const seedVouchers = [\n        {\n          id: \"1\",\n          code: \"NEWUSER50\",\n          discount: 50,\n          discountType: \"percentage\",\n          minOrder: 50000,\n          validUntil: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n          description: \"50% off for new users\",\n        },\n        {\n          id: \"2\",\n          code: \"FREEDELIVERY\",\n          discount: 15000,\n          discountType: \"fixed\",\n          minOrder: 75000,\n          validUntil: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000),\n          description: \"Free delivery for orders above Rp75,000\",\n        },\n      ];\n\n      await db.insert(vouchers).values(seedVouchers);\n\n      res.json({ message: \"Data seeded successfully\" });\n    } catch (error) {\n      console.error(\"Seed error:\", error);\n      res.status(500).json({ error: \"Failed to seed data\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","path":null,"size_bytes":35348,"size_tokens":null},"client/components/ErrorFallback.tsx":{"content":"import React, { useState } from \"react\";\nimport { reloadAppAsync } from \"expo\";\nimport {\n  StyleSheet,\n  View,\n  Pressable,\n  ScrollView,\n  Text,\n  Modal,\n  Platform,\n} from \"react-native\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius, Fonts } from \"@/constants/theme\";\n\nexport type ErrorFallbackProps = {\n  error: Error;\n  resetError: () => void;\n};\n\nexport function ErrorFallback({ error, resetError }: ErrorFallbackProps) {\n  const { theme } = useTheme();\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const handleRestart = async () => {\n    try {\n      await reloadAppAsync();\n    } catch (restartError) {\n      console.error(\"Failed to restart app:\", restartError);\n      resetError();\n    }\n  };\n\n  const formatErrorDetails = (): string => {\n    let details = `Error: ${error.message}\\n\\n`;\n    if (error.stack) {\n      details += `Stack Trace:\\n${error.stack}`;\n    }\n    return details;\n  };\n\n  return (\n    <ThemedView style={styles.container}>\n      {__DEV__ ? (\n        <Pressable\n          onPress={() => setIsModalVisible(true)}\n          style={({ pressed }) => [\n            styles.topButton,\n            {\n              backgroundColor: theme.backgroundDefault,\n              opacity: pressed ? 0.8 : 1,\n            },\n          ]}\n        >\n          <Feather name=\"alert-circle\" size={20} color={theme.text} />\n        </Pressable>\n      ) : null}\n\n      <View style={styles.content}>\n        <ThemedText type=\"h1\" style={styles.title}>\n          Something went wrong\n        </ThemedText>\n\n        <ThemedText type=\"body\" style={styles.message}>\n          Please reload the app to continue.\n        </ThemedText>\n\n        <Pressable\n          onPress={handleRestart}\n          style={({ pressed }) => [\n            styles.button,\n            Platform.OS === 'web'\n              ? { boxShadow: '0px 2px 8px rgba(0, 0, 0, 0.1)' }\n              : {\n                  shadowColor: '#000',\n                  shadowOffset: { width: 0, height: 2 },\n                  shadowOpacity: 0.1,\n                  shadowRadius: 4,\n                  elevation: 3,\n                },\n            {\n              backgroundColor: theme.link,\n              opacity: pressed ? 0.9 : 1,\n              transform: [{ scale: pressed ? 0.98 : 1 }],\n            },\n          ]}\n        >\n          <ThemedText\n            type=\"body\"\n            style={[styles.buttonText, { color: theme.buttonText }]}\n          >\n            Try Again\n          </ThemedText>\n        </Pressable>\n      </View>\n\n      {__DEV__ ? (\n        <Modal\n          visible={isModalVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setIsModalVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <ThemedView style={styles.modalContainer}>\n              <View style={styles.modalHeader}>\n                <ThemedText type=\"h2\" style={styles.modalTitle}>\n                  Error Details\n                </ThemedText>\n                <Pressable\n                  onPress={() => setIsModalVisible(false)}\n                  style={({ pressed }) => [\n                    styles.closeButton,\n                    { opacity: pressed ? 0.6 : 1 },\n                  ]}\n                >\n                  <Feather name=\"x\" size={24} color={theme.text} />\n                </Pressable>\n              </View>\n\n              <ScrollView\n                style={styles.modalScrollView}\n                contentContainerStyle={styles.modalScrollContent}\n                showsVerticalScrollIndicator\n              >\n                <View\n                  style={[\n                    styles.errorContainer,\n                    { backgroundColor: theme.backgroundDefault },\n                  ]}\n                >\n                  <Text\n                    style={[\n                      styles.errorText,\n                      {\n                        color: theme.text,\n                        fontFamily: Fonts?.mono || \"monospace\",\n                      },\n                    ]}\n                    selectable\n                  >\n                    {formatErrorDetails()}\n                  </Text>\n                </View>\n              </ScrollView>\n            </ThemedView>\n          </View>\n        </Modal>\n      ) : null}\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: \"100%\",\n    height: \"100%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: Spacing[\"2xl\"],\n  },\n  content: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: Spacing.lg,\n    width: \"100%\",\n    maxWidth: 600,\n  },\n  title: {\n    textAlign: \"center\",\n    lineHeight: 40,\n  },\n  message: {\n    textAlign: \"center\",\n    opacity: 0.7,\n    lineHeight: 24,\n  },\n  topButton: {\n    position: \"absolute\",\n    top: Spacing[\"2xl\"] + Spacing.lg,\n    right: Spacing.lg,\n    width: 44,\n    height: 44,\n    borderRadius: BorderRadius.md,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    zIndex: 10,\n  },\n  button: {\n    paddingVertical: Spacing.lg,\n    borderRadius: BorderRadius.md,\n    paddingHorizontal: Spacing[\"2xl\"],\n    minWidth: 200,\n  },\n  buttonText: {\n    fontWeight: \"600\",\n    textAlign: \"center\",\n    fontSize: 16,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    justifyContent: \"flex-end\",\n  },\n  modalContainer: {\n    width: \"100%\",\n    height: \"90%\",\n    borderTopLeftRadius: BorderRadius.lg,\n    borderTopRightRadius: BorderRadius.lg,\n  },\n  modalHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingHorizontal: Spacing.lg,\n    paddingTop: Spacing.lg,\n    paddingBottom: Spacing.md,\n    borderBottomWidth: 1,\n    borderBottomColor: \"rgba(128, 128, 128, 0.2)\",\n  },\n  modalTitle: {\n    fontWeight: \"600\",\n  },\n  closeButton: {\n    padding: Spacing.xs,\n  },\n  modalScrollView: {\n    flex: 1,\n  },\n  modalScrollContent: {\n    padding: Spacing.lg,\n  },\n  errorContainer: {\n    width: \"100%\",\n    borderRadius: BorderRadius.md,\n    overflow: \"hidden\",\n    padding: Spacing.lg,\n  },\n  errorText: {\n    fontSize: 12,\n    lineHeight: 18,\n    width: \"100%\",\n  },\n});\n","path":null,"size_bytes":6394,"size_tokens":null},"client/navigation/OnboardingNavigator.tsx":{"content":"import React from \"react\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport WelcomeScreen from \"@/screens/onboarding/WelcomeScreen\";\nimport LocationScreen from \"@/screens/onboarding/LocationScreen\";\nimport PhoneSignupScreen from \"@/screens/onboarding/PhoneSignupScreen\";\nimport { useScreenOptions } from \"@/hooks/useScreenOptions\";\n\nexport type OnboardingStackParamList = {\n  Welcome: undefined;\n  Location: undefined;\n  PhoneSignup: undefined;\n};\n\ninterface OnboardingNavigatorProps {\n  onComplete: () => void;\n}\n\nconst Stack = createNativeStackNavigator<OnboardingStackParamList>();\n\nexport default function OnboardingNavigator({ onComplete }: OnboardingNavigatorProps) {\n  const screenOptions = useScreenOptions();\n\n  return (\n    <Stack.Navigator screenOptions={screenOptions}>\n      <Stack.Screen\n        name=\"Welcome\"\n        component={WelcomeScreen}\n        options={{ headerShown: false }}\n      />\n      <Stack.Screen\n        name=\"Location\"\n        component={LocationScreen}\n        options={{ headerShown: false }}\n      />\n      <Stack.Screen\n        name=\"PhoneSignup\"\n        options={{\n          headerTitle: \"Sign Up\",\n          headerTransparent: true,\n        }}\n      >\n        {() => <PhoneSignupScreen onComplete={onComplete} />}\n      </Stack.Screen>\n    </Stack.Navigator>\n  );\n}\n","path":null,"size_bytes":1341,"size_tokens":null},"client/index.js":{"content":"import { registerRootComponent } from \"expo\";\n\nimport App from \"@/App\";\n\nregisterRootComponent(App);\n","path":null,"size_bytes":101,"size_tokens":null},"client/screens/HelpCenterScreen.tsx":{"content":"import React, { useState } from \"react\";\nimport { View, StyleSheet, ScrollView, Pressable } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\n\ninterface FAQItem {\n  question: string;\n  answer: string;\n}\n\nconst faqs: FAQItem[] = [\n  {\n    question: \"How does 15-minute delivery work?\",\n    answer: \"We have multiple dark stores located across the city. When you place an order, it's prepared at the nearest store and delivered by our riders within 15 minutes.\",\n  },\n  {\n    question: \"What if my order is late?\",\n    answer: \"If your order arrives after the estimated time, contact our support team and we'll make it right with a voucher for your next order.\",\n  },\n  {\n    question: \"Can I cancel my order?\",\n    answer: \"You can cancel your order within 2 minutes of placing it. After that, our team has already started preparing your items.\",\n  },\n  {\n    question: \"What payment methods do you accept?\",\n    answer: \"We accept GoPay, OVO, ShopeePay, DANA, BCA Virtual Account, and Credit/Debit cards through Midtrans.\",\n  },\n  {\n    question: \"What if an item is out of stock?\",\n    answer: \"We'll notify you immediately and suggest similar alternatives. You can approve the replacement or skip the item.\",\n  },\n];\n\nexport default function HelpCenterScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const [expandedIndex, setExpandedIndex] = useState<number | null>(null);\n\n  const handleToggle = (index: number) => {\n    setExpandedIndex(expandedIndex === index ? null : index);\n  };\n\n  return (\n    <ScrollView\n      style={{ flex: 1, backgroundColor: theme.backgroundRoot }}\n      contentContainerStyle={[\n        styles.scrollContent,\n        {\n          paddingTop: headerHeight + Spacing.lg,\n          paddingBottom: insets.bottom + Spacing.xl,\n        },\n      ]}\n      showsVerticalScrollIndicator={false}\n    >\n      <View style={styles.contactSection}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          Need Help?\n        </ThemedText>\n        <View style={styles.contactOptions}>\n          <Pressable style={[styles.contactOption, { backgroundColor: theme.primary + \"20\" }]}>\n            <View style={[styles.contactIcon, { backgroundColor: theme.primary }]}>\n              <Feather name=\"message-circle\" size={20} color={theme.buttonText} />\n            </View>\n            <ThemedText type=\"body\" style={{ fontWeight: \"500\" }}>\n              Live Chat\n            </ThemedText>\n            <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n              Available 24/7\n            </ThemedText>\n          </Pressable>\n          \n          <Pressable style={[styles.contactOption, { backgroundColor: theme.secondary + \"20\" }]}>\n            <View style={[styles.contactIcon, { backgroundColor: theme.secondary }]}>\n              <Feather name=\"phone\" size={20} color=\"#FFFFFF\" />\n            </View>\n            <ThemedText type=\"body\" style={{ fontWeight: \"500\" }}>\n              Call Us\n            </ThemedText>\n            <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n              021-1500-888\n            </ThemedText>\n          </Pressable>\n        </View>\n      </View>\n      \n      <View style={styles.faqSection}>\n        <ThemedText type=\"h3\" style={styles.sectionTitle}>\n          Frequently Asked Questions\n        </ThemedText>\n        \n        {faqs.map((faq, index) => (\n          <Card key={index} style={styles.faqCard}>\n            <Pressable\n              style={styles.faqHeader}\n              onPress={() => handleToggle(index)}\n            >\n              <ThemedText type=\"body\" style={[styles.faqQuestion, { flex: 1 }]}>\n                {faq.question}\n              </ThemedText>\n              <Feather\n                name={expandedIndex === index ? \"chevron-up\" : \"chevron-down\"}\n                size={20}\n                color={theme.textSecondary}\n              />\n            </Pressable>\n            {expandedIndex === index ? (\n              <View style={styles.faqAnswer}>\n                <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n                  {faq.answer}\n                </ThemedText>\n              </View>\n            ) : null}\n          </Card>\n        ))}\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  scrollContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  sectionTitle: {\n    marginBottom: Spacing.lg,\n  },\n  contactSection: {\n    marginBottom: Spacing.xxl,\n  },\n  contactOptions: {\n    flexDirection: \"row\",\n    gap: Spacing.md,\n  },\n  contactOption: {\n    flex: 1,\n    alignItems: \"center\",\n    paddingVertical: Spacing.xl,\n    borderRadius: BorderRadius.md,\n  },\n  contactIcon: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: Spacing.sm,\n  },\n  faqSection: {},\n  faqCard: {\n    marginBottom: Spacing.md,\n    padding: 0,\n  },\n  faqHeader: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: Spacing.lg,\n  },\n  faqQuestion: {\n    fontWeight: \"500\",\n  },\n  faqAnswer: {\n    paddingHorizontal: Spacing.lg,\n    paddingBottom: Spacing.lg,\n    paddingTop: 0,\n  },\n});\n","path":null,"size_bytes":5553,"size_tokens":null},"client/screens/EditAddressScreen.tsx":{"content":"import React, { useState } from \"react\";\nimport { View, StyleSheet, TextInput } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Button } from \"@/components/Button\";\nimport { KeyboardAwareScrollViewCompat } from \"@/components/KeyboardAwareScrollViewCompat\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nexport default function EditAddressScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const navigation = useNavigation<NavigationProp>();\n  \n  const [label, setLabel] = useState(\"Home\");\n  const [address, setAddress] = useState(\"Jl. Sudirman No. 123\");\n  const [details, setDetails] = useState(\"Apartment Tower A, Unit 15B\");\n  const [city, setCity] = useState(\"Jakarta Selatan\");\n\n  const handleSave = () => {\n    navigation.goBack();\n  };\n\n  return (\n    <KeyboardAwareScrollViewCompat\n      style={{ flex: 1, backgroundColor: theme.backgroundRoot }}\n      contentContainerStyle={[\n        styles.scrollContent,\n        {\n          paddingTop: headerHeight + Spacing.lg,\n          paddingBottom: insets.bottom + Spacing.xl,\n        },\n      ]}\n    >\n      <View style={styles.form}>\n        <View style={styles.inputGroup}>\n          <ThemedText type=\"caption\" style={[styles.label, { color: theme.textSecondary }]}>\n            Label\n          </ThemedText>\n          <TextInput\n            style={[\n              styles.input,\n              {\n                backgroundColor: theme.backgroundDefault,\n                borderColor: theme.border,\n                color: theme.text,\n              },\n            ]}\n            placeholder=\"e.g., Home, Office\"\n            placeholderTextColor={theme.textSecondary}\n            value={label}\n            onChangeText={setLabel}\n          />\n        </View>\n        \n        <View style={styles.inputGroup}>\n          <ThemedText type=\"caption\" style={[styles.label, { color: theme.textSecondary }]}>\n            Street Address\n          </ThemedText>\n          <TextInput\n            style={[\n              styles.input,\n              {\n                backgroundColor: theme.backgroundDefault,\n                borderColor: theme.border,\n                color: theme.text,\n              },\n            ]}\n            placeholder=\"Enter street address\"\n            placeholderTextColor={theme.textSecondary}\n            value={address}\n            onChangeText={setAddress}\n          />\n        </View>\n        \n        <View style={styles.inputGroup}>\n          <ThemedText type=\"caption\" style={[styles.label, { color: theme.textSecondary }]}>\n            Additional Details (Optional)\n          </ThemedText>\n          <TextInput\n            style={[\n              styles.input,\n              styles.multilineInput,\n              {\n                backgroundColor: theme.backgroundDefault,\n                borderColor: theme.border,\n                color: theme.text,\n              },\n            ]}\n            placeholder=\"Apartment, floor, building name, etc.\"\n            placeholderTextColor={theme.textSecondary}\n            value={details}\n            onChangeText={setDetails}\n            multiline\n            numberOfLines={3}\n            textAlignVertical=\"top\"\n          />\n        </View>\n        \n        <View style={styles.inputGroup}>\n          <ThemedText type=\"caption\" style={[styles.label, { color: theme.textSecondary }]}>\n            City\n          </ThemedText>\n          <TextInput\n            style={[\n              styles.input,\n              {\n                backgroundColor: theme.backgroundDefault,\n                borderColor: theme.border,\n                color: theme.text,\n              },\n            ]}\n            placeholder=\"Enter city\"\n            placeholderTextColor={theme.textSecondary}\n            value={city}\n            onChangeText={setCity}\n          />\n        </View>\n      </View>\n      \n      <View style={styles.footer}>\n        <Button onPress={handleSave}>Save Address</Button>\n      </View>\n    </KeyboardAwareScrollViewCompat>\n  );\n}\n\nconst styles = StyleSheet.create({\n  scrollContent: {\n    flexGrow: 1,\n    paddingHorizontal: Spacing.lg,\n  },\n  form: {\n    flex: 1,\n  },\n  inputGroup: {\n    marginBottom: Spacing.xl,\n  },\n  label: {\n    marginBottom: Spacing.sm,\n    textTransform: \"uppercase\",\n    letterSpacing: 1,\n  },\n  input: {\n    height: Spacing.inputHeight,\n    borderRadius: BorderRadius.sm,\n    borderWidth: 1,\n    paddingHorizontal: Spacing.lg,\n    fontSize: 16,\n  },\n  multilineInput: {\n    height: 100,\n    paddingTop: Spacing.md,\n    paddingBottom: Spacing.md,\n  },\n  footer: {\n    paddingTop: Spacing.lg,\n  },\n});\n","path":null,"size_bytes":5120,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/node-postgres\";\nimport pg from \"pg\";\nimport * as schema from \"@shared/schema\";\n\nconst { Pool } = pg;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":395,"size_tokens":null},"client/navigation/MainTabNavigator.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, Pressable } from \"react-native\";\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { BlurView } from \"expo-blur\";\nimport { Platform } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n} from \"react-native-reanimated\";\n\nimport HomeStackNavigator from \"@/navigation/HomeStackNavigator\";\nimport OrdersScreen from \"@/screens/OrdersScreen\";\nimport AccountScreen from \"@/screens/AccountScreen\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Colors, Spacing, BorderRadius, Shadows } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\n\nexport type MainTabParamList = {\n  HomeTab: undefined;\n  OrdersTab: undefined;\n  AccountTab: undefined;\n};\n\nconst Tab = createBottomTabNavigator<MainTabParamList>();\n\nfunction VoiceFAB() {\n  const { theme } = useTheme();\n  const insets = useSafeAreaInsets();\n  const navigation = useNavigation<NativeStackNavigationProp<RootStackParamList>>();\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const handlePressIn = () => {\n    scale.value = withSpring(0.95);\n  };\n\n  const handlePressOut = () => {\n    scale.value = withSpring(1);\n  };\n\n  return (\n    <Animated.View\n      style={[\n        styles.fabContainer,\n        { bottom: 60 + insets.bottom + Spacing.lg },\n        animatedStyle,\n      ]}\n    >\n      <Pressable\n        onPress={() => navigation.navigate(\"VoiceOrderModal\")}\n        onPressIn={handlePressIn}\n        onPressOut={handlePressOut}\n        style={[styles.fab, { backgroundColor: theme.primary }, Shadows.fab]}\n      >\n        <Feather name=\"mic\" size={28} color={theme.buttonText} />\n      </Pressable>\n    </Animated.View>\n  );\n}\n\nexport default function MainTabNavigator() {\n  const { theme, isDark } = useTheme();\n\n  return (\n    <View style={{ flex: 1 }}>\n      <Tab.Navigator\n        initialRouteName=\"HomeTab\"\n        screenOptions={{\n          tabBarActiveTintColor: theme.primary,\n          tabBarInactiveTintColor: theme.tabIconDefault,\n          tabBarStyle: {\n            position: \"absolute\",\n            backgroundColor: Platform.select({\n              ios: \"transparent\",\n              android: theme.backgroundRoot,\n            }),\n            borderTopWidth: 0,\n            elevation: 0,\n          },\n          tabBarBackground: () =>\n            Platform.OS === \"ios\" ? (\n              <BlurView\n                intensity={100}\n                tint={isDark ? \"dark\" : \"light\"}\n                style={StyleSheet.absoluteFill}\n              />\n            ) : null,\n          headerShown: false,\n        }}\n      >\n        <Tab.Screen\n          name=\"HomeTab\"\n          component={HomeStackNavigator}\n          options={{\n            title: \"Home\",\n            tabBarIcon: ({ color, size }) => (\n              <Feather name=\"home\" size={size} color={color} />\n            ),\n          }}\n        />\n        <Tab.Screen\n          name=\"OrdersTab\"\n          component={OrdersScreen}\n          options={{\n            title: \"Orders\",\n            tabBarIcon: ({ color, size }) => (\n              <Feather name=\"shopping-bag\" size={size} color={color} />\n            ),\n          }}\n        />\n        <Tab.Screen\n          name=\"AccountTab\"\n          component={AccountScreen}\n          options={{\n            title: \"Account\",\n            tabBarIcon: ({ color, size }) => (\n              <Feather name=\"user\" size={size} color={color} />\n            ),\n          }}\n        />\n      </Tab.Navigator>\n      <VoiceFAB />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fabContainer: {\n    position: \"absolute\",\n    right: Spacing.lg,\n    zIndex: 100,\n  },\n  fab: {\n    width: 64,\n    height: 64,\n    borderRadius: 32,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n","path":null,"size_bytes":4166,"size_tokens":null},"client/hooks/useColorScheme.ts":{"content":"export { useColorScheme } from \"react-native\";\n","path":null,"size_bytes":47,"size_tokens":null},"client/navigation/HomeStackNavigator.tsx":{"content":"import React from \"react\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport HomeScreen from \"@/screens/HomeScreen\";\nimport { HeaderTitle } from \"@/components/HeaderTitle\";\nimport { useScreenOptions } from \"@/hooks/useScreenOptions\";\n\nexport type HomeStackParamList = {\n  Home: undefined;\n};\n\nconst Stack = createNativeStackNavigator<HomeStackParamList>();\n\nexport default function HomeStackNavigator() {\n  const screenOptions = useScreenOptions();\n\n  return (\n    <Stack.Navigator screenOptions={screenOptions}>\n      <Stack.Screen\n        name=\"Home\"\n        component={HomeScreen}\n        options={{\n          headerTitle: () => <HeaderTitle title=\"KilatGo\" />,\n        }}\n      />\n    </Stack.Navigator>\n  );\n}\n","path":null,"size_bytes":749,"size_tokens":null},"client/screens/CategoryScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, FlatList, Pressable, ActivityIndicator, Image } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { useNavigation, useRoute, RouteProp } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { Product } from \"@/types\";\nimport { useCart } from \"@/context/CartContext\";\nimport { getImageUrl } from \"@/lib/image-url\";\nimport { getApiUrl } from \"@/lib/query-client\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\ntype CategoryRouteProp = RouteProp<RootStackParamList, \"Category\">;\n\ninterface APIProduct {\n  id: string;\n  name: string;\n  brand: string;\n  price: number;\n  originalPrice: number | null;\n  image: string | null;\n  categoryId: string;\n  description: string | null;\n  nutrition: any;\n  inStock: boolean;\n  stockCount: number;\n}\n\nexport default function CategoryScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const navigation = useNavigation<NavigationProp>();\n  const route = useRoute<CategoryRouteProp>();\n  const { category } = route.params;\n  const { addToCart } = useCart();\n\n  const { data: apiProducts = [], isLoading } = useQuery<APIProduct[]>({\n    queryKey: [\"/api/products\", `categoryId=${category.id}`],\n    queryFn: async () => {\n      const url = new URL(`/api/products?categoryId=${category.id}`, getApiUrl());\n      const res = await fetch(url.toString());\n      return res.json();\n    },\n  });\n\n  const products: Product[] = apiProducts.map((p) => ({\n    id: p.id,\n    name: p.name,\n    brand: p.brand,\n    price: p.price,\n    originalPrice: p.originalPrice || undefined,\n    image: p.image || \"\",\n    category: p.categoryId,\n    description: p.description || \"\",\n    nutrition: p.nutrition,\n    inStock: p.inStock,\n    stockCount: p.stockCount,\n  }));\n\n  const formatPrice = (price: number) => {\n    return `Rp ${price.toLocaleString(\"id-ID\")}`;\n  };\n\n  const handleProductPress = (product: Product) => {\n    navigation.navigate(\"ProductDetail\", { product });\n  };\n\n  const handleAddToCart = (product: Product) => {\n    addToCart(product, 1);\n  };\n\n  const renderProduct = ({ item }: { item: Product }) => (\n    <Pressable\n      style={[styles.productCard, { backgroundColor: theme.cardBackground }]}\n      onPress={() => handleProductPress(item)}\n    >\n      <View style={[styles.productImageContainer, { backgroundColor: theme.backgroundDefault }]}>\n        {item.image ? (\n          <Image source={{ uri: getImageUrl(item.image) }} style={styles.productImage} />\n        ) : (\n          <Feather name=\"package\" size={32} color={theme.textSecondary} />\n        )}\n        {!item.inStock ? (\n          <View style={[styles.outOfStock, { backgroundColor: theme.error }]}>\n            <ThemedText type=\"small\" style={{ color: \"#FFFFFF\", fontSize: 10 }}>\n              {t.product.outOfStock}\n            </ThemedText>\n          </View>\n        ) : null}\n      </View>\n      <View style={styles.productInfo}>\n        <ThemedText type=\"caption\" numberOfLines={2} style={styles.productName}>\n          {item.name}\n        </ThemedText>\n        <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n          {item.brand}\n        </ThemedText>\n        <View style={styles.priceRow}>\n          <View>\n            <ThemedText type=\"body\" style={{ fontWeight: \"600\", color: theme.primary }}>\n              {formatPrice(item.price)}\n            </ThemedText>\n            {item.originalPrice ? (\n              <ThemedText\n                type=\"small\"\n                style={{ color: theme.textSecondary, textDecorationLine: \"line-through\" }}\n              >\n                {formatPrice(item.originalPrice)}\n              </ThemedText>\n            ) : null}\n          </View>\n          {item.inStock ? (\n            <Pressable \n              style={[styles.addButton, { backgroundColor: theme.primary }]}\n              onPress={(e) => {\n                e.stopPropagation();\n                handleAddToCart(item);\n              }}\n            >\n              <Feather name=\"plus\" size={16} color={theme.buttonText} />\n            </Pressable>\n          ) : null}\n        </View>\n      </View>\n    </Pressable>\n  );\n\n  if (isLoading) {\n    return (\n      <View style={[styles.loadingContainer, { backgroundColor: theme.backgroundRoot }]}>\n        <ActivityIndicator size=\"large\" color={theme.primary} />\n      </View>\n    );\n  }\n\n  return (\n    <View style={{ flex: 1, backgroundColor: theme.backgroundRoot }}>\n      <FlatList\n        data={products}\n        renderItem={renderProduct}\n        keyExtractor={(item) => item.id}\n        numColumns={2}\n        contentContainerStyle={[\n          styles.listContent,\n          {\n            paddingTop: headerHeight + Spacing.lg,\n            paddingBottom: insets.bottom + Spacing.xl,\n          },\n        ]}\n        columnWrapperStyle={styles.row}\n        showsVerticalScrollIndicator={false}\n        ListEmptyComponent={\n          <View style={styles.emptyState}>\n            <Feather name=\"package\" size={48} color={theme.textSecondary} />\n            <ThemedText type=\"body\" style={{ color: theme.textSecondary, marginTop: Spacing.md }}>\n              {t.category.noProducts}\n            </ThemedText>\n          </View>\n        }\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  listContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  row: {\n    gap: Spacing.md,\n    marginBottom: Spacing.md,\n  },\n  productCard: {\n    flex: 1,\n    borderRadius: BorderRadius.md,\n    overflow: \"hidden\",\n  },\n  productImageContainer: {\n    height: 120,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    overflow: \"hidden\",\n  },\n  productImage: {\n    width: \"100%\",\n    height: \"100%\",\n    resizeMode: \"cover\",\n  },\n  outOfStock: {\n    position: \"absolute\",\n    top: Spacing.sm,\n    left: Spacing.sm,\n    paddingHorizontal: Spacing.sm,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n  },\n  productInfo: {\n    padding: Spacing.md,\n  },\n  productName: {\n    marginBottom: Spacing.xs,\n    minHeight: 36,\n  },\n  priceRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-end\",\n    marginTop: Spacing.sm,\n  },\n  addButton: {\n    width: 28,\n    height: 28,\n    borderRadius: 14,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  emptyState: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingVertical: Spacing.xxl * 2,\n  },\n  loadingContainer: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n","path":null,"size_bytes":7129,"size_tokens":null},"client/screens/CartScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, FlatList, Pressable, ActivityIndicator, Image } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Button } from \"@/components/Button\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius, Shadows } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\nimport { CartItem } from \"@/types\";\nimport { useCart } from \"@/context/CartContext\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { getImageUrl } from \"@/lib/image-url\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\ninterface CartItemWithId extends CartItem {\n  cartItemId?: string;\n}\n\nexport default function CartScreen() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n  const { theme } = useTheme();\n  const navigation = useNavigation<NavigationProp>();\n  const { items, isLoading, updateQuantity, subtotal } = useCart();\n  const { t } = useLanguage();\n\n  const formatPrice = (price: number) => {\n    return `Rp ${price.toLocaleString(\"id-ID\")}`;\n  };\n\n  const handleUpdateQuantity = (productId: string, newQuantity: number) => {\n    updateQuantity(productId, newQuantity);\n  };\n\n  const deliveryFee = 10000;\n  const total = subtotal + deliveryFee;\n\n  const renderCartItem = ({ item }: { item: CartItemWithId }) => (\n    <Card style={styles.cartItemCard}>\n      <View style={styles.cartItemContent}>\n        <View style={[styles.productImage, { backgroundColor: theme.backgroundDefault }]}>\n          {item.product.image ? (\n            <Image source={{ uri: getImageUrl(item.product.image) }} style={styles.productImageContent} />\n          ) : (\n            <Feather name=\"package\" size={24} color={theme.textSecondary} />\n          )}\n        </View>\n        <View style={styles.productDetails}>\n          <ThemedText type=\"body\" numberOfLines={2} style={{ fontWeight: \"500\" }}>\n            {item.product.name}\n          </ThemedText>\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n            {item.product.brand}\n          </ThemedText>\n          <ThemedText type=\"body\" style={{ color: theme.primary, fontWeight: \"600\" }}>\n            {formatPrice(item.product.price)}\n          </ThemedText>\n        </View>\n        <View style={styles.quantityContainer}>\n          <Pressable\n            style={[styles.quantityBtn, { backgroundColor: theme.backgroundDefault }]}\n            onPress={() => handleUpdateQuantity(item.product.id, item.quantity - 1)}\n          >\n            <Feather\n              name={item.quantity === 1 ? \"trash-2\" : \"minus\"}\n              size={14}\n              color={item.quantity === 1 ? theme.error : theme.text}\n            />\n          </Pressable>\n          <ThemedText type=\"body\" style={styles.quantityText}>\n            {item.quantity}\n          </ThemedText>\n          <Pressable\n            style={[styles.quantityBtn, { backgroundColor: theme.primary }]}\n            onPress={() => handleUpdateQuantity(item.product.id, item.quantity + 1)}\n          >\n            <Feather name=\"plus\" size={14} color={theme.buttonText} />\n          </Pressable>\n        </View>\n      </View>\n    </Card>\n  );\n\n  if (isLoading) {\n    return (\n      <View style={[styles.loadingContainer, { backgroundColor: theme.backgroundRoot }]}>\n        <ActivityIndicator size=\"large\" color={theme.primary} />\n      </View>\n    );\n  }\n\n  return (\n    <View style={{ flex: 1, backgroundColor: theme.backgroundRoot }}>\n      <FlatList\n        data={items as CartItemWithId[]}\n        renderItem={renderCartItem}\n        keyExtractor={(item) => item.product.id}\n        contentContainerStyle={[\n          styles.listContent,\n          {\n            paddingTop: headerHeight + Spacing.lg,\n            paddingBottom: 200,\n          },\n        ]}\n        showsVerticalScrollIndicator={false}\n        ListEmptyComponent={\n          <View style={styles.emptyState}>\n            <Feather name=\"shopping-cart\" size={64} color={theme.textSecondary} />\n            <ThemedText type=\"h3\" style={{ marginTop: Spacing.lg }}>\n              {t.cart.empty}\n            </ThemedText>\n            <ThemedText type=\"body\" style={{ color: theme.textSecondary, marginTop: Spacing.sm }}>\n              {t.cart.emptyDescription}\n            </ThemedText>\n            <Button\n              variant=\"secondary\"\n              onPress={() => navigation.goBack()}\n              style={{ marginTop: Spacing.xl }}\n            >\n              {t.home.browseProducts}\n            </Button>\n          </View>\n        }\n      />\n      \n      {items.length > 0 ? (\n        <View\n          style={[\n            styles.footer,\n            {\n              backgroundColor: theme.backgroundRoot,\n              paddingBottom: insets.bottom + Spacing.lg,\n            },\n            Shadows.medium,\n          ]}\n        >\n          <View style={styles.priceBreakdown}>\n            <View style={styles.priceRow}>\n              <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n                {t.checkout.subtotal}\n              </ThemedText>\n              <ThemedText type=\"body\">{formatPrice(subtotal)}</ThemedText>\n            </View>\n            <View style={styles.priceRow}>\n              <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n                {t.checkout.deliveryFee}\n              </ThemedText>\n              <ThemedText type=\"body\">{formatPrice(deliveryFee)}</ThemedText>\n            </View>\n            <View style={[styles.priceRow, styles.totalRow]}>\n              <ThemedText type=\"h3\">{t.checkout.total}</ThemedText>\n              <ThemedText type=\"h3\" style={{ color: theme.primary }}>\n                {formatPrice(total)}\n              </ThemedText>\n            </View>\n          </View>\n          <Button onPress={() => navigation.navigate(\"Checkout\")}>\n            {t.cart.checkout}\n          </Button>\n        </View>\n      ) : null}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  listContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  cartItemCard: {\n    marginBottom: Spacing.md,\n  },\n  cartItemContent: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  productImage: {\n    width: 60,\n    height: 60,\n    borderRadius: BorderRadius.sm,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    overflow: \"hidden\",\n  },\n  productImageContent: {\n    width: \"100%\",\n    height: \"100%\",\n    resizeMode: \"cover\",\n  },\n  productDetails: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  quantityContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.sm,\n  },\n  quantityBtn: {\n    width: 28,\n    height: 28,\n    borderRadius: 14,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  quantityText: {\n    minWidth: 24,\n    textAlign: \"center\",\n    fontWeight: \"600\",\n  },\n  emptyState: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingVertical: Spacing.xxl * 2,\n  },\n  footer: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    paddingTop: Spacing.lg,\n    paddingHorizontal: Spacing.lg,\n  },\n  priceBreakdown: {\n    marginBottom: Spacing.lg,\n  },\n  priceRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    marginBottom: Spacing.sm,\n  },\n  totalRow: {\n    marginTop: Spacing.sm,\n    paddingTop: Spacing.md,\n    borderTopWidth: 1,\n    borderTopColor: \"#E0E0E0\",\n  },\n  loadingContainer: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n","path":null,"size_bytes":7880,"size_tokens":null},"client/context/CartContext.tsx":{"content":"import React, { createContext, useContext, useEffect, useState, useCallback } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/query-client\";\nimport { Product, CartItem as CartItemType } from \"@/types\";\n\ninterface CartContextType {\n  items: CartItemType[];\n  isLoading: boolean;\n  addToCart: (product: Product, quantity?: number) => void;\n  removeFromCart: (productId: string) => void;\n  updateQuantity: (productId: string, quantity: number) => void;\n  clearCart: () => void;\n  itemCount: number;\n  subtotal: number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\ninterface CartItemFromAPI {\n  id: string;\n  userId: string;\n  productId: string;\n  quantity: number;\n  product: {\n    id: string;\n    name: string;\n    brand: string;\n    price: number;\n    originalPrice: number | null;\n    image: string | null;\n    categoryId: string;\n    description: string | null;\n    nutrition: any;\n    inStock: boolean;\n    stockCount: number;\n  };\n}\n\nexport function CartProvider({ children }: { children: React.ReactNode }) {\n  const queryClient = useQueryClient();\n  \n  const { data: cartData = [], isLoading } = useQuery<CartItemFromAPI[]>({\n    queryKey: [\"/api/cart\"],\n  });\n\n  const items: CartItemType[] = cartData.map((item) => ({\n    product: {\n      id: item.product.id,\n      name: item.product.name,\n      brand: item.product.brand,\n      price: item.product.price,\n      originalPrice: item.product.originalPrice || undefined,\n      image: item.product.image || \"\",\n      category: item.product.categoryId,\n      description: item.product.description || \"\",\n      nutrition: item.product.nutrition,\n      inStock: item.product.inStock,\n      stockCount: item.product.stockCount,\n    },\n    quantity: item.quantity,\n    cartItemId: item.id,\n  }));\n\n  const addMutation = useMutation({\n    mutationFn: async ({ productId, quantity }: { productId: string; quantity: number }) => {\n      const res = await apiRequest(\"POST\", \"/api/cart\", { productId, quantity });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cart\"] });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ cartItemId, quantity }: { cartItemId: string; quantity: number }) => {\n      const res = await apiRequest(\"PUT\", `/api/cart/${cartItemId}`, { quantity });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cart\"] });\n    },\n  });\n\n  const removeMutation = useMutation({\n    mutationFn: async (cartItemId: string) => {\n      const res = await apiRequest(\"DELETE\", `/api/cart/${cartItemId}`);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cart\"] });\n    },\n  });\n\n  const clearMutation = useMutation({\n    mutationFn: async () => {\n      const res = await apiRequest(\"DELETE\", \"/api/cart\");\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cart\"] });\n    },\n  });\n\n  const addToCart = useCallback((product: Product, quantity = 1) => {\n    addMutation.mutate({ productId: product.id, quantity });\n  }, [addMutation]);\n\n  const removeFromCart = useCallback((productId: string) => {\n    const item = items.find((i) => i.product.id === productId);\n    if (item && (item as any).cartItemId) {\n      removeMutation.mutate((item as any).cartItemId);\n    }\n  }, [items, removeMutation]);\n\n  const updateQuantity = useCallback((productId: string, quantity: number) => {\n    const item = items.find((i) => i.product.id === productId);\n    if (item && (item as any).cartItemId) {\n      if (quantity <= 0) {\n        removeMutation.mutate((item as any).cartItemId);\n      } else {\n        updateMutation.mutate({ cartItemId: (item as any).cartItemId, quantity });\n      }\n    }\n  }, [items, updateMutation, removeMutation]);\n\n  const clearCart = useCallback(() => {\n    clearMutation.mutate();\n  }, [clearMutation]);\n\n  const itemCount = items.reduce((sum, item) => sum + item.quantity, 0);\n  const subtotal = items.reduce((sum, item) => sum + item.product.price * item.quantity, 0);\n\n  return (\n    <CartContext.Provider\n      value={{\n        items,\n        isLoading,\n        addToCart,\n        removeFromCart,\n        updateQuantity,\n        clearCart,\n        itemCount,\n        subtotal,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error(\"useCart must be used within a CartProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":4695,"size_tokens":null},"server/storeAvailability.ts":{"content":"import { storage } from \"./storage\";\nimport type { Store } from \"@shared/schema\";\n\nconst EARTH_RADIUS_KM = 6371;\nconst MAX_DELIVERY_RADIUS_KM = 5;\n\nfunction toRadians(degrees: number): number {\n  return degrees * (Math.PI / 180);\n}\n\nexport function calculateHaversineDistance(\n  lat1: number,\n  lng1: number,\n  lat2: number,\n  lng2: number\n): number {\n  const dLat = toRadians(lat2 - lat1);\n  const dLng = toRadians(lng2 - lng1);\n\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRadians(lat1)) *\n      Math.cos(toRadians(lat2)) *\n      Math.sin(dLng / 2) *\n      Math.sin(dLng / 2);\n\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n  return EARTH_RADIUS_KM * c;\n}\n\nexport interface StoreWithDistance extends Store {\n  distanceKm: number;\n  hasOnlinePicker: boolean;\n  hasOnlineDriver: boolean;\n  isAvailable: boolean;\n}\n\nexport async function findNearestAvailableStore(\n  customerLat: number,\n  customerLng: number\n): Promise<StoreWithDistance | null> {\n  const stores = await storage.getStores();\n  \n  const storesWithDistance: StoreWithDistance[] = [];\n  \n  for (const store of stores) {\n    if (!store.isActive) continue;\n    \n    const storeLat = parseFloat(String(store.latitude));\n    const storeLng = parseFloat(String(store.longitude));\n    \n    const distanceKm = calculateHaversineDistance(\n      customerLat,\n      customerLng,\n      storeLat,\n      storeLng\n    );\n    \n    if (distanceKm > MAX_DELIVERY_RADIUS_KM) continue;\n    \n    const onlineStaff = await storage.getOnlineStaffByStore(store.id);\n    const hasOnlinePicker = onlineStaff.pickers.length > 0;\n    const hasOnlineDriver = onlineStaff.drivers.length > 0;\n    const isAvailable = hasOnlinePicker && hasOnlineDriver;\n    \n    storesWithDistance.push({\n      ...store,\n      distanceKm,\n      hasOnlinePicker,\n      hasOnlineDriver,\n      isAvailable,\n    });\n  }\n  \n  const availableStores = storesWithDistance.filter(s => s.isAvailable);\n  \n  if (availableStores.length === 0) return null;\n  \n  availableStores.sort((a, b) => a.distanceKm - b.distanceKm);\n  \n  return availableStores[0];\n}\n\nexport async function getStoresWithAvailability(\n  customerLat: number,\n  customerLng: number\n): Promise<StoreWithDistance[]> {\n  const stores = await storage.getStores();\n  \n  const storesWithDistance: StoreWithDistance[] = [];\n  \n  for (const store of stores) {\n    if (!store.isActive) continue;\n    \n    const storeLat = parseFloat(String(store.latitude));\n    const storeLng = parseFloat(String(store.longitude));\n    \n    const distanceKm = calculateHaversineDistance(\n      customerLat,\n      customerLng,\n      storeLat,\n      storeLng\n    );\n    \n    const onlineStaff = await storage.getOnlineStaffByStore(store.id);\n    const hasOnlinePicker = onlineStaff.pickers.length > 0;\n    const hasOnlineDriver = onlineStaff.drivers.length > 0;\n    const isAvailable = hasOnlinePicker && hasOnlineDriver && distanceKm <= MAX_DELIVERY_RADIUS_KM;\n    \n    storesWithDistance.push({\n      ...store,\n      distanceKm,\n      hasOnlinePicker,\n      hasOnlineDriver,\n      isAvailable,\n    });\n  }\n  \n  storesWithDistance.sort((a, b) => a.distanceKm - b.distanceKm);\n  \n  return storesWithDistance;\n}\n\nexport function checkDeliveryAvailable(distanceKm: number): boolean {\n  return distanceKm <= MAX_DELIVERY_RADIUS_KM;\n}\n\nexport function estimateDeliveryTime(distanceKm: number): number {\n  const basePickingTime = 5;\n  const speedKmPerMin = 0.5;\n  const deliveryTime = Math.ceil(distanceKm / speedKmPerMin);\n  return basePickingTime + deliveryTime;\n}\n","path":null,"size_bytes":3553,"size_tokens":null},"client/screens/LanguageScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, Pressable } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing } from \"@/constants/theme\";\nimport { Language } from \"@/constants/translations\";\n\ninterface LanguageOption {\n  code: Language;\n  name: string;\n  nativeName: string;\n}\n\nconst languages: LanguageOption[] = [\n  { code: \"en\", name: \"English\", nativeName: \"English\" },\n  { code: \"id\", name: \"Indonesian\", nativeName: \"Bahasa Indonesia\" },\n];\n\nfunction LanguageOptionRow({\n  languageOption,\n  isSelected,\n  onSelect,\n  currentLabel,\n}: {\n  languageOption: LanguageOption;\n  isSelected: boolean;\n  onSelect: () => void;\n  currentLabel: string;\n}) {\n  const { theme } = useTheme();\n  \n  return (\n    <Pressable style={styles.languageRow} onPress={onSelect}>\n      <View style={styles.languageInfo}>\n        <View style={styles.labelRow}>\n          <ThemedText type=\"body\" style={{ fontWeight: \"500\" }}>\n            {languageOption.name}\n          </ThemedText>\n          {isSelected ? (\n            <View style={[styles.currentBadge, { backgroundColor: theme.primary + \"20\" }]}>\n              <ThemedText type=\"small\" style={{ color: theme.primary, fontWeight: \"600\" }}>\n                {currentLabel}\n              </ThemedText>\n            </View>\n          ) : null}\n        </View>\n        <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n          {languageOption.nativeName}\n        </ThemedText>\n      </View>\n      {isSelected ? (\n        <View style={[styles.checkCircle, { backgroundColor: theme.primary }]}>\n          <Feather name=\"check\" size={16} color={theme.buttonText} />\n        </View>\n      ) : (\n        <View style={[styles.emptyCircle, { borderColor: theme.border }]} />\n      )}\n    </Pressable>\n  );\n}\n\nexport default function LanguageScreen() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const { language, setLanguage, t } = useLanguage();\n\n  const handleSelectLanguage = async (code: Language) => {\n    await setLanguage(code);\n  };\n\n  return (\n    <ThemedView style={styles.container}>\n      <View\n        style={[\n          styles.content,\n          {\n            paddingTop: Spacing.lg,\n            paddingBottom: insets.bottom + Spacing.xl,\n          },\n        ]}\n      >\n        <ThemedText type=\"caption\" style={[styles.sectionTitle, { color: theme.textSecondary }]}>\n          {t.language.selectLanguage.toUpperCase()}\n        </ThemedText>\n        \n        <Card style={styles.card}>\n          {languages.map((lang, index) => (\n            <View key={lang.code}>\n              <LanguageOptionRow\n                languageOption={lang}\n                isSelected={language === lang.code}\n                onSelect={() => handleSelectLanguage(lang.code)}\n                currentLabel={t.language.current}\n              />\n              {index < languages.length - 1 ? (\n                <View style={[styles.divider, { backgroundColor: theme.border }]} />\n              ) : null}\n            </View>\n          ))}\n        </Card>\n        \n        <ThemedText type=\"small\" style={[styles.note, { color: theme.textSecondary }]}>\n          {language === \"en\" \n            ? \"App will use your selected language for all content.\"\n            : \"Aplikasi akan menggunakan bahasa yang Anda pilih untuk semua konten.\"}\n        </ThemedText>\n      </View>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: Spacing.lg,\n  },\n  sectionTitle: {\n    marginBottom: Spacing.sm,\n    marginLeft: Spacing.xs,\n    letterSpacing: 1,\n  },\n  card: {\n    padding: 0,\n  },\n  languageRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: Spacing.lg,\n  },\n  languageInfo: {\n    flex: 1,\n  },\n  labelRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.sm,\n  },\n  currentBadge: {\n    paddingHorizontal: Spacing.sm,\n    paddingVertical: 2,\n    borderRadius: 4,\n  },\n  checkCircle: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  emptyCircle: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    borderWidth: 2,\n  },\n  divider: {\n    height: 1,\n    marginHorizontal: Spacing.lg,\n  },\n  note: {\n    textAlign: \"center\",\n    marginTop: Spacing.lg,\n    paddingHorizontal: Spacing.lg,\n  },\n});\n","path":null,"size_bytes":4712,"size_tokens":null},"client/context/AuthContext.tsx":{"content":"import React, { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { apiRequest, getApiUrl } from \"@/lib/query-client\";\n\ninterface User {\n  id: string;\n  username: string;\n  phone: string | null;\n  email: string | null;\n  role: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  login: (username: string, password: string) => Promise<{ success: boolean; error?: string }>;\n  signup: (username: string, password: string, phone?: string) => Promise<{ success: boolean; error?: string }>;\n  sendOtp: (phone: string) => Promise<{ success: boolean; code?: string; error?: string }>;\n  verifyOtp: (phone: string, code: string) => Promise<{ success: boolean; error?: string }>;\n  loginWithApple: (appleId: string, email?: string, fullName?: string) => Promise<{ success: boolean; error?: string }>;\n  loginWithGoogle: (googleId: string, email?: string, name?: string) => Promise<{ success: boolean; error?: string }>;\n  logout: () => Promise<void>;\n  updateProfile: (data: { username?: string; phone?: string }) => Promise<{ success: boolean; error?: string }>;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nconst AUTH_STORAGE_KEY = \"@kilatgo_auth\";\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    loadStoredAuth();\n  }, []);\n\n  const loadStoredAuth = async () => {\n    try {\n      const stored = await AsyncStorage.getItem(AUTH_STORAGE_KEY);\n      if (stored) {\n        const userData = JSON.parse(stored);\n        setUser(userData);\n      }\n    } catch (error) {\n      console.error(\"Failed to load auth:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const login = async (username: string, password: string) => {\n    try {\n      const response = await apiRequest(\"POST\", \"/api/auth/login\", { username, password });\n      const data = await response.json();\n      \n      if (response.ok) {\n        setUser(data.user);\n        await AsyncStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(data.user));\n        return { success: true };\n      } else {\n        return { success: false, error: data.error || \"Login failed\" };\n      }\n    } catch (error) {\n      return { success: false, error: \"Network error. Please try again.\" };\n    }\n  };\n\n  const signup = async (username: string, password: string, phone?: string) => {\n    try {\n      const response = await apiRequest(\"POST\", \"/api/auth/register\", { username, password, phone });\n      const data = await response.json();\n      \n      if (response.ok) {\n        setUser(data.user);\n        await AsyncStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(data.user));\n        return { success: true };\n      } else {\n        return { success: false, error: data.error || \"Signup failed\" };\n      }\n    } catch (error) {\n      return { success: false, error: \"Network error. Please try again.\" };\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await AsyncStorage.removeItem(AUTH_STORAGE_KEY);\n      setUser(null);\n    } catch (error) {\n      console.error(\"Failed to logout:\", error);\n    }\n  };\n\n  const updateProfile = async (data: { username?: string; phone?: string }) => {\n    if (!user) return { success: false, error: \"Not authenticated\" };\n    \n    try {\n      const response = await apiRequest(\"PUT\", \"/api/auth/profile\", { userId: user.id, ...data });\n      const result = await response.json();\n      \n      if (response.ok) {\n        const updatedUser = { ...user, ...data };\n        setUser(updatedUser);\n        await AsyncStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(updatedUser));\n        return { success: true };\n      } else {\n        return { success: false, error: result.error || \"Update failed\" };\n      }\n    } catch (error) {\n      return { success: false, error: \"Network error. Please try again.\" };\n    }\n  };\n\n  const sendOtp = async (phone: string) => {\n    try {\n      const response = await apiRequest(\"POST\", \"/api/auth/otp/send\", { phone });\n      const data = await response.json();\n      \n      if (response.ok) {\n        return { success: true, code: data.code };\n      } else {\n        return { success: false, error: data.error || \"Failed to send OTP\" };\n      }\n    } catch (error) {\n      return { success: false, error: \"Network error. Please try again.\" };\n    }\n  };\n\n  const verifyOtp = async (phone: string, code: string) => {\n    try {\n      const response = await apiRequest(\"POST\", \"/api/auth/otp/verify\", { phone, code });\n      const data = await response.json();\n      \n      if (response.ok) {\n        setUser(data.user);\n        await AsyncStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(data.user));\n        return { success: true };\n      } else {\n        return { success: false, error: data.error || \"Invalid OTP\" };\n      }\n    } catch (error) {\n      return { success: false, error: \"Network error. Please try again.\" };\n    }\n  };\n\n  const loginWithApple = async (appleId: string, email?: string, fullName?: string) => {\n    try {\n      const response = await apiRequest(\"POST\", \"/api/auth/apple\", { appleId, email, fullName });\n      const data = await response.json();\n      \n      if (response.ok) {\n        setUser(data.user);\n        await AsyncStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(data.user));\n        return { success: true };\n      } else {\n        return { success: false, error: data.error || \"Apple sign-in failed\" };\n      }\n    } catch (error) {\n      return { success: false, error: \"Network error. Please try again.\" };\n    }\n  };\n\n  const loginWithGoogle = async (googleId: string, email?: string, name?: string) => {\n    try {\n      const response = await apiRequest(\"POST\", \"/api/auth/google\", { googleId, email, name });\n      const data = await response.json();\n      \n      if (response.ok) {\n        setUser(data.user);\n        await AsyncStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(data.user));\n        return { success: true };\n      } else {\n        return { success: false, error: data.error || \"Google sign-in failed\" };\n      }\n    } catch (error) {\n      return { success: false, error: \"Network error. Please try again.\" };\n    }\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isLoading,\n        isAuthenticated: !!user,\n        login,\n        signup,\n        sendOtp,\n        verifyOtp,\n        loginWithApple,\n        loginWithGoogle,\n        logout,\n        updateProfile,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":6882,"size_tokens":null},"client/context/LanguageContext.tsx":{"content":"import React, { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { translations, Language, TranslationKeys } from \"@/constants/translations\";\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => Promise<void>;\n  t: TranslationKeys;\n}\n\nconst LanguageContext = createContext<LanguageContextType | null>(null);\n\nconst LANGUAGE_STORAGE_KEY = \"@kilatgo_language\";\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const [language, setLanguageState] = useState<Language>(\"en\");\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    loadStoredLanguage();\n  }, []);\n\n  const loadStoredLanguage = async () => {\n    try {\n      const stored = await AsyncStorage.getItem(LANGUAGE_STORAGE_KEY);\n      if (stored && (stored === \"en\" || stored === \"id\")) {\n        setLanguageState(stored);\n      }\n    } catch (error) {\n      console.error(\"Failed to load language:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const setLanguage = async (lang: Language) => {\n    try {\n      await AsyncStorage.setItem(LANGUAGE_STORAGE_KEY, lang);\n      setLanguageState(lang);\n    } catch (error) {\n      console.error(\"Failed to save language:\", error);\n    }\n  };\n\n  const t = translations[language];\n\n  if (isLoading) {\n    return null;\n  }\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error(\"useLanguage must be used within a LanguageProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":1759,"size_tokens":null},"client/context/LocationContext.tsx":{"content":"import React, { createContext, useContext, useState, useCallback, useEffect } from \"react\";\nimport { Platform } from \"react-native\";\nimport * as Location from \"expo-location\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { getApiUrl } from \"@/lib/query-client\";\n\ninterface StoreInfo {\n  id: string;\n  name: string;\n  address: string;\n  distanceKm: number;\n  codAllowed: boolean;\n}\n\ninterface LocationContextType {\n  location: { latitude: number; longitude: number } | null;\n  locationStatus: \"loading\" | \"granted\" | \"denied\" | \"unavailable\";\n  store: StoreInfo | null;\n  storeAvailable: boolean;\n  codAllowed: boolean;\n  estimatedDeliveryMinutes: number | null;\n  isCheckingAvailability: boolean;\n  errorMessage: string | null;\n  requestLocationPermission: () => Promise<boolean>;\n  refreshStoreAvailability: () => void;\n}\n\nconst LocationContext = createContext<LocationContextType | undefined>(undefined);\n\nexport function LocationProvider({ children }: { children: React.ReactNode }) {\n  const [location, setLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [locationStatus, setLocationStatus] = useState<\"loading\" | \"granted\" | \"denied\" | \"unavailable\">(\"loading\");\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n\n  const {\n    data: availabilityData,\n    isLoading: isCheckingAvailability,\n    refetch: refreshStoreAvailability,\n  } = useQuery({\n    queryKey: [\"/api/stores/available\", location?.latitude, location?.longitude],\n    queryFn: async () => {\n      if (!location) return null;\n      const url = new URL(\"/api/stores/available\", getApiUrl());\n      url.searchParams.set(\"lat\", String(location.latitude));\n      url.searchParams.set(\"lng\", String(location.longitude));\n      const res = await fetch(url.toString());\n      return res.json();\n    },\n    enabled: !!location,\n    staleTime: 30000,\n  });\n\n  const requestLocationPermission = useCallback(async (): Promise<boolean> => {\n    try {\n      if (Platform.OS === \"web\") {\n        setLocationStatus(\"loading\");\n        const position = await new Promise<GeolocationPosition>((resolve, reject) => {\n          navigator.geolocation.getCurrentPosition(resolve, reject, {\n            enableHighAccuracy: true,\n            timeout: 10000,\n            maximumAge: 60000,\n          });\n        });\n        setLocation({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n        });\n        setLocationStatus(\"granted\");\n        return true;\n      }\n\n      const { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== \"granted\") {\n        setLocationStatus(\"denied\");\n        setErrorMessage(\"Location permission is required to find nearby stores\");\n        return false;\n      }\n\n      const currentLocation = await Location.getCurrentPositionAsync({\n        accuracy: Location.Accuracy.Balanced,\n      });\n\n      setLocation({\n        latitude: currentLocation.coords.latitude,\n        longitude: currentLocation.coords.longitude,\n      });\n      setLocationStatus(\"granted\");\n      return true;\n    } catch (error) {\n      console.error(\"Location error:\", error);\n      setLocationStatus(\"unavailable\");\n      setErrorMessage(\"Unable to get your location. Please try again.\");\n      return false;\n    }\n  }, []);\n\n  useEffect(() => {\n    const checkInitialPermission = async () => {\n      if (Platform.OS === \"web\") {\n        if (\"geolocation\" in navigator) {\n          try {\n            const position = await new Promise<GeolocationPosition>((resolve, reject) => {\n              navigator.geolocation.getCurrentPosition(resolve, reject, {\n                enableHighAccuracy: false,\n                timeout: 5000,\n                maximumAge: 300000,\n              });\n            });\n            setLocation({\n              latitude: position.coords.latitude,\n              longitude: position.coords.longitude,\n            });\n            setLocationStatus(\"granted\");\n          } catch {\n            setLocationStatus(\"denied\");\n          }\n        } else {\n          setLocationStatus(\"unavailable\");\n        }\n        return;\n      }\n\n      const { status } = await Location.getForegroundPermissionsAsync();\n      if (status === \"granted\") {\n        try {\n          const currentLocation = await Location.getCurrentPositionAsync({\n            accuracy: Location.Accuracy.Balanced,\n          });\n          setLocation({\n            latitude: currentLocation.coords.latitude,\n            longitude: currentLocation.coords.longitude,\n          });\n          setLocationStatus(\"granted\");\n        } catch {\n          setLocationStatus(\"unavailable\");\n        }\n      } else {\n        setLocationStatus(\"denied\");\n      }\n    };\n\n    checkInitialPermission();\n  }, []);\n\n  const store: StoreInfo | null = availabilityData?.available\n    ? {\n        id: availabilityData.store.id,\n        name: availabilityData.store.name,\n        address: availabilityData.store.address,\n        distanceKm: availabilityData.store.distanceKm,\n        codAllowed: availabilityData.store.codAllowed,\n      }\n    : null;\n\n  const storeAvailable = !!availabilityData?.available;\n  const codAllowed = availabilityData?.codAllowed ?? false;\n  const estimatedDeliveryMinutes = availabilityData?.estimatedDeliveryMinutes ?? null;\n\n  return (\n    <LocationContext.Provider\n      value={{\n        location,\n        locationStatus,\n        store,\n        storeAvailable,\n        codAllowed,\n        estimatedDeliveryMinutes,\n        isCheckingAvailability,\n        errorMessage,\n        requestLocationPermission,\n        refreshStoreAvailability,\n      }}\n    >\n      {children}\n    </LocationContext.Provider>\n  );\n}\n\nexport function useLocation() {\n  const context = useContext(LocationContext);\n  if (context === undefined) {\n    throw new Error(\"useLocation must be used within a LocationProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":5912,"size_tokens":null},"client/context/OnboardingContext.tsx":{"content":"import React, { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\ninterface OnboardingContextType {\n  hasCompletedOnboarding: boolean;\n  isLoading: boolean;\n  completeOnboarding: () => void;\n  resetOnboarding: () => void;\n}\n\nconst OnboardingContext = createContext<OnboardingContextType | null>(null);\n\nconst ONBOARDING_STORAGE_KEY = \"@kilatgo_onboarding_completed\";\n\nexport function OnboardingProvider({ children }: { children: ReactNode }) {\n  const [hasCompletedOnboarding, setHasCompletedOnboarding] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    loadOnboardingState();\n  }, []);\n\n  const loadOnboardingState = async () => {\n    try {\n      const completed = await AsyncStorage.getItem(ONBOARDING_STORAGE_KEY);\n      setHasCompletedOnboarding(completed === \"true\");\n    } catch (error) {\n      console.error(\"Failed to load onboarding state:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const completeOnboarding = async () => {\n    try {\n      await AsyncStorage.setItem(ONBOARDING_STORAGE_KEY, \"true\");\n      setHasCompletedOnboarding(true);\n    } catch (error) {\n      console.error(\"Failed to save onboarding state:\", error);\n    }\n  };\n\n  const resetOnboarding = () => {\n    setHasCompletedOnboarding(false);\n    AsyncStorage.removeItem(ONBOARDING_STORAGE_KEY).catch((error) => {\n      console.error(\"Failed to reset onboarding state:\", error);\n    });\n  };\n\n  return (\n    <OnboardingContext.Provider\n      value={{\n        hasCompletedOnboarding,\n        isLoading,\n        completeOnboarding,\n        resetOnboarding,\n      }}\n    >\n      {children}\n    </OnboardingContext.Provider>\n  );\n}\n\nexport function useOnboarding() {\n  const context = useContext(OnboardingContext);\n  if (!context) {\n    throw new Error(\"useOnboarding must be used within an OnboardingProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":1974,"size_tokens":null},"client/lib/image-url.ts":{"content":"import { getApiUrl } from \"./query-client\";\n\nexport function getImageUrl(path: string | null | undefined): string | undefined {\n  if (!path) return undefined;\n  \n  if (path.startsWith(\"http://\") || path.startsWith(\"https://\")) {\n    return path;\n  }\n  \n  const baseUrl = getApiUrl();\n  return `${baseUrl}${path.startsWith(\"/\") ? path.slice(1) : path}`;\n}\n","path":null,"size_bytes":355,"size_tokens":null},"client/screens/NotificationsScreen.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport { View, StyleSheet, Switch } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Feather } from \"@expo/vector-icons\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing } from \"@/constants/theme\";\n\nconst NOTIFICATIONS_KEY = \"@kilatgo_notifications\";\n\ninterface NotificationSettings {\n  orderUpdates: boolean;\n  promotions: boolean;\n  deliveryAlerts: boolean;\n}\n\nconst defaultSettings: NotificationSettings = {\n  orderUpdates: true,\n  promotions: false,\n  deliveryAlerts: true,\n};\n\nfunction SettingRow({\n  icon,\n  title,\n  description,\n  value,\n  onValueChange,\n}: {\n  icon: string;\n  title: string;\n  description: string;\n  value: boolean;\n  onValueChange: (value: boolean) => void;\n}) {\n  const { theme } = useTheme();\n  \n  return (\n    <View style={styles.settingRow}>\n      <View style={[styles.iconContainer, { backgroundColor: theme.backgroundDefault }]}>\n        <Feather name={icon as any} size={20} color={theme.primary} />\n      </View>\n      <View style={styles.settingInfo}>\n        <ThemedText type=\"body\" style={{ fontWeight: \"500\" }}>\n          {title}\n        </ThemedText>\n        <ThemedText type=\"small\" style={{ color: theme.textSecondary }}>\n          {description}\n        </ThemedText>\n      </View>\n      <Switch\n        value={value}\n        onValueChange={onValueChange}\n        trackColor={{ false: theme.border, true: theme.primary + \"80\" }}\n        thumbColor={value ? theme.primary : theme.backgroundTertiary}\n      />\n    </View>\n  );\n}\n\nexport default function NotificationsScreen() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const [settings, setSettings] = useState<NotificationSettings>(defaultSettings);\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const stored = await AsyncStorage.getItem(NOTIFICATIONS_KEY);\n      if (stored) {\n        setSettings(JSON.parse(stored));\n      }\n    } catch (error) {\n      console.error(\"Failed to load notification settings:\", error);\n    }\n  };\n\n  const updateSetting = async (key: keyof NotificationSettings, value: boolean) => {\n    const newSettings = { ...settings, [key]: value };\n    setSettings(newSettings);\n    \n    try {\n      await AsyncStorage.setItem(NOTIFICATIONS_KEY, JSON.stringify(newSettings));\n    } catch (error) {\n      console.error(\"Failed to save notification settings:\", error);\n    }\n  };\n\n  return (\n    <ThemedView style={styles.container}>\n      <View\n        style={[\n          styles.content,\n          {\n            paddingTop: Spacing.lg,\n            paddingBottom: insets.bottom + Spacing.xl,\n          },\n        ]}\n      >\n        <Card style={styles.card}>\n          <SettingRow\n            icon=\"package\"\n            title={t.notifications.orderUpdates}\n            description={t.notifications.orderDescription}\n            value={settings.orderUpdates}\n            onValueChange={(value) => updateSetting(\"orderUpdates\", value)}\n          />\n          <View style={[styles.divider, { backgroundColor: theme.border }]} />\n          \n          <SettingRow\n            icon=\"truck\"\n            title={t.notifications.deliveryAlerts}\n            description={t.notifications.deliveryDescription}\n            value={settings.deliveryAlerts}\n            onValueChange={(value) => updateSetting(\"deliveryAlerts\", value)}\n          />\n          <View style={[styles.divider, { backgroundColor: theme.border }]} />\n          \n          <SettingRow\n            icon=\"tag\"\n            title={t.notifications.promotions}\n            description={t.notifications.promotionsDescription}\n            value={settings.promotions}\n            onValueChange={(value) => updateSetting(\"promotions\", value)}\n          />\n        </Card>\n      </View>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  content: {\n    flex: 1,\n    paddingHorizontal: Spacing.lg,\n  },\n  card: {\n    padding: 0,\n  },\n  settingRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: Spacing.lg,\n  },\n  iconContainer: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginRight: Spacing.md,\n  },\n  settingInfo: {\n    flex: 1,\n    marginRight: Spacing.md,\n  },\n  divider: {\n    height: 1,\n    marginHorizontal: Spacing.lg,\n  },\n});\n","path":null,"size_bytes":4743,"size_tokens":null},"client/screens/AboutScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, ScrollView, Pressable, Linking } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing } from \"@/constants/theme\";\n\nconst APP_VERSION = \"1.0.0\";\nconst BUILD_NUMBER = \"1\";\n\nfunction InfoRow({ label, value }: { label: string; value: string }) {\n  const { theme } = useTheme();\n  \n  return (\n    <View style={styles.infoRow}>\n      <ThemedText type=\"body\" style={{ color: theme.textSecondary }}>\n        {label}\n      </ThemedText>\n      <ThemedText type=\"body\" style={{ fontWeight: \"500\" }}>\n        {value}\n      </ThemedText>\n    </View>\n  );\n}\n\nfunction LinkRow({ icon, label, onPress }: { icon: string; label: string; onPress: () => void }) {\n  const { theme } = useTheme();\n  \n  return (\n    <Pressable style={styles.linkRow} onPress={onPress}>\n      <View style={[styles.linkIcon, { backgroundColor: theme.backgroundDefault }]}>\n        <Feather name={icon as any} size={18} color={theme.primary} />\n      </View>\n      <ThemedText type=\"body\" style={{ flex: 1 }}>\n        {label}\n      </ThemedText>\n      <Feather name=\"external-link\" size={18} color={theme.textSecondary} />\n    </Pressable>\n  );\n}\n\nexport default function AboutScreen() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n\n  const openLink = (url: string) => {\n    Linking.openURL(url).catch((err) => console.error(\"Failed to open URL:\", err));\n  };\n\n  return (\n    <ThemedView style={styles.container}>\n      <ScrollView\n        contentContainerStyle={[\n          styles.scrollContent,\n          {\n            paddingTop: Spacing.lg,\n            paddingBottom: insets.bottom + Spacing.xl,\n          },\n        ]}\n        showsVerticalScrollIndicator={false}\n      >\n        <View style={styles.logoSection}>\n          <View style={[styles.logoContainer, { backgroundColor: theme.primary }]}>\n            <Feather name=\"zap\" size={40} color={theme.buttonText} />\n          </View>\n          <ThemedText type=\"h2\" style={styles.appName}>\n            KilatGo\n          </ThemedText>\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary, textAlign: \"center\" }}>\n            {t.about.appDescription}\n          </ThemedText>\n        </View>\n        \n        <Card style={styles.card}>\n          <InfoRow label={t.about.version} value={APP_VERSION} />\n          <View style={[styles.divider, { backgroundColor: theme.border }]} />\n          <InfoRow label=\"Build\" value={BUILD_NUMBER} />\n        </Card>\n        \n        <ThemedText type=\"caption\" style={[styles.sectionTitle, { color: theme.textSecondary }]}>\n          {t.about.legal.toUpperCase()}\n        </ThemedText>\n        <Card style={styles.card}>\n          <LinkRow\n            icon=\"file-text\"\n            label={t.about.termsOfService}\n            onPress={() => openLink(\"https://kilatgo.com/terms\")}\n          />\n          <View style={[styles.divider, { backgroundColor: theme.border }]} />\n          <LinkRow\n            icon=\"shield\"\n            label={t.about.privacyPolicy}\n            onPress={() => openLink(\"https://kilatgo.com/privacy\")}\n          />\n          <View style={[styles.divider, { backgroundColor: theme.border }]} />\n          <LinkRow\n            icon=\"book\"\n            label={t.about.licenses}\n            onPress={() => openLink(\"https://kilatgo.com/licenses\")}\n          />\n        </Card>\n        \n        <ThemedText type=\"caption\" style={[styles.sectionTitle, { color: theme.textSecondary }]}>\n          {t.about.followUs.toUpperCase()}\n        </ThemedText>\n        <Card style={styles.card}>\n          <LinkRow\n            icon=\"instagram\"\n            label=\"Instagram\"\n            onPress={() => openLink(\"https://instagram.com/kilatgo\")}\n          />\n          <View style={[styles.divider, { backgroundColor: theme.border }]} />\n          <LinkRow\n            icon=\"twitter\"\n            label=\"Twitter\"\n            onPress={() => openLink(\"https://twitter.com/kilatgo\")}\n          />\n        </Card>\n        \n        <ThemedText type=\"small\" style={[styles.copyright, { color: theme.textSecondary }]}>\n          2024 KilatGo. {t.about.allRightsReserved}.\n        </ThemedText>\n      </ScrollView>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  logoSection: {\n    alignItems: \"center\",\n    marginBottom: Spacing.xl,\n  },\n  logoContainer: {\n    width: 80,\n    height: 80,\n    borderRadius: 20,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: Spacing.md,\n  },\n  appName: {\n    marginBottom: Spacing.xs,\n  },\n  card: {\n    padding: 0,\n    marginBottom: Spacing.lg,\n  },\n  infoRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: Spacing.lg,\n  },\n  linkRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: Spacing.lg,\n  },\n  linkIcon: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginRight: Spacing.md,\n  },\n  divider: {\n    height: 1,\n    marginHorizontal: Spacing.lg,\n  },\n  sectionTitle: {\n    marginBottom: Spacing.sm,\n    marginLeft: Spacing.xs,\n    letterSpacing: 1,\n  },\n  copyright: {\n    textAlign: \"center\",\n    marginTop: Spacing.xs,\n  },\n});\n","path":null,"size_bytes":5675,"size_tokens":null},"client/screens/AdminDashboardScreen.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, ScrollView, RefreshControl, ActivityIndicator } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Feather } from \"@expo/vector-icons\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { Card } from \"@/components/Card\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing, BorderRadius } from \"@/constants/theme\";\n\ninterface StoreMetrics {\n  id: string;\n  name: string;\n  address: string;\n  isActive: boolean;\n  codAllowed: boolean;\n  totalStaff: number;\n  onlineStaff: number;\n  pickers: Array<{ id: string; userId: string; status: string }>;\n  drivers: Array<{ id: string; userId: string; status: string }>;\n  orderCount: number;\n  pendingOrders: number;\n  activeOrders: number;\n}\n\ninterface OrderSummary {\n  total: number;\n  pending: number;\n  confirmed: number;\n  preparing: number;\n  ready: number;\n  onTheWay: number;\n  delivered: number;\n  cancelled: number;\n}\n\ninterface AdminMetrics {\n  stores: StoreMetrics[];\n  orderSummary: OrderSummary;\n  timestamp: string;\n}\n\nfunction MetricCard({ \n  icon, \n  label, \n  value, \n  color \n}: { \n  icon: string; \n  label: string; \n  value: number; \n  color: string;\n}) {\n  const { theme } = useTheme();\n  \n  return (\n    <Card style={styles.metricCard}>\n      <View style={[styles.metricIcon, { backgroundColor: color + \"20\" }]}>\n        <Feather name={icon as any} size={20} color={color} />\n      </View>\n      <ThemedText type=\"h2\" style={styles.metricValue}>\n        {value}\n      </ThemedText>\n      <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n        {label}\n      </ThemedText>\n    </Card>\n  );\n}\n\nfunction StoreCard({ store, t }: { store: StoreMetrics; t: any }) {\n  const { theme } = useTheme();\n  \n  const onlinePickers = store.pickers.filter((p) => p.status === \"online\").length;\n  const onlineDrivers = store.drivers.filter((d) => d.status === \"online\").length;\n  \n  return (\n    <Card style={styles.storeCard}>\n      <View style={styles.storeHeader}>\n        <View style={styles.storeInfo}>\n          <ThemedText type=\"h3\">{store.name}</ThemedText>\n          <ThemedText type=\"caption\" style={{ color: theme.textSecondary }}>\n            {store.address}\n          </ThemedText>\n        </View>\n        <View style={[\n          styles.statusBadge,\n          { backgroundColor: store.isActive ? theme.success + \"20\" : theme.error + \"20\" }\n        ]}>\n          <View style={[\n            styles.statusDot,\n            { backgroundColor: store.isActive ? theme.success : theme.error }\n          ]} />\n          <ThemedText type=\"small\" style={{ \n            color: store.isActive ? theme.success : theme.error \n          }}>\n            {store.isActive ? t.admin.activeStores : t.admin.inactive}\n          </ThemedText>\n        </View>\n      </View>\n      \n      <View style={[styles.divider, { backgroundColor: theme.border }]} />\n      \n      <View style={styles.storeStats}>\n        <View style={styles.statItem}>\n          <Feather name=\"user\" size={16} color={theme.secondary} />\n          <ThemedText type=\"body\" style={styles.statLabel}>\n            {t.admin.pickers}\n          </ThemedText>\n          <ThemedText type=\"body\" style={{ color: theme.text }}>\n            {onlinePickers}/{store.pickers.length}\n          </ThemedText>\n        </View>\n        \n        <View style={styles.statItem}>\n          <Feather name=\"truck\" size={16} color={theme.primary} />\n          <ThemedText type=\"body\" style={styles.statLabel}>\n            {t.admin.drivers}\n          </ThemedText>\n          <ThemedText type=\"body\" style={{ color: theme.text }}>\n            {onlineDrivers}/{store.drivers.length}\n          </ThemedText>\n        </View>\n        \n        <View style={styles.statItem}>\n          <Feather name=\"package\" size={16} color={theme.warning} />\n          <ThemedText type=\"body\" style={styles.statLabel}>\n            {t.admin.orders}\n          </ThemedText>\n          <ThemedText type=\"body\" style={{ color: theme.text }}>\n            {store.orderCount}\n          </ThemedText>\n        </View>\n      </View>\n      \n      <View style={styles.storeTags}>\n        {store.codAllowed ? (\n          <View style={[styles.tag, { backgroundColor: theme.success + \"20\" }]}>\n            <ThemedText type=\"small\" style={{ color: theme.success }}>\n              {t.admin.codAllowed}\n            </ThemedText>\n          </View>\n        ) : null}\n        {store.activeOrders > 0 ? (\n          <View style={[styles.tag, { backgroundColor: theme.warning + \"20\" }]}>\n            <ThemedText type=\"small\" style={{ color: theme.warning }}>\n              {store.activeOrders} {t.orders.active}\n            </ThemedText>\n          </View>\n        ) : null}\n      </View>\n    </Card>\n  );\n}\n\nexport default function AdminDashboardScreen() {\n  const insets = useSafeAreaInsets();\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  \n  const { data: metrics, isLoading, refetch, isRefetching } = useQuery<AdminMetrics>({\n    queryKey: [\"/api/admin/metrics\"],\n    refetchInterval: 30000,\n  });\n  \n  if (isLoading) {\n    return (\n      <ThemedView style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.primary} />\n        <ThemedText type=\"body\" style={{ marginTop: Spacing.md, color: theme.textSecondary }}>\n          {t.common.loading}\n        </ThemedText>\n      </ThemedView>\n    );\n  }\n  \n  const orderSummary = metrics?.orderSummary;\n  const stores = metrics?.stores || [];\n  \n  return (\n    <ThemedView style={styles.container}>\n      <ScrollView\n        contentContainerStyle={[\n          styles.scrollContent,\n          {\n            paddingTop: Spacing.lg,\n            paddingBottom: insets.bottom + Spacing.xl,\n          },\n        ]}\n        showsVerticalScrollIndicator={false}\n        refreshControl={\n          <RefreshControl\n            refreshing={isRefetching}\n            onRefresh={refetch}\n            tintColor={theme.primary}\n          />\n        }\n      >\n        <View style={styles.section}>\n          <ThemedText type=\"h3\" style={styles.sectionTitle}>\n            {t.checkout.orderSummary}\n          </ThemedText>\n          <View style={styles.metricsGrid}>\n            <MetricCard\n              icon=\"shopping-bag\"\n              label={t.admin.totalOrders}\n              value={orderSummary?.total || 0}\n              color={theme.secondary}\n            />\n            <MetricCard\n              icon=\"clock\"\n              label={t.orders.pending}\n              value={orderSummary?.pending || 0}\n              color={theme.warning}\n            />\n            <MetricCard\n              icon=\"check-circle\"\n              label={t.orders.delivered}\n              value={orderSummary?.delivered || 0}\n              color={theme.success}\n            />\n            <MetricCard\n              icon=\"x-circle\"\n              label={t.orders.cancelled}\n              value={orderSummary?.cancelled || 0}\n              color={theme.error}\n            />\n          </View>\n        </View>\n        \n        <View style={styles.section}>\n          <ThemedText type=\"h3\" style={styles.sectionTitle}>\n            {t.admin.activePipeline}\n          </ThemedText>\n          <Card style={styles.pipelineCard}>\n            <View style={styles.pipelineRow}>\n              <View style={styles.pipelineItem}>\n                <View style={[styles.pipelineDot, { backgroundColor: theme.secondary }]} />\n                <ThemedText type=\"body\">{t.orders.confirmed}</ThemedText>\n                <ThemedText type=\"h3\" style={{ color: theme.secondary }}>\n                  {orderSummary?.confirmed || 0}\n                </ThemedText>\n              </View>\n              <Feather name=\"arrow-right\" size={16} color={theme.textSecondary} />\n              <View style={styles.pipelineItem}>\n                <View style={[styles.pipelineDot, { backgroundColor: theme.warning }]} />\n                <ThemedText type=\"body\">{t.orders.preparing}</ThemedText>\n                <ThemedText type=\"h3\" style={{ color: theme.warning }}>\n                  {orderSummary?.preparing || 0}\n                </ThemedText>\n              </View>\n              <Feather name=\"arrow-right\" size={16} color={theme.textSecondary} />\n              <View style={styles.pipelineItem}>\n                <View style={[styles.pipelineDot, { backgroundColor: theme.success }]} />\n                <ThemedText type=\"body\">{t.orders.ready}</ThemedText>\n                <ThemedText type=\"h3\" style={{ color: theme.success }}>\n                  {orderSummary?.ready || 0}\n                </ThemedText>\n              </View>\n              <Feather name=\"arrow-right\" size={16} color={theme.textSecondary} />\n              <View style={styles.pipelineItem}>\n                <View style={[styles.pipelineDot, { backgroundColor: theme.primary }]} />\n                <ThemedText type=\"body\">{t.orders.onTheWay}</ThemedText>\n                <ThemedText type=\"h3\" style={{ color: theme.primary }}>\n                  {orderSummary?.onTheWay || 0}\n                </ThemedText>\n              </View>\n            </View>\n          </Card>\n        </View>\n        \n        <View style={styles.section}>\n          <ThemedText type=\"h3\" style={styles.sectionTitle}>\n            {t.admin.stores} ({stores.length})\n          </ThemedText>\n          {stores.map((store) => (\n            <StoreCard key={store.id} store={store} t={t} />\n          ))}\n          {stores.length === 0 ? (\n            <Card style={styles.emptyCard}>\n              <Feather name=\"map-pin\" size={32} color={theme.textSecondary} />\n              <ThemedText type=\"body\" style={{ color: theme.textSecondary, marginTop: Spacing.sm }}>\n                {t.admin.noStoresFound}\n              </ThemedText>\n            </Card>\n          ) : null}\n        </View>\n        \n        {metrics?.timestamp ? (\n          <ThemedText type=\"small\" style={[styles.timestamp, { color: theme.textSecondary }]}>\n            {t.admin.lastUpdated}: {new Date(metrics.timestamp).toLocaleTimeString()}\n          </ThemedText>\n        ) : null}\n      </ScrollView>\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  scrollContent: {\n    paddingHorizontal: Spacing.lg,\n  },\n  section: {\n    marginBottom: Spacing.xl,\n  },\n  sectionTitle: {\n    marginBottom: Spacing.md,\n  },\n  metricsGrid: {\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    gap: Spacing.sm,\n  },\n  metricCard: {\n    flex: 1,\n    minWidth: \"45%\",\n    alignItems: \"center\",\n    padding: Spacing.md,\n  },\n  metricIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: BorderRadius.full,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: Spacing.xs,\n  },\n  metricValue: {\n    marginTop: Spacing.xs,\n  },\n  pipelineCard: {\n    padding: Spacing.md,\n  },\n  pipelineRow: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n  },\n  pipelineItem: {\n    alignItems: \"center\",\n    flex: 1,\n  },\n  pipelineDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    marginBottom: Spacing.xs,\n  },\n  storeCard: {\n    marginBottom: Spacing.md,\n    padding: Spacing.md,\n  },\n  storeHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\",\n  },\n  storeInfo: {\n    flex: 1,\n    marginRight: Spacing.md,\n  },\n  statusBadge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingHorizontal: Spacing.sm,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.full,\n    gap: Spacing.xs,\n  },\n  statusDot: {\n    width: 6,\n    height: 6,\n    borderRadius: 3,\n  },\n  divider: {\n    height: 1,\n    marginVertical: Spacing.md,\n  },\n  storeStats: {\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n  },\n  statItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.xs,\n  },\n  statLabel: {\n    marginRight: Spacing.xs,\n  },\n  storeTags: {\n    flexDirection: \"row\",\n    gap: Spacing.sm,\n    marginTop: Spacing.md,\n    flexWrap: \"wrap\",\n  },\n  tag: {\n    paddingHorizontal: Spacing.sm,\n    paddingVertical: Spacing.xs,\n    borderRadius: BorderRadius.xs,\n  },\n  emptyCard: {\n    alignItems: \"center\",\n    padding: Spacing.xl,\n  },\n  timestamp: {\n    textAlign: \"center\",\n    marginTop: Spacing.md,\n  },\n});\n","path":null,"size_bytes":12541,"size_tokens":null},"client/constants/translations.ts":{"content":"export type Language = \"en\" | \"id\";\n\nexport const translations = {\n  en: {\n    account: {\n      title: \"Account\",\n      signIn: \"Sign In\",\n      signInPrompt: \"Tap to sign in or create an account\",\n      noPhone: \"No phone number\",\n      myAccount: \"My Account\",\n      savedAddresses: \"Saved Addresses\",\n      paymentMethods: \"Payment Methods\",\n      myVouchers: \"My Vouchers\",\n      support: \"Support\",\n      helpCenter: \"Help Center\",\n      chatSupport: \"Chat Support\",\n      settings: \"Settings\",\n      notifications: \"Notifications\",\n      language: \"Language\",\n      about: \"About\",\n      admin: \"Admin\",\n      storeDashboard: \"Store Dashboard\",\n      logOut: \"Log Out\",\n      logOutConfirm: \"Are you sure you want to log out?\",\n      cancel: \"Cancel\",\n    },\n    notifications: {\n      title: \"Notifications\",\n      pushNotifications: \"Push Notifications\",\n      pushDescription: \"Receive notifications on your device\",\n      orderUpdates: \"Order Updates\",\n      orderDescription: \"Get notified about your order status\",\n      promotions: \"Promotions & Deals\",\n      promotionsDescription: \"Receive special offers and discounts\",\n      deliveryAlerts: \"Delivery Alerts\",\n      deliveryDescription: \"Get notified when your order is nearby\",\n    },\n    language: {\n      title: \"Language\",\n      selectLanguage: \"Select Language\",\n      english: \"English\",\n      indonesian: \"Indonesian (Bahasa Indonesia)\",\n      current: \"Current\",\n    },\n    about: {\n      title: \"About\",\n      version: \"Version\",\n      appDescription: \"KilatGo is your 15-minute grocery delivery app. Fresh groceries delivered to your doorstep in minutes.\",\n      legal: \"Legal\",\n      termsOfService: \"Terms of Service\",\n      privacyPolicy: \"Privacy Policy\",\n      licenses: \"Open Source Licenses\",\n      followUs: \"Follow Us\",\n      rateApp: \"Rate This App\",\n      allRightsReserved: \"All rights reserved\",\n    },\n    home: {\n      title: \"KilatGo\",\n      searchPlaceholder: \"Search groceries...\",\n      categories: \"Categories\",\n      seeAll: \"See All\",\n      todaysDeals: \"Today's Deals\",\n      popularItems: \"Popular Items\",\n      nearestStore: \"Nearest Store\",\n      deliveryIn: \"Delivery in\",\n      minutes: \"min\",\n      minuteDelivery: \"minute delivery\",\n      enableLocationTitle: \"Enable location for faster delivery\",\n      enableLocationSubtitle: \"Tap to enable location access\",\n      findingStore: \"Finding nearest store...\",\n      noStoresNearby: \"No stores available nearby\",\n      notAvailableInArea: \"We are not yet available in your area\",\n      browseProducts: \"Browse Products\",\n      change: \"Change\",\n      fromStore: \"From\",\n      totalPayment: \"Total Payment\",\n      payWhenDelivered: \"Pay when delivered\",\n      item: \"item\",\n      items: \"items\",\n    },\n    cart: {\n      title: \"Your Cart\",\n      empty: \"Your cart is empty\",\n      emptyDescription: \"Add some items to get started\",\n      checkout: \"Checkout\",\n      total: \"Total\",\n      items: \"items\",\n    },\n    orders: {\n      title: \"Orders\",\n      myOrders: \"My Orders\",\n      active: \"Active\",\n      completed: \"Completed\",\n      empty: \"No orders yet\",\n      emptyDescription: \"Your orders will appear here\",\n      noActiveOrders: \"No active orders yet\",\n      noCompletedOrders: \"No completed orders yet\",\n      trackOrder: \"Track Order\",\n      orderDetails: \"Order Details\",\n      pending: \"Pending\",\n      confirmed: \"Confirmed\",\n      preparing: \"Preparing\",\n      ready: \"Ready\",\n      onTheWay: \"On the Way\",\n      delivered: \"Delivered\",\n      cancelled: \"Cancelled\",\n      moreItems: \"more items\",\n    },\n    common: {\n      loading: \"Loading...\",\n      error: \"Something went wrong\",\n      retry: \"Retry\",\n      save: \"Save\",\n      done: \"Done\",\n      yes: \"Yes\",\n      no: \"No\",\n      addToCart: \"Add to Cart\",\n      remove: \"Remove\",\n      confirm: \"Confirm\",\n      back: \"Back\",\n      continue: \"Continue\",\n      close: \"Close\",\n    },\n    checkout: {\n      title: \"Checkout\",\n      deliveryAddress: \"Delivery Address\",\n      addAddress: \"Add delivery address\",\n      paymentMethod: \"Payment Method\",\n      cod: \"Cash on Delivery\",\n      codDescription: \"Pay when you receive your order\",\n      orderSummary: \"Order Summary\",\n      subtotal: \"Subtotal\",\n      deliveryFee: \"Delivery Fee\",\n      discount: \"Discount\",\n      total: \"Total\",\n      placeOrder: \"Place Order\",\n      processing: \"Processing...\",\n      codNotAvailable: \"COD not available\",\n      noStoreAvailable: \"No store available for delivery\",\n    },\n    product: {\n      addToCart: \"Add to Cart\",\n      addedToCart: \"Added to Cart\",\n      outOfStock: \"Out of Stock\",\n      description: \"Description\",\n      ingredients: \"Ingredients\",\n      nutritionFacts: \"Nutrition Facts\",\n      quantity: \"Quantity\",\n      percentOff: \"OFF\",\n      calories: \"Calories\",\n      protein: \"Protein\",\n      carbs: \"Carbs\",\n      fat: \"Fat\",\n    },\n    category: {\n      products: \"Products\",\n      noProducts: \"No products found\",\n      filter: \"Filter\",\n      sort: \"Sort\",\n    },\n    voice: {\n      title: \"Voice Order\",\n      tapToSpeak: \"Tap to speak\",\n      listening: \"Listening...\",\n      processing: \"Processing...\",\n      speakNow: \"Speak now...\",\n      orderConfirm: \"Confirm Your Order\",\n      itemsFound: \"items found\",\n      noItemsFound: \"No items found\",\n      tryAgain: \"Try Again\",\n      addAllToCart: \"Add All to Cart\",\n      webNotSupported: \"Voice ordering is only available in Expo Go app\",\n      trySaying: \"Try saying:\",\n      samplePhrase: \"2 cartons of milk and a dozen eggs\",\n    },\n    admin: {\n      title: \"Admin Dashboard\",\n      stores: \"Stores\",\n      staff: \"Staff\",\n      orders: \"Orders\",\n      totalStores: \"Total Stores\",\n      activeStores: \"Active Stores\",\n      totalStaff: \"Total Staff\",\n      onlineStaff: \"Online Staff\",\n      totalOrders: \"Total Orders\",\n      pendingOrders: \"Pending Orders\",\n      pickers: \"Pickers\",\n      drivers: \"Drivers\",\n      inactive: \"Inactive\",\n      codAllowed: \"COD\",\n      activePipeline: \"Active Pipeline\",\n      noStoresFound: \"No stores found\",\n      lastUpdated: \"Last updated\",\n    },\n    orderSuccess: {\n      title: \"Order Placed!\",\n      thankYou: \"Thank you for your order\",\n      orderConfirmed: \"Your order has been confirmed and is being prepared\",\n      orderId: \"Order ID\",\n      orderNumber: \"Order Number\",\n      estimatedDelivery: \"Estimated Delivery\",\n      minutes: \"minutes\",\n      trackOrder: \"Track Order\",\n      backToHome: \"Back to Home\",\n    },\n    tracking: {\n      title: \"Track Order\",\n      orderStatus: \"Order Status\",\n      rider: \"Rider\",\n      store: \"Store\",\n      you: \"You\",\n      order: \"Order\",\n      estimatedArrival: \"Estimated Arrival\",\n      contactRider: \"Contact Rider\",\n      preparingOrder: \"Preparing your order\",\n      riderPickedUp: \"Rider picked up your order\",\n      onTheWayToYou: \"On the way to you\",\n      almostThere: \"Almost there!\",\n      pickedUp: \"Picked Up\",\n    },\n    auth: {\n      enterPhone: \"Enter Your Phone\",\n      enterOtp: \"Enter OTP Code\",\n      sendOtp: \"Send OTP\",\n      verifyOtp: \"Verify\",\n      sendingOtp: \"Sending...\",\n      verifyingOtp: \"Verifying...\",\n      resendOtp: \"Resend OTP\",\n      changePhone: \"Change phone number\",\n      orContinueWith: \"or continue with\",\n      google: \"Google\",\n      apple: \"Apple\",\n      skipDemo: \"Skip for Demo\",\n      termsAgree: \"By continuing, you agree to our Terms of Service and Privacy Policy\",\n      otpSentTo: \"Enter the 6-digit code sent to\",\n      demoOtp: \"Demo OTP\",\n      appleNotAvailable: \"Apple Sign-In is only available on iOS devices\",\n      googleSetupRequired: \"Google Sign-In Setup Required\",\n      demoLogin: \"Demo Login\",\n    },\n    location: {\n      enableLocation: \"Enable Location\",\n      locationDescription: \"We need your location to find nearby stores and deliver to you\",\n      grantPermission: \"Grant Permission\",\n      openSettings: \"Open Settings\",\n      locationDenied: \"Location permission is required to use this feature\",\n    },\n    welcome: {\n      title: \"Welcome to KilatGo\",\n      subtitle: \"Your 15-minute grocery delivery app\",\n      getStarted: \"Get Started\",\n      freshGroceries: \"Fresh Groceries\",\n      fastDelivery: \"Fast Delivery\",\n      easyOrdering: \"Easy Ordering\",\n    },\n  },\n  id: {\n    account: {\n      title: \"Akun\",\n      signIn: \"Masuk\",\n      signInPrompt: \"Ketuk untuk masuk atau buat akun\",\n      noPhone: \"Tidak ada nomor telepon\",\n      myAccount: \"Akun Saya\",\n      savedAddresses: \"Alamat Tersimpan\",\n      paymentMethods: \"Metode Pembayaran\",\n      myVouchers: \"Voucher Saya\",\n      support: \"Dukungan\",\n      helpCenter: \"Pusat Bantuan\",\n      chatSupport: \"Obrolan Dukungan\",\n      settings: \"Pengaturan\",\n      notifications: \"Notifikasi\",\n      language: \"Bahasa\",\n      about: \"Tentang\",\n      admin: \"Admin\",\n      storeDashboard: \"Dasbor Toko\",\n      logOut: \"Keluar\",\n      logOutConfirm: \"Apakah Anda yakin ingin keluar?\",\n      cancel: \"Batal\",\n    },\n    notifications: {\n      title: \"Notifikasi\",\n      pushNotifications: \"Notifikasi Push\",\n      pushDescription: \"Terima notifikasi di perangkat Anda\",\n      orderUpdates: \"Pembaruan Pesanan\",\n      orderDescription: \"Dapatkan notifikasi tentang status pesanan Anda\",\n      promotions: \"Promosi & Penawaran\",\n      promotionsDescription: \"Terima penawaran khusus dan diskon\",\n      deliveryAlerts: \"Peringatan Pengiriman\",\n      deliveryDescription: \"Dapatkan notifikasi saat pesanan Anda sudah dekat\",\n    },\n    language: {\n      title: \"Bahasa\",\n      selectLanguage: \"Pilih Bahasa\",\n      english: \"Inggris (English)\",\n      indonesian: \"Indonesia\",\n      current: \"Saat Ini\",\n    },\n    about: {\n      title: \"Tentang\",\n      version: \"Versi\",\n      appDescription: \"KilatGo adalah aplikasi pengiriman belanjaan 15 menit Anda. Belanjaan segar diantar ke depan pintu Anda dalam hitungan menit.\",\n      legal: \"Legal\",\n      termsOfService: \"Syarat Layanan\",\n      privacyPolicy: \"Kebijakan Privasi\",\n      licenses: \"Lisensi Open Source\",\n      followUs: \"Ikuti Kami\",\n      rateApp: \"Nilai Aplikasi Ini\",\n      allRightsReserved: \"Hak cipta dilindungi\",\n    },\n    home: {\n      title: \"KilatGo\",\n      searchPlaceholder: \"Cari belanjaan...\",\n      categories: \"Kategori\",\n      seeAll: \"Lihat Semua\",\n      todaysDeals: \"Penawaran Hari Ini\",\n      popularItems: \"Item Populer\",\n      nearestStore: \"Toko Terdekat\",\n      deliveryIn: \"Pengiriman dalam\",\n      minutes: \"menit\",\n      minuteDelivery: \"menit pengiriman\",\n      enableLocationTitle: \"Aktifkan lokasi untuk pengiriman lebih cepat\",\n      enableLocationSubtitle: \"Ketuk untuk mengaktifkan akses lokasi\",\n      findingStore: \"Mencari toko terdekat...\",\n      noStoresNearby: \"Tidak ada toko tersedia di sekitar\",\n      notAvailableInArea: \"Kami belum tersedia di area Anda\",\n      browseProducts: \"Jelajahi Produk\",\n      change: \"Ubah\",\n      fromStore: \"Dari\",\n      totalPayment: \"Total Pembayaran\",\n      payWhenDelivered: \"Bayar saat diterima\",\n      item: \"item\",\n      items: \"item\",\n    },\n    cart: {\n      title: \"Keranjang Anda\",\n      empty: \"Keranjang Anda kosong\",\n      emptyDescription: \"Tambahkan beberapa item untuk memulai\",\n      checkout: \"Checkout\",\n      total: \"Total\",\n      items: \"item\",\n    },\n    orders: {\n      title: \"Pesanan\",\n      myOrders: \"Pesanan Saya\",\n      active: \"Aktif\",\n      completed: \"Selesai\",\n      empty: \"Belum ada pesanan\",\n      emptyDescription: \"Pesanan Anda akan muncul di sini\",\n      noActiveOrders: \"Belum ada pesanan aktif\",\n      noCompletedOrders: \"Belum ada pesanan selesai\",\n      trackOrder: \"Lacak Pesanan\",\n      orderDetails: \"Detail Pesanan\",\n      pending: \"Menunggu\",\n      confirmed: \"Dikonfirmasi\",\n      preparing: \"Disiapkan\",\n      ready: \"Siap\",\n      onTheWay: \"Dalam Perjalanan\",\n      delivered: \"Terkirim\",\n      cancelled: \"Dibatalkan\",\n      moreItems: \"item lainnya\",\n    },\n    common: {\n      loading: \"Memuat...\",\n      error: \"Terjadi kesalahan\",\n      retry: \"Coba Lagi\",\n      save: \"Simpan\",\n      done: \"Selesai\",\n      yes: \"Ya\",\n      no: \"Tidak\",\n      addToCart: \"Tambah ke Keranjang\",\n      remove: \"Hapus\",\n      confirm: \"Konfirmasi\",\n      back: \"Kembali\",\n      continue: \"Lanjutkan\",\n      close: \"Tutup\",\n    },\n    checkout: {\n      title: \"Checkout\",\n      deliveryAddress: \"Alamat Pengiriman\",\n      addAddress: \"Tambah alamat pengiriman\",\n      paymentMethod: \"Metode Pembayaran\",\n      cod: \"Bayar di Tempat\",\n      codDescription: \"Bayar saat menerima pesanan Anda\",\n      orderSummary: \"Ringkasan Pesanan\",\n      subtotal: \"Subtotal\",\n      deliveryFee: \"Biaya Pengiriman\",\n      discount: \"Diskon\",\n      total: \"Total\",\n      placeOrder: \"Pesan Sekarang\",\n      processing: \"Memproses...\",\n      codNotAvailable: \"Bayar di tempat tidak tersedia\",\n      noStoreAvailable: \"Tidak ada toko tersedia untuk pengiriman\",\n    },\n    product: {\n      addToCart: \"Tambah ke Keranjang\",\n      addedToCart: \"Ditambahkan ke Keranjang\",\n      outOfStock: \"Stok Habis\",\n      description: \"Deskripsi\",\n      ingredients: \"Bahan\",\n      nutritionFacts: \"Fakta Nutrisi\",\n      quantity: \"Jumlah\",\n      percentOff: \"DISKON\",\n      calories: \"Kalori\",\n      protein: \"Protein\",\n      carbs: \"Karbohidrat\",\n      fat: \"Lemak\",\n    },\n    category: {\n      products: \"Produk\",\n      noProducts: \"Tidak ada produk ditemukan\",\n      filter: \"Filter\",\n      sort: \"Urutkan\",\n    },\n    voice: {\n      title: \"Pesan Suara\",\n      tapToSpeak: \"Ketuk untuk berbicara\",\n      listening: \"Mendengarkan...\",\n      processing: \"Memproses...\",\n      speakNow: \"Bicara sekarang...\",\n      orderConfirm: \"Konfirmasi Pesanan Anda\",\n      itemsFound: \"item ditemukan\",\n      noItemsFound: \"Tidak ada item ditemukan\",\n      tryAgain: \"Coba Lagi\",\n      addAllToCart: \"Tambah Semua ke Keranjang\",\n      webNotSupported: \"Pemesanan suara hanya tersedia di aplikasi Expo Go\",\n      trySaying: \"Coba katakan:\",\n      samplePhrase: \"2 karton susu dan selusin telur\",\n    },\n    admin: {\n      title: \"Dasbor Admin\",\n      stores: \"Toko\",\n      staff: \"Staf\",\n      orders: \"Pesanan\",\n      totalStores: \"Total Toko\",\n      activeStores: \"Toko Aktif\",\n      totalStaff: \"Total Staf\",\n      onlineStaff: \"Staf Online\",\n      totalOrders: \"Total Pesanan\",\n      pendingOrders: \"Pesanan Tertunda\",\n      pickers: \"Pengepak\",\n      drivers: \"Pengemudi\",\n      inactive: \"Tidak Aktif\",\n      codAllowed: \"COD\",\n      activePipeline: \"Pipeline Aktif\",\n      noStoresFound: \"Toko tidak ditemukan\",\n      lastUpdated: \"Terakhir diperbarui\",\n    },\n    orderSuccess: {\n      title: \"Pesanan Berhasil!\",\n      thankYou: \"Terima kasih atas pesanan Anda\",\n      orderConfirmed: \"Pesanan Anda telah dikonfirmasi dan sedang disiapkan\",\n      orderId: \"ID Pesanan\",\n      orderNumber: \"Nomor Pesanan\",\n      estimatedDelivery: \"Perkiraan Pengiriman\",\n      minutes: \"menit\",\n      trackOrder: \"Lacak Pesanan\",\n      backToHome: \"Kembali ke Beranda\",\n    },\n    tracking: {\n      title: \"Lacak Pesanan\",\n      orderStatus: \"Status Pesanan\",\n      rider: \"Pengantar\",\n      store: \"Toko\",\n      you: \"Anda\",\n      order: \"Pesanan\",\n      estimatedArrival: \"Perkiraan Tiba\",\n      contactRider: \"Hubungi Pengantar\",\n      preparingOrder: \"Menyiapkan pesanan Anda\",\n      riderPickedUp: \"Pengantar telah mengambil pesanan Anda\",\n      onTheWayToYou: \"Dalam perjalanan menuju Anda\",\n      almostThere: \"Hampir tiba!\",\n      pickedUp: \"Diambil\",\n    },\n    auth: {\n      enterPhone: \"Masukkan Nomor Telepon\",\n      enterOtp: \"Masukkan Kode OTP\",\n      sendOtp: \"Kirim OTP\",\n      verifyOtp: \"Verifikasi\",\n      sendingOtp: \"Mengirim...\",\n      verifyingOtp: \"Memverifikasi...\",\n      resendOtp: \"Kirim Ulang OTP\",\n      changePhone: \"Ubah nomor telepon\",\n      orContinueWith: \"atau lanjutkan dengan\",\n      google: \"Google\",\n      apple: \"Apple\",\n      skipDemo: \"Lewati untuk Demo\",\n      termsAgree: \"Dengan melanjutkan, Anda menyetujui Syarat Layanan dan Kebijakan Privasi kami\",\n      otpSentTo: \"Masukkan kode 6 digit yang dikirim ke\",\n      demoOtp: \"Demo OTP\",\n      appleNotAvailable: \"Apple Sign-In hanya tersedia di perangkat iOS\",\n      googleSetupRequired: \"Pengaturan Google Sign-In Diperlukan\",\n      demoLogin: \"Login Demo\",\n    },\n    location: {\n      enableLocation: \"Aktifkan Lokasi\",\n      locationDescription: \"Kami membutuhkan lokasi Anda untuk menemukan toko terdekat dan mengirim ke Anda\",\n      grantPermission: \"Berikan Izin\",\n      openSettings: \"Buka Pengaturan\",\n      locationDenied: \"Izin lokasi diperlukan untuk menggunakan fitur ini\",\n    },\n    welcome: {\n      title: \"Selamat Datang di KilatGo\",\n      subtitle: \"Aplikasi pengiriman belanjaan 15 menit Anda\",\n      getStarted: \"Mulai\",\n      freshGroceries: \"Belanjaan Segar\",\n      fastDelivery: \"Pengiriman Cepat\",\n      easyOrdering: \"Pemesanan Mudah\",\n    },\n  },\n};\n\nexport type TranslationKeys = typeof translations.en;\n","path":null,"size_bytes":16877,"size_tokens":null},"client/components/CartToast.tsx":{"content":"import React, { useEffect } from \"react\";\nimport { View, StyleSheet, Pressable } from \"react-native\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { Feather } from \"@expo/vector-icons\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  withTiming,\n  runOnJS,\n} from \"react-native-reanimated\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useLanguage } from \"@/context/LanguageContext\";\nimport { Spacing, BorderRadius, Shadows } from \"@/constants/theme\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\ninterface CartToastProps {\n  visible: boolean;\n  productName: string;\n  onDismiss: () => void;\n}\n\nexport function CartToast({ visible, productName, onDismiss }: CartToastProps) {\n  const { theme } = useTheme();\n  const { t } = useLanguage();\n  const navigation = useNavigation<NavigationProp>();\n  const insets = useSafeAreaInsets();\n  \n  const translateY = useSharedValue(150);\n  const opacity = useSharedValue(0);\n\n  useEffect(() => {\n    if (visible) {\n      translateY.value = withSpring(0, { damping: 15, stiffness: 150 });\n      opacity.value = withTiming(1, { duration: 200 });\n      \n      const timer = setTimeout(() => {\n        dismissToast();\n      }, 4000);\n      \n      return () => clearTimeout(timer);\n    } else {\n      translateY.value = withSpring(150);\n      opacity.value = withTiming(0, { duration: 200 });\n    }\n  }, [visible]);\n\n  const dismissToast = () => {\n    translateY.value = withTiming(150, { duration: 200 });\n    opacity.value = withTiming(0, { duration: 200 }, () => {\n      runOnJS(onDismiss)();\n    });\n  };\n\n  const handleGoToCart = () => {\n    dismissToast();\n    setTimeout(() => {\n      navigation.navigate(\"Cart\");\n    }, 100);\n  };\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ translateY: translateY.value }],\n    opacity: opacity.value,\n  }));\n\n  if (!visible) return null;\n\n  return (\n    <Animated.View\n      style={[\n        styles.container,\n        {\n          bottom: insets.bottom + 100,\n          backgroundColor: theme.cardBackground,\n        },\n        Shadows.medium,\n        animatedStyle,\n      ]}\n    >\n      <View style={[styles.iconContainer, { backgroundColor: theme.success + \"20\" }]}>\n        <Feather name=\"check\" size={20} color={theme.success} />\n      </View>\n      \n      <View style={styles.textContainer}>\n        <ThemedText type=\"body\" style={{ fontWeight: \"600\" }} numberOfLines={1}>\n          {t.product.addedToCart}\n        </ThemedText>\n        <ThemedText type=\"caption\" style={{ color: theme.textSecondary }} numberOfLines={1}>\n          {productName}\n        </ThemedText>\n      </View>\n      \n      <Pressable\n        style={[styles.cartButton, { backgroundColor: theme.primary }]}\n        onPress={handleGoToCart}\n      >\n        <Feather name=\"shopping-cart\" size={16} color={theme.buttonText} />\n        <ThemedText type=\"small\" style={{ color: theme.buttonText, fontWeight: \"600\", marginLeft: 4 }}>\n          {t.cart.title}\n        </ThemedText>\n      </Pressable>\n      \n      <Pressable style={styles.closeButton} onPress={dismissToast}>\n        <Feather name=\"x\" size={18} color={theme.textSecondary} />\n      </Pressable>\n    </Animated.View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: \"absolute\",\n    left: Spacing.lg,\n    right: Spacing.lg,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingVertical: Spacing.md,\n    paddingLeft: Spacing.md,\n    paddingRight: Spacing.xs,\n    borderRadius: BorderRadius.md,\n    zIndex: 1000,\n  },\n  iconContainer: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  textContainer: {\n    flex: 1,\n    marginLeft: Spacing.md,\n    marginRight: Spacing.sm,\n  },\n  cartButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingHorizontal: Spacing.md,\n    paddingVertical: Spacing.sm,\n    borderRadius: BorderRadius.sm,\n  },\n  closeButton: {\n    padding: Spacing.sm,\n  },\n});\n","path":null,"size_bytes":4286,"size_tokens":null}},"version":2}